9065b053590ba6c3f30a63a947b2e952
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock the logger to avoid console output during tests
jest.mock('../../src/core/logging/logger', () => ({
    logger: {
        debug: jest.fn(),
        info: jest.fn(),
        warn: jest.fn(),
        error: jest.fn(),
        fatal: jest.fn()
    }
}));
const environment_1 = require("../../src/config/environment");
// Mock import.meta.env
const mockImportMetaEnv = {
    VITE_API_BASE_URL: 'http://localhost:3001',
    VITE_API_TIMEOUT: '5000',
    VITE_ANTHROPIC_API_KEY: 'sk-ant-test-key',
    VITE_OPENAI_API_KEY: 'sk-test-key',
    VITE_AI_PROVIDER: 'anthropic',
    VITE_CORS_ORIGIN: 'http://localhost:5173',
    VITE_RATE_LIMIT_REQUESTS: '100',
    VITE_RATE_LIMIT_WINDOW: '60000',
    VITE_ENABLE_LOGGING: 'true',
    VITE_ENABLE_MONITORING: 'false',
    VITE_ENABLE_CACHE: 'true',
    VITE_MAX_FILE_SIZE: '20971520',
    VITE_MAX_CONCURRENT_REQUESTS: '5',
    VITE_CACHE_TTL: '3600',
    VITE_DEBUG: 'false',
    VITE_RETRY_MAX_ATTEMPTS: '3',
    VITE_RETRY_INITIAL_DELAY: '1000',
    VITE_RETRY_MAX_DELAY: '10000',
    VITE_CIRCUIT_BREAKER_FAILURE_THRESHOLD: '5',
    VITE_CIRCUIT_BREAKER_RESET_TIMEOUT: '60000',
    VITE_CIRCUIT_BREAKER_SUCCESS_THRESHOLD: '2',
    MODE: 'development'
};
describe('Environment Configuration', () => {
    beforeEach(() => {
        // Reset import.meta.env mock
        Object.defineProperty(global, 'import', {
            value: {
                meta: {
                    env: { ...mockImportMetaEnv }
                }
            },
            writable: true
        });
    });
    describe('loadEnvironment', () => {
        it('should load environment with default values', () => {
            const config = (0, environment_1.loadEnvironment)();
            expect(config.API_BASE_URL).toBe('http://localhost:3001');
            expect(config.API_TIMEOUT).toBe(5000);
            expect(config.AI_PROVIDER).toBe('anthropic');
            expect(config.ENABLE_LOGGING).toBe(true);
            expect(config.ENABLE_CACHE).toBe(true);
            expect(config.NODE_ENV).toBe('development');
        });
        it('should validate URL format for API_BASE_URL', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: { ...mockImportMetaEnv, VITE_API_BASE_URL: 'invalid-url' }
                    }
                },
                writable: true
            });
            expect(() => (0, environment_1.loadEnvironment)()).toThrow('Invalid environment configuration');
        });
        it('should validate numeric values', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: { ...mockImportMetaEnv, VITE_API_TIMEOUT: 'invalid-number' }
                    }
                },
                writable: true
            });
            expect(() => (0, environment_1.loadEnvironment)()).toThrow('Invalid environment configuration');
        });
        it('should validate enum values', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: { ...mockImportMetaEnv, VITE_AI_PROVIDER: 'invalid-provider' }
                    }
                },
                writable: true
            });
            expect(() => (0, environment_1.loadEnvironment)()).toThrow('Invalid environment configuration');
        });
        it('should handle missing optional values', () => {
            const envWithoutOptional = { ...mockImportMetaEnv };
            delete envWithoutOptional.VITE_ANTHROPIC_API_KEY;
            delete envWithoutOptional.VITE_OPENAI_API_KEY;
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: envWithoutOptional
                    }
                },
                writable: true
            });
            const config = (0, environment_1.loadEnvironment)();
            expect(config.ANTHROPIC_API_KEY).toBeUndefined();
            expect(config.OPENAI_API_KEY).toBeUndefined();
        });
    });
    describe('Environment Helpers', () => {
        let config;
        beforeEach(() => {
            config = (0, environment_1.loadEnvironment)();
        });
        describe('env.isDevelopment', () => {
            it('should return true for development mode', () => {
                expect(environment_1.env.isDevelopment()).toBe(true);
            });
            it('should return false for production mode', () => {
                Object.defineProperty(global, 'import', {
                    value: {
                        meta: {
                            env: { ...mockImportMetaEnv, MODE: 'production' }
                        }
                    },
                    writable: true
                });
                const prodConfig = (0, environment_1.loadEnvironment)();
                expect(prodConfig.NODE_ENV).toBe('production');
            });
        });
        describe('env.api', () => {
            it('should return API configuration', () => {
                expect(environment_1.env.api.baseUrl()).toBe('http://localhost:3001');
                expect(environment_1.env.api.timeout()).toBe(5000);
            });
        });
        describe('env.ai', () => {
            it('should return AI provider configuration', () => {
                expect(environment_1.env.ai.provider()).toBe('anthropic');
                expect(environment_1.env.ai.anthropicKey()).toBe('sk-ant-test-key');
                expect(environment_1.env.ai.openaiKey()).toBe('sk-test-key');
            });
        });
        describe('env.security', () => {
            it('should return security configuration', () => {
                expect(environment_1.env.security.corsOrigin()).toBe('http://localhost:5173');
                expect(environment_1.env.security.rateLimitRequests()).toBe(100);
                expect(environment_1.env.security.rateLimitWindow()).toBe(60000);
            });
        });
        describe('env.features', () => {
            it('should return feature flags', () => {
                expect(environment_1.env.features.logging()).toBe(true);
                expect(environment_1.env.features.monitoring()).toBe(false);
                expect(environment_1.env.features.cache()).toBe(true);
            });
        });
        describe('env.performance', () => {
            it('should return performance configuration', () => {
                expect(environment_1.env.performance.maxFileSize()).toBe(20971520);
                expect(environment_1.env.performance.maxConcurrentRequests()).toBe(5);
                expect(environment_1.env.performance.cacheTTL()).toBe(3600);
            });
        });
        describe('env.retry', () => {
            it('should return retry configuration', () => {
                expect(environment_1.env.retry.maxAttempts()).toBe(3);
                expect(environment_1.env.retry.initialDelay()).toBe(1000);
                expect(environment_1.env.retry.maxDelay()).toBe(10000);
            });
        });
        describe('env.circuitBreaker', () => {
            it('should return circuit breaker configuration', () => {
                expect(environment_1.env.circuitBreaker.failureThreshold()).toBe(5);
                expect(environment_1.env.circuitBreaker.resetTimeout()).toBe(60000);
                expect(environment_1.env.circuitBreaker.successThreshold()).toBe(2);
            });
        });
    });
    describe('validateProductionEnvironment', () => {
        it('should not throw error in development mode', () => {
            expect(() => (0, environment_1.validateProductionEnvironment)()).not.toThrow();
        });
        it('should throw error for missing required variables in production', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: {
                            ...mockImportMetaEnv,
                            MODE: 'production',
                            VITE_API_BASE_URL: '',
                            VITE_ANTHROPIC_API_KEY: '',
                            VITE_OPENAI_API_KEY: '',
                            VITE_CORS_ORIGIN: ''
                        }
                    }
                },
                writable: true
            });
            const prodConfig = (0, environment_1.loadEnvironment)();
            expect(() => (0, environment_1.validateProductionEnvironment)()).toThrow('Missing required environment variables for production');
        });
        it('should pass validation with all required variables in production', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: {
                            ...mockImportMetaEnv,
                            MODE: 'production',
                            VITE_API_BASE_URL: 'https://api.production.com',
                            VITE_CORS_ORIGIN: 'https://app.production.com'
                        }
                    }
                },
                writable: true
            });
            const prodConfig = (0, environment_1.loadEnvironment)();
            expect(() => (0, environment_1.validateProductionEnvironment)()).not.toThrow();
        });
    });
    describe('getEnvironmentSummary', () => {
        it('should return environment summary', () => {
            const summary = (0, environment_1.getEnvironmentSummary)();
            expect(summary.nodeEnv).toBe('development');
            expect(summary.debug).toBe(false);
            expect(summary.apiBaseUrl).toBe('http://localhost:3001');
            expect(summary.aiProvider).toBe('anthropic');
            expect(summary.features).toEqual({
                logging: true,
                monitoring: false,
                cache: true,
            });
            expect(summary.performance).toEqual({
                maxFileSize: '20MB',
                maxConcurrentRequests: 5,
                cacheTTL: '3600s',
            });
            expect(summary.retry).toEqual({
                maxAttempts: 3,
                initialDelay: '1000ms',
                maxDelay: '10000ms',
            });
            expect(summary.circuitBreaker).toEqual({
                failureThreshold: 5,
                resetTimeout: '60000ms',
                successThreshold: 2,
            });
        });
    });
    describe('Edge Cases', () => {
        it('should handle empty string values', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: {
                            ...mockImportMetaEnv,
                            VITE_API_TIMEOUT: '',
                            VITE_RATE_LIMIT_REQUESTS: ''
                        }
                    }
                },
                writable: true
            });
            const config = (0, environment_1.loadEnvironment)();
            expect(config.API_TIMEOUT).toBe(5000); // Default value
            expect(config.RATE_LIMIT_REQUESTS).toBe(100); // Default value
        });
        it('should handle undefined values', () => {
            const envWithUndefined = { ...mockImportMetaEnv };
            delete envWithUndefined.VITE_API_TIMEOUT;
            delete envWithUndefined.VITE_RATE_LIMIT_REQUESTS;
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: envWithUndefined
                    }
                },
                writable: true
            });
            const config = (0, environment_1.loadEnvironment)();
            expect(config.API_TIMEOUT).toBe(5000); // Default value
            expect(config.RATE_LIMIT_REQUESTS).toBe(100); // Default value
        });
        it('should validate numeric ranges', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: {
                            ...mockImportMetaEnv,
                            VITE_API_TIMEOUT: '0', // Below minimum
                            VITE_MAX_FILE_SIZE: '999999999999' // Above maximum
                        }
                    }
                },
                writable: true
            });
            expect(() => (0, environment_1.loadEnvironment)()).toThrow('Invalid environment configuration');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxzYXJhaFxcUmVwb3NcXENDSCBBeGNlc3MgSW50ZWxsaWdlbmNlIFZpYmVkXFx0ZXN0c1xcdW5pdFxcZW52aXJvbm1lbnQudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQTRCQSx1REFBdUQ7QUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQywrQkFBK0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2hELE1BQU0sRUFBRTtRQUNOLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNoQixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNqQjtDQUNGLENBQUMsQ0FBQyxDQUFDO0FBckNKLDhEQUEwSDtBQUUxSCx1QkFBdUI7QUFDdkIsTUFBTSxpQkFBaUIsR0FBRztJQUN4QixpQkFBaUIsRUFBRSx1QkFBdUI7SUFDMUMsZ0JBQWdCLEVBQUUsTUFBTTtJQUN4QixzQkFBc0IsRUFBRSxpQkFBaUI7SUFDekMsbUJBQW1CLEVBQUUsYUFBYTtJQUNsQyxnQkFBZ0IsRUFBRSxXQUFXO0lBQzdCLGdCQUFnQixFQUFFLHVCQUF1QjtJQUN6Qyx3QkFBd0IsRUFBRSxLQUFLO0lBQy9CLHNCQUFzQixFQUFFLE9BQU87SUFDL0IsbUJBQW1CLEVBQUUsTUFBTTtJQUMzQixzQkFBc0IsRUFBRSxPQUFPO0lBQy9CLGlCQUFpQixFQUFFLE1BQU07SUFDekIsa0JBQWtCLEVBQUUsVUFBVTtJQUM5Qiw0QkFBNEIsRUFBRSxHQUFHO0lBQ2pDLGNBQWMsRUFBRSxNQUFNO0lBQ3RCLFVBQVUsRUFBRSxPQUFPO0lBQ25CLHVCQUF1QixFQUFFLEdBQUc7SUFDNUIsd0JBQXdCLEVBQUUsTUFBTTtJQUNoQyxvQkFBb0IsRUFBRSxPQUFPO0lBQzdCLHNDQUFzQyxFQUFFLEdBQUc7SUFDM0Msa0NB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LENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcc2FyYWhcXFJlcG9zXFxDQ0ggQXhjZXNzIEludGVsbGlnZW5jZSBWaWJlZFxcdGVzdHNcXHVuaXRcXGVudmlyb25tZW50LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9hZEVudmlyb25tZW50LCBlbnYsIGdldEVudmlyb25tZW50U3VtbWFyeSwgdmFsaWRhdGVQcm9kdWN0aW9uRW52aXJvbm1lbnQgfSBmcm9tICcuLi8uLi9zcmMvY29uZmlnL2Vudmlyb25tZW50JztcclxuXHJcbi8vIE1vY2sgaW1wb3J0Lm1ldGEuZW52XHJcbmNvbnN0IG1vY2tJbXBvcnRNZXRhRW52ID0ge1xyXG4gIFZJVEVfQVBJX0JBU0VfVVJMOiAnaHR0cDovL2xvY2FsaG9zdDozMDAxJyxcclxuICBWSVRFX0FQSV9USU1FT1VUOiAnNTAwMCcsXHJcbiAgVklURV9BTlRIUk9QSUNfQVBJX0tFWTogJ3NrLWFudC10ZXN0LWtleScsXHJcbiAgVklURV9PUEVOQUlfQVBJX0tFWTogJ3NrLXRlc3Qta2V5JyxcclxuICBWSVRFX0FJX1BST1ZJREVSOiAnYW50aHJvcGljJyxcclxuICBWSVRFX0NPUlNfT1JJR0lOOiAnaHR0cDovL2xvY2FsaG9zdDo1MTczJyxcclxuICBWSVRFX1JBVEVfTElNSVRfUkVRVUVTVFM6ICcxMDAnLFxyXG4gIFZJVEVfUkFURV9MSU1JVF9XSU5ET1c6ICc2MDAwMCcsXHJcbiAgVklURV9FTkFCTEVfTE9HR0lORzogJ3RydWUnLFxyXG4gIFZJVEVfRU5BQkxFX01PTklUT1JJTkc6ICdmYWxzZScsXHJcbiAgVklURV9FTkFCTEVfQ0FDSEU6ICd0cnVlJyxcclxuICBWSVRFX01BWF9GSUxFX1NJWkU6ICcyMDk3MTUyMCcsXHJcbiAgVklURV9NQVhfQ09OQ1VSUkVOVF9SRVFVRVNUUzogJzUnLFxyXG4gIFZJVEVfQ0FDSEVfVFRMOiAnMzYwMCcsXHJcbiAgVklURV9ERUJVRzogJ2ZhbHNlJyxcclxuICBWSVRFX1JFVFJZX01BWF9BVFRFTVBUUzogJzMnLFxyXG4gIFZJVEVfUkVUUllfSU5JVElBTF9ERUxBWTogJzEwMDAnLFxyXG4gIFZJVEVfUkVUUllfTUFYX0RFTEFZOiAnMTAwMDAnLFxyXG4gIFZJVEVfQ0lSQ1VJVF9CUkVBS0VSX0ZBSUxVUkVfVEhSRVNIT0xEOiAnNScsXHJcbiAgVklURV9DSVJDVUlUX0JSRUFLRVJfUkVTRVRfVElNRU9VVDogJzYwMDAwJyxcclxuICBWSVRFX0NJUkNVSVRfQlJFQUtFUl9TVUNDRVNTX1RIUkVTSE9MRDogJzInLFxyXG4gIE1PREU6ICdkZXZlbG9wbWVudCdcclxufTtcclxuXHJcbi8vIE1vY2sgdGhlIGxvZ2dlciB0byBhdm9pZCBjb25zb2xlIG91dHB1dCBkdXJpbmcgdGVzdHNcclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvY29yZS9sb2dnaW5nL2xvZ2dlcicsICgpID0+ICh7XHJcbiAgbG9nZ2VyOiB7XHJcbiAgICBkZWJ1ZzogamVzdC5mbigpLFxyXG4gICAgaW5mbzogamVzdC5mbigpLFxyXG4gICAgd2FybjogamVzdC5mbigpLFxyXG4gICAgZXJyb3I6IGplc3QuZm4oKSxcclxuICAgIGZhdGFsOiBqZXN0LmZuKClcclxuICB9XHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCdFbnZpcm9ubWVudCBDb25maWd1cmF0aW9uJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgLy8gUmVzZXQgaW1wb3J0Lm1ldGEuZW52IG1vY2tcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsICdpbXBvcnQnLCB7XHJcbiAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgZW52OiB7IC4uLm1vY2tJbXBvcnRNZXRhRW52IH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHdyaXRhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2xvYWRFbnZpcm9ubWVudCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgbG9hZCBlbnZpcm9ubWVudCB3aXRoIGRlZmF1bHQgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb25maWcgPSBsb2FkRW52aXJvbm1lbnQoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChjb25maWcuQVBJX0JBU0VfVVJMKS50b0JlKCdodHRwOi8vbG9jYWxob3N0OjMwMDEnKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5BUElfVElNRU9VVCkudG9CZSg1MDAwKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5BSV9QUk9WSURFUikudG9CZSgnYW50aHJvcGljJyk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuRU5BQkxFX0xPR0dJTkcpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuRU5BQkxFX0NBQ0hFKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLk5PREVfRU5WKS50b0JlKCdkZXZlbG9wbWVudCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBVUkwgZm9ybWF0IGZvciBBUElfQkFTRV9VUkwnLCAoKSA9PiB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsICdpbXBvcnQnLCB7XHJcbiAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgICAgZW52OiB7IC4uLm1vY2tJbXBvcnRNZXRhRW52LCBWSVRFX0FQSV9CQVNFX1VSTDogJ2ludmFsaWQtdXJsJyB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdCgoKSA9PiBsb2FkRW52aXJvbm1lbnQoKSkudG9UaHJvdygnSW52YWxpZCBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIG51bWVyaWMgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIGVudjogeyAuLi5tb2NrSW1wb3J0TWV0YUVudiwgVklURV9BUElfVElNRU9VVDogJ2ludmFsaWQtbnVtYmVyJyB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdCgoKSA9PiBsb2FkRW52aXJvbm1lbnQoKSkudG9UaHJvdygnSW52YWxpZCBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGVudW0gdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIGVudjogeyAuLi5tb2NrSW1wb3J0TWV0YUVudiwgVklURV9BSV9QUk9WSURFUjogJ2ludmFsaWQtcHJvdmlkZXInIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KCgpID0+IGxvYWRFbnZpcm9ubWVudCgpKS50b1Rocm93KCdJbnZhbGlkIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3Npbmcgb3B0aW9uYWwgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlbnZXaXRob3V0T3B0aW9uYWwgPSB7IC4uLm1vY2tJbXBvcnRNZXRhRW52IH07XHJcbiAgICAgIGRlbGV0ZSBlbnZXaXRob3V0T3B0aW9uYWwuVklURV9BTlRIUk9QSUNfQVBJX0tFWTtcclxuICAgICAgZGVsZXRlIGVudldpdGhvdXRPcHRpb25hbC5WSVRFX09QRU5BSV9BUElfS0VZO1xyXG5cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ2ltcG9ydCcsIHtcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICBlbnY6IGVudldpdGhvdXRPcHRpb25hbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBjb25maWcgPSBsb2FkRW52aXJvbm1lbnQoKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5BTlRIUk9QSUNfQVBJX0tFWSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLk9QRU5BSV9BUElfS0VZKS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Vudmlyb25tZW50IEhlbHBlcnMnLCAoKSA9PiB7XHJcbiAgICBsZXQgY29uZmlnOiBhbnk7XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIGNvbmZpZyA9IGxvYWRFbnZpcm9ubWVudCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2Vudi5pc0RldmVsb3BtZW50JywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIGZvciBkZXZlbG9wbWVudCBtb2RlJywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChlbnYuaXNEZXZlbG9wbWVudCgpKS50b0JlKHRydWUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBwcm9kdWN0aW9uIG1vZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ2ltcG9ydCcsIHtcclxuICAgICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgICAgICBlbnY6IHsgLi4ubW9ja0ltcG9ydE1ldGFFbnYsIE1PREU6ICdwcm9kdWN0aW9uJyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2RDb25maWcgPSBsb2FkRW52aXJvbm1lbnQoKTtcclxuICAgICAgICBleHBlY3QocHJvZENvbmZpZy5OT0RFX0VOVikudG9CZSgncHJvZHVjdGlvbicpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdlbnYuYXBpJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBBUEkgY29uZmlndXJhdGlvbicsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoZW52LmFwaS5iYXNlVXJsKCkpLnRvQmUoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScpO1xyXG4gICAgICAgIGV4cGVjdChlbnYuYXBpLnRpbWVvdXQoKSkudG9CZSg1MDAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZW52LmFpJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBBSSBwcm92aWRlciBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChlbnYuYWkucHJvdmlkZXIoKSkudG9CZSgnYW50aHJvcGljJyk7XHJcbiAgICAgICAgZXhwZWN0KGVudi5haS5hbnRocm9waWNLZXkoKSkudG9CZSgnc2stYW50LXRlc3Qta2V5Jyk7XHJcbiAgICAgICAgZXhwZWN0KGVudi5haS5vcGVuYWlLZXkoKSkudG9CZSgnc2stdGVzdC1rZXknKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZW52LnNlY3VyaXR5JywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBzZWN1cml0eSBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChlbnYuc2VjdXJpdHkuY29yc09yaWdpbigpKS50b0JlKCdodHRwOi8vbG9jYWxob3N0OjUxNzMnKTtcclxuICAgICAgICBleHBlY3QoZW52LnNlY3VyaXR5LnJhdGVMaW1pdFJlcXVlc3RzKCkpLnRvQmUoMTAwKTtcclxuICAgICAgICBleHBlY3QoZW52LnNlY3VyaXR5LnJhdGVMaW1pdFdpbmRvdygpKS50b0JlKDYwMDAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZW52LmZlYXR1cmVzJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBmZWF0dXJlIGZsYWdzJywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChlbnYuZmVhdHVyZXMubG9nZ2luZygpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIGV4cGVjdChlbnYuZmVhdHVyZXMubW9uaXRvcmluZygpKS50b0JlKGZhbHNlKTtcclxuICAgICAgICBleHBlY3QoZW52LmZlYXR1cmVzLmNhY2hlKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2Vudi5wZXJmb3JtYW5jZScsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gcGVyZm9ybWFuY2UgY29uZmlndXJhdGlvbicsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoZW52LnBlcmZvcm1hbmNlLm1heEZpbGVTaXplKCkpLnRvQmUoMjA5NzE1MjApO1xyXG4gICAgICAgIGV4cGVjdChlbnYucGVyZm9ybWFuY2UubWF4Q29uY3VycmVudFJlcXVlc3RzKCkpLnRvQmUoNSk7XHJcbiAgICAgICAgZXhwZWN0KGVudi5wZXJmb3JtYW5jZS5jYWNoZVRUTCgpKS50b0JlKDM2MDApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdlbnYucmV0cnknLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHJldHJ5IGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGVudi5yZXRyeS5tYXhBdHRlbXB0cygpKS50b0JlKDMpO1xyXG4gICAgICAgIGV4cGVjdChlbnYucmV0cnkuaW5pdGlhbERlbGF5KCkpLnRvQmUoMTAwMCk7XHJcbiAgICAgICAgZXhwZWN0KGVudi5yZXRyeS5tYXhEZWxheSgpKS50b0JlKDEwMDAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZW52LmNpcmN1aXRCcmVha2VyJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBjaXJjdWl0IGJyZWFrZXIgY29uZmlndXJhdGlvbicsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoZW52LmNpcmN1aXRCcmVha2VyLmZhaWx1cmVUaHJlc2hvbGQoKSkudG9CZSg1KTtcclxuICAgICAgICBleHBlY3QoZW52LmNpcmN1aXRCcmVha2VyLnJlc2V0VGltZW91dCgpKS50b0JlKDYwMDAwKTtcclxuICAgICAgICBleHBlY3QoZW52LmNpcmN1aXRCcmVha2VyLnN1Y2Nlc3NUaHJlc2hvbGQoKSkudG9CZSgyKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlUHJvZHVjdGlvbkVudmlyb25tZW50JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBub3QgdGhyb3cgZXJyb3IgaW4gZGV2ZWxvcG1lbnQgbW9kZScsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlUHJvZHVjdGlvbkVudmlyb25tZW50KCkpLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBtaXNzaW5nIHJlcXVpcmVkIHZhcmlhYmxlcyBpbiBwcm9kdWN0aW9uJywgKCkgPT4ge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIGVudjogeyBcclxuICAgICAgICAgICAgICAuLi5tb2NrSW1wb3J0TWV0YUVudiwgXHJcbiAgICAgICAgICAgICAgTU9ERTogJ3Byb2R1Y3Rpb24nLFxyXG4gICAgICAgICAgICAgIFZJVEVfQVBJX0JBU0VfVVJMOiAnJyxcclxuICAgICAgICAgICAgICBWSVRFX0FOVEhST1BJQ19BUElfS0VZOiAnJyxcclxuICAgICAgICAgICAgICBWSVRFX09QRU5BSV9BUElfS0VZOiAnJyxcclxuICAgICAgICAgICAgICBWSVRFX0NPUlNfT1JJR0lOOiAnJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHByb2RDb25maWcgPSBsb2FkRW52aXJvbm1lbnQoKTtcclxuICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlUHJvZHVjdGlvbkVudmlyb25tZW50KCkpLnRvVGhyb3coJ01pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBwcm9kdWN0aW9uJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHBhc3MgdmFsaWRhdGlvbiB3aXRoIGFsbCByZXF1aXJlZCB2YXJpYWJsZXMgaW4gcHJvZHVjdGlvbicsICgpID0+IHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ2ltcG9ydCcsIHtcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICBlbnY6IHsgXHJcbiAgICAgICAgICAgICAgLi4ubW9ja0ltcG9ydE1ldGFFbnYsIFxyXG4gICAgICAgICAgICAgIE1PREU6ICdwcm9kdWN0aW9uJyxcclxuICAgICAgICAgICAgICBWSVRFX0FQSV9CQVNFX1VSTDogJ2h0dHBzOi8vYXBpLnByb2R1Y3Rpb24uY29tJyxcclxuICAgICAgICAgICAgICBWSVRFX0NPUlNfT1JJR0lOOiAnaHR0cHM6Ly9hcHAucHJvZHVjdGlvbi5jb20nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcHJvZENvbmZpZyA9IGxvYWRFbnZpcm9ubWVudCgpO1xyXG4gICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVQcm9kdWN0aW9uRW52aXJvbm1lbnQoKSkubm90LnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0RW52aXJvbm1lbnRTdW1tYXJ5JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW52aXJvbm1lbnQgc3VtbWFyeScsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3VtbWFyeSA9IGdldEVudmlyb25tZW50U3VtbWFyeSgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHN1bW1hcnkubm9kZUVudikudG9CZSgnZGV2ZWxvcG1lbnQnKTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuZGVidWcpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3Qoc3VtbWFyeS5hcGlCYXNlVXJsKS50b0JlKCdodHRwOi8vbG9jYWxob3N0OjMwMDEnKTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuYWlQcm92aWRlcikudG9CZSgnYW50aHJvcGljJyk7XHJcbiAgICAgIGV4cGVjdChzdW1tYXJ5LmZlYXR1cmVzKS50b0VxdWFsKHtcclxuICAgICAgICBsb2dnaW5nOiB0cnVlLFxyXG4gICAgICAgIG1vbml0b3Jpbmc6IGZhbHNlLFxyXG4gICAgICAgIGNhY2hlOiB0cnVlLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkucGVyZm9ybWFuY2UpLnRvRXF1YWwoe1xyXG4gICAgICAgIG1heEZpbGVTaXplOiAnMjBNQicsXHJcbiAgICAgICAgbWF4Q29uY3VycmVudFJlcXVlc3RzOiA1LFxyXG4gICAgICAgIGNhY2hlVFRMOiAnMzYwMHMnLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkucmV0cnkpLnRvRXF1YWwoe1xyXG4gICAgICAgIG1heEF0dGVtcHRzOiAzLFxyXG4gICAgICAgIGluaXRpYWxEZWxheTogJzEwMDBtcycsXHJcbiAgICAgICAgbWF4RGVsYXk6ICcxMDAwMG1zJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGV4cGVjdChzdW1tYXJ5LmNpcmN1aXRCcmVha2VyKS50b0VxdWFsKHtcclxuICAgICAgICBmYWlsdXJlVGhyZXNob2xkOiA1LFxyXG4gICAgICAgIHJlc2V0VGltZW91dDogJzYwMDAwbXMnLFxyXG4gICAgICAgIHN1Y2Nlc3NUaHJlc2hvbGQ6IDIsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgc3RyaW5nIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ2ltcG9ydCcsIHtcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICBlbnY6IHsgXHJcbiAgICAgICAgICAgICAgLi4ubW9ja0ltcG9ydE1ldGFFbnYsXHJcbiAgICAgICAgICAgICAgVklURV9BUElfVElNRU9VVDogJycsXHJcbiAgICAgICAgICAgICAgVklURV9SQVRFX0xJTUlUX1JFUVVFU1RTOiAnJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGxvYWRFbnZpcm9ubWVudCgpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLkFQSV9USU1FT1VUKS50b0JlKDUwMDApOyAvLyBEZWZhdWx0IHZhbHVlXHJcbiAgICAgIGV4cGVjdChjb25maWcuUkFURV9MSU1JVF9SRVFVRVNUUykudG9CZSgxMDApOyAvLyBEZWZhdWx0IHZhbHVlXHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmRlZmluZWQgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlbnZXaXRoVW5kZWZpbmVkID0geyAuLi5tb2NrSW1wb3J0TWV0YUVudiB9O1xyXG4gICAgICBkZWxldGUgZW52V2l0aFVuZGVmaW5lZC5WSVRFX0FQSV9USU1FT1VUO1xyXG4gICAgICBkZWxldGUgZW52V2l0aFVuZGVmaW5lZC5WSVRFX1JBVEVfTElNSVRfUkVRVUVTVFM7XHJcblxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIGVudjogZW52V2l0aFVuZGVmaW5lZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBjb25maWcgPSBsb2FkRW52aXJvbm1lbnQoKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5BUElfVElNRU9VVCkudG9CZSg1MDAwKTsgLy8gRGVmYXVsdCB2YWx1ZVxyXG4gICAgICBleHBlY3QoY29uZmlnLlJBVEVfTElNSVRfUkVRVUVTVFMpLnRvQmUoMTAwKTsgLy8gRGVmYXVsdCB2YWx1ZVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBudW1lcmljIHJhbmdlcycsICgpID0+IHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ2ltcG9ydCcsIHtcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICBlbnY6IHsgXHJcbiAgICAgICAgICAgICAgLi4ubW9ja0ltcG9ydE1ldGFFbnYsXHJcbiAgICAgICAgICAgICAgVklURV9BUElfVElNRU9VVDogJzAnLCAvLyBCZWxvdyBtaW5pbXVtXHJcbiAgICAgICAgICAgICAgVklURV9NQVhfRklMRV9TSVpFOiAnOTk5OTk5OTk5OTk5JyAvLyBBYm92ZSBtYXhpbXVtXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KCgpID0+IGxvYWRFbnZpcm9ubWVudCgpKS50b1Rocm93KCdJbnZhbGlkIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24nKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9