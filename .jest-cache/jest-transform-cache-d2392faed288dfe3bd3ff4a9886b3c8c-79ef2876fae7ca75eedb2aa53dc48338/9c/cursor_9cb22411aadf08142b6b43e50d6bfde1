45814df73e1d987f69de80ec23f67770
'use strict';

var isContentEditable = require('../edit/isContentEditable.js');
var isElementType = require('../misc/isElementType.js');
function getNextCursorPosition(node, offset, direction, inputType) {
  // The behavior at text node zero offset is inconsistent.
  // When walking backwards:
  // Firefox always moves to zero offset and jumps over last offset.
  // Chrome jumps over zero offset per default but over last offset when Shift is pressed.
  // The cursor always moves to zero offset if the focus area (contenteditable or body) ends there.
  // When walking forward both ignore zero offset.
  // When walking over input elements the cursor moves before or after that element.
  // When walking over line breaks the cursor moves inside any following text node.
  if (isTextNode(node) && offset + direction >= 0 && offset + direction <= node.nodeValue.length) {
    return {
      node,
      offset: offset + direction
    };
  }
  const nextNode = getNextCharacterContentNode(node, offset, direction);
  if (nextNode) {
    if (isTextNode(nextNode)) {
      return {
        node: nextNode,
        offset: direction > 0 ? Math.min(1, nextNode.nodeValue.length) : Math.max(nextNode.nodeValue.length - 1, 0)
      };
    } else if (isElementType.isElementType(nextNode, 'br')) {
      const nextPlusOne = getNextCharacterContentNode(nextNode, undefined, direction);
      if (!nextPlusOne) {
        // The behavior when there is no possible cursor position beyond the line break is inconsistent.
        // In Chrome outside of contenteditable moving before a leading line break is possible.
        // A leading line break can still be removed per deleteContentBackward.
        // A trailing line break on the other hand is not removed by deleteContentForward.
        if (direction < 0 && inputType === 'deleteContentBackward') {
          return {
            node: nextNode.parentNode,
            offset: getOffset(nextNode)
          };
        }
        return undefined;
      } else if (isTextNode(nextPlusOne)) {
        return {
          node: nextPlusOne,
          offset: direction > 0 ? 0 : nextPlusOne.nodeValue.length
        };
      } else if (direction < 0 && isElementType.isElementType(nextPlusOne, 'br')) {
        return {
          node: nextNode.parentNode,
          offset: getOffset(nextNode)
        };
      } else {
        return {
          node: nextPlusOne.parentNode,
          offset: getOffset(nextPlusOne) + (direction > 0 ? 0 : 1)
        };
      }
    } else {
      return {
        node: nextNode.parentNode,
        offset: getOffset(nextNode) + (direction > 0 ? 1 : 0)
      };
    }
  }
}
function getNextCharacterContentNode(node, offset, direction) {
  const nextOffset = Number(offset) + (direction < 0 ? -1 : 0);
  if (offset !== undefined && isElement(node) && nextOffset >= 0 && nextOffset < node.children.length) {
    node = node.children[nextOffset];
  }
  return walkNodes(node, direction === 1 ? 'next' : 'previous', isTreatedAsCharacterContent);
}
function isTreatedAsCharacterContent(node) {
  if (isTextNode(node)) {
    return true;
  }
  if (isElement(node)) {
    if (isElementType.isElementType(node, ['input', 'textarea'])) {
      return node.type !== 'hidden';
    } else if (isElementType.isElementType(node, 'br')) {
      return true;
    }
  }
  return false;
}
function getOffset(node) {
  let i = 0;
  while (node.previousSibling) {
    i++;
    node = node.previousSibling;
  }
  return i;
}
function isElement(node) {
  return node.nodeType === 1;
}
function isTextNode(node) {
  return node.nodeType === 3;
}
function walkNodes(node, direction, callback) {
  for (;;) {
    var _node_ownerDocument;
    const sibling = node[`${direction}Sibling`];
    if (sibling) {
      node = getDescendant(sibling, direction === 'next' ? 'first' : 'last');
      if (callback(node)) {
        return node;
      }
    } else if (node.parentNode && (!isElement(node.parentNode) || !isContentEditable.isContentEditable(node.parentNode) && node.parentNode !== ((_node_ownerDocument = node.ownerDocument) === null || _node_ownerDocument === undefined ? undefined : _node_ownerDocument.body))) {
      node = node.parentNode;
    } else {
      break;
    }
  }
}
function getDescendant(node, direction) {
  while (node.hasChildNodes()) {
    node = node[`${direction}Child`];
  }
  return node;
}
exports.getNextCursorPosition = getNextCursorPosition;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc0NvbnRlbnRFZGl0YWJsZSIsInJlcXVpcmUiLCJpc0VsZW1lbnRUeXBlIiwiZ2V0TmV4dEN1cnNvclBvc2l0aW9uIiwibm9kZSIsIm9mZnNldCIsImRpcmVjdGlvbiIsImlucHV0VHlwZSIsImlzVGV4dE5vZGUiLCJub2RlVmFsdWUiLCJsZW5ndGgiLCJuZXh0Tm9kZSIsImdldE5leHRDaGFyYWN0ZXJDb250ZW50Tm9kZSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJuZXh0UGx1c09uZSIsInVuZGVmaW5lZCIsInBhcmVudE5vZGUiLCJnZXRPZmZzZXQiLCJuZXh0T2Zmc2V0IiwiTnVtYmVyIiwiaXNFbGVtZW50IiwiY2hpbGRyZW4iLCJ3YWxrTm9kZXMiLCJpc1RyZWF0ZWRBc0NoYXJhY3RlckNvbnRlbnQiLCJ0eXBlIiwiaSIsInByZXZpb3VzU2libGluZyIsIm5vZGVUeXBlIiwiY2FsbGJhY2siLCJfbm9kZV9vd25lckRvY3VtZW50Iiwic2libGluZyIsImdldERlc2NlbmRhbnQiLCJvd25lckRvY3VtZW50IiwiYm9keSIsImhhc0NoaWxkTm9kZXMiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiY3Vyc29yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGlzQ29udGVudEVkaXRhYmxlID0gcmVxdWlyZSgnLi4vZWRpdC9pc0NvbnRlbnRFZGl0YWJsZS5qcycpO1xudmFyIGlzRWxlbWVudFR5cGUgPSByZXF1aXJlKCcuLi9taXNjL2lzRWxlbWVudFR5cGUuanMnKTtcblxuZnVuY3Rpb24gZ2V0TmV4dEN1cnNvclBvc2l0aW9uKG5vZGUsIG9mZnNldCwgZGlyZWN0aW9uLCBpbnB1dFR5cGUpIHtcbiAgICAvLyBUaGUgYmVoYXZpb3IgYXQgdGV4dCBub2RlIHplcm8gb2Zmc2V0IGlzIGluY29uc2lzdGVudC5cbiAgICAvLyBXaGVuIHdhbGtpbmcgYmFja3dhcmRzOlxuICAgIC8vIEZpcmVmb3ggYWx3YXlzIG1vdmVzIHRvIHplcm8gb2Zmc2V0IGFuZCBqdW1wcyBvdmVyIGxhc3Qgb2Zmc2V0LlxuICAgIC8vIENocm9tZSBqdW1wcyBvdmVyIHplcm8gb2Zmc2V0IHBlciBkZWZhdWx0IGJ1dCBvdmVyIGxhc3Qgb2Zmc2V0IHdoZW4gU2hpZnQgaXMgcHJlc3NlZC5cbiAgICAvLyBUaGUgY3Vyc29yIGFsd2F5cyBtb3ZlcyB0byB6ZXJvIG9mZnNldCBpZiB0aGUgZm9jdXMgYXJlYSAoY29udGVudGVkaXRhYmxlIG9yIGJvZHkpIGVuZHMgdGhlcmUuXG4gICAgLy8gV2hlbiB3YWxraW5nIGZvcndhcmQgYm90aCBpZ25vcmUgemVybyBvZmZzZXQuXG4gICAgLy8gV2hlbiB3YWxraW5nIG92ZXIgaW5wdXQgZWxlbWVudHMgdGhlIGN1cnNvciBtb3ZlcyBiZWZvcmUgb3IgYWZ0ZXIgdGhhdCBlbGVtZW50LlxuICAgIC8vIFdoZW4gd2Fsa2luZyBvdmVyIGxpbmUgYnJlYWtzIHRoZSBjdXJzb3IgbW92ZXMgaW5zaWRlIGFueSBmb2xsb3dpbmcgdGV4dCBub2RlLlxuICAgIGlmIChpc1RleHROb2RlKG5vZGUpICYmIG9mZnNldCArIGRpcmVjdGlvbiA+PSAwICYmIG9mZnNldCArIGRpcmVjdGlvbiA8PSBub2RlLm5vZGVWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCArIGRpcmVjdGlvblxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBuZXh0Tm9kZSA9IGdldE5leHRDaGFyYWN0ZXJDb250ZW50Tm9kZShub2RlLCBvZmZzZXQsIGRpcmVjdGlvbik7XG4gICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgIGlmIChpc1RleHROb2RlKG5leHROb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBub2RlOiBuZXh0Tm9kZSxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IGRpcmVjdGlvbiA+IDAgPyBNYXRoLm1pbigxLCBuZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoKSA6IE1hdGgubWF4KG5leHROb2RlLm5vZGVWYWx1ZS5sZW5ndGggLSAxLCAwKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0VsZW1lbnRUeXBlLmlzRWxlbWVudFR5cGUobmV4dE5vZGUsICdicicpKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0UGx1c09uZSA9IGdldE5leHRDaGFyYWN0ZXJDb250ZW50Tm9kZShuZXh0Tm9kZSwgdW5kZWZpbmVkLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCFuZXh0UGx1c09uZSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBiZWhhdmlvciB3aGVuIHRoZXJlIGlzIG5vIHBvc3NpYmxlIGN1cnNvciBwb3NpdGlvbiBiZXlvbmQgdGhlIGxpbmUgYnJlYWsgaXMgaW5jb25zaXN0ZW50LlxuICAgICAgICAgICAgICAgIC8vIEluIENocm9tZSBvdXRzaWRlIG9mIGNvbnRlbnRlZGl0YWJsZSBtb3ZpbmcgYmVmb3JlIGEgbGVhZGluZyBsaW5lIGJyZWFrIGlzIHBvc3NpYmxlLlxuICAgICAgICAgICAgICAgIC8vIEEgbGVhZGluZyBsaW5lIGJyZWFrIGNhbiBzdGlsbCBiZSByZW1vdmVkIHBlciBkZWxldGVDb250ZW50QmFja3dhcmQuXG4gICAgICAgICAgICAgICAgLy8gQSB0cmFpbGluZyBsaW5lIGJyZWFrIG9uIHRoZSBvdGhlciBoYW5kIGlzIG5vdCByZW1vdmVkIGJ5IGRlbGV0ZUNvbnRlbnRGb3J3YXJkLlxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPCAwICYmIGlucHV0VHlwZSA9PT0gJ2RlbGV0ZUNvbnRlbnRCYWNrd2FyZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IG5leHROb2RlLnBhcmVudE5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGdldE9mZnNldChuZXh0Tm9kZSlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNUZXh0Tm9kZShuZXh0UGx1c09uZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBub2RlOiBuZXh0UGx1c09uZSxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBkaXJlY3Rpb24gPiAwID8gMCA6IG5leHRQbHVzT25lLm5vZGVWYWx1ZS5sZW5ndGhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPCAwICYmIGlzRWxlbWVudFR5cGUuaXNFbGVtZW50VHlwZShuZXh0UGx1c09uZSwgJ2JyJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBub2RlOiBuZXh0Tm9kZS5wYXJlbnROb2RlLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGdldE9mZnNldChuZXh0Tm9kZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBub2RlOiBuZXh0UGx1c09uZS5wYXJlbnROb2RlLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGdldE9mZnNldChuZXh0UGx1c09uZSkgKyAoZGlyZWN0aW9uID4gMCA/IDAgOiAxKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5vZGU6IG5leHROb2RlLnBhcmVudE5vZGUsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBnZXRPZmZzZXQobmV4dE5vZGUpICsgKGRpcmVjdGlvbiA+IDAgPyAxIDogMClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBnZXROZXh0Q2hhcmFjdGVyQ29udGVudE5vZGUobm9kZSwgb2Zmc2V0LCBkaXJlY3Rpb24pIHtcbiAgICBjb25zdCBuZXh0T2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgKyAoZGlyZWN0aW9uIDwgMCA/IC0xIDogMCk7XG4gICAgaWYgKG9mZnNldCAhPT0gdW5kZWZpbmVkICYmIGlzRWxlbWVudChub2RlKSAmJiBuZXh0T2Zmc2V0ID49IDAgJiYgbmV4dE9mZnNldCA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLmNoaWxkcmVuW25leHRPZmZzZXRdO1xuICAgIH1cbiAgICByZXR1cm4gd2Fsa05vZGVzKG5vZGUsIGRpcmVjdGlvbiA9PT0gMSA/ICduZXh0JyA6ICdwcmV2aW91cycsIGlzVHJlYXRlZEFzQ2hhcmFjdGVyQ29udGVudCk7XG59XG5mdW5jdGlvbiBpc1RyZWF0ZWRBc0NoYXJhY3RlckNvbnRlbnQobm9kZSkge1xuICAgIGlmIChpc1RleHROb2RlKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoaXNFbGVtZW50KG5vZGUpKSB7XG4gICAgICAgIGlmIChpc0VsZW1lbnRUeXBlLmlzRWxlbWVudFR5cGUobm9kZSwgW1xuICAgICAgICAgICAgJ2lucHV0JyxcbiAgICAgICAgICAgICd0ZXh0YXJlYSdcbiAgICAgICAgXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLnR5cGUgIT09ICdoaWRkZW4nO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRWxlbWVudFR5cGUuaXNFbGVtZW50VHlwZShub2RlLCAnYnInKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZ2V0T2Zmc2V0KG5vZGUpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUobm9kZS5wcmV2aW91c1NpYmxpbmcpe1xuICAgICAgICBpKys7XG4gICAgICAgIG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZztcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAxO1xufVxuZnVuY3Rpb24gaXNUZXh0Tm9kZShub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IDM7XG59XG5mdW5jdGlvbiB3YWxrTm9kZXMobm9kZSwgZGlyZWN0aW9uLCBjYWxsYmFjaykge1xuICAgIGZvcig7Oyl7XG4gICAgICAgIHZhciBfbm9kZV9vd25lckRvY3VtZW50O1xuICAgICAgICBjb25zdCBzaWJsaW5nID0gbm9kZVtgJHtkaXJlY3Rpb259U2libGluZ2BdO1xuICAgICAgICBpZiAoc2libGluZykge1xuICAgICAgICAgICAgbm9kZSA9IGdldERlc2NlbmRhbnQoc2libGluZywgZGlyZWN0aW9uID09PSAnbmV4dCcgPyAnZmlyc3QnIDogJ2xhc3QnKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayhub2RlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAmJiAoIWlzRWxlbWVudChub2RlLnBhcmVudE5vZGUpIHx8ICFpc0NvbnRlbnRFZGl0YWJsZS5pc0NvbnRlbnRFZGl0YWJsZShub2RlLnBhcmVudE5vZGUpICYmIG5vZGUucGFyZW50Tm9kZSAhPT0gKChfbm9kZV9vd25lckRvY3VtZW50ID0gbm9kZS5vd25lckRvY3VtZW50KSA9PT0gbnVsbCB8fCBfbm9kZV9vd25lckRvY3VtZW50ID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBfbm9kZV9vd25lckRvY3VtZW50LmJvZHkpKSkge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RGVzY2VuZGFudChub2RlLCBkaXJlY3Rpb24pIHtcbiAgICB3aGlsZShub2RlLmhhc0NoaWxkTm9kZXMoKSl7XG4gICAgICAgIG5vZGUgPSBub2RlW2Ake2RpcmVjdGlvbn1DaGlsZGBdO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbn1cblxuZXhwb3J0cy5nZXROZXh0Q3Vyc29yUG9zaXRpb24gPSBnZXROZXh0Q3Vyc29yUG9zaXRpb247XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVosSUFBSUEsaUJBQWlCLEdBQUdDLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQztBQUMvRCxJQUFJQyxhQUFhLEdBQUdELE9BQU8sQ0FBQywwQkFBMEIsQ0FBQztBQUV2RCxTQUFTRSxxQkFBcUJBLENBQUNDLElBQUksRUFBRUMsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBRTtFQUMvRDtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0EsSUFBSUMsVUFBVSxDQUFDSixJQUFJLENBQUMsSUFBSUMsTUFBTSxHQUFHQyxTQUFTLElBQUksQ0FBQyxJQUFJRCxNQUFNLEdBQUdDLFNBQVMsSUFBSUYsSUFBSSxDQUFDSyxTQUFTLENBQUNDLE1BQU0sRUFBRTtJQUM1RixPQUFPO01BQ0hOLElBQUk7TUFDSkMsTUFBTSxFQUFFQSxNQUFNLEdBQUdDO0lBQ3JCLENBQUM7RUFDTDtFQUNBLE1BQU1LLFFBQVEsR0FBR0MsMkJBQTJCLENBQUNSLElBQUksRUFBRUMsTUFBTSxFQUFFQyxTQUFTLENBQUM7RUFDckUsSUFBSUssUUFBUSxFQUFFO0lBQ1YsSUFBSUgsVUFBVSxDQUFDRyxRQUFRLENBQUMsRUFBRTtNQUN0QixPQUFPO1FBQ0hQLElBQUksRUFBRU8sUUFBUTtRQUNkTixNQUFNLEVBQUVDLFNBQVMsR0FBRyxDQUFDLEdBQUdPLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRUgsUUFB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