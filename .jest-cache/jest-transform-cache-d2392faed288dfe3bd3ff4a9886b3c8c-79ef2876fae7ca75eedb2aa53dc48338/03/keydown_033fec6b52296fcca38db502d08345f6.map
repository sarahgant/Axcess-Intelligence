{"version":3,"names":["UI","require","getValueOrTextContent","isElementType","isContentEditable","isEditable","getTabDestination","selection","focus","input","moveSelection","selectAll","setSelectionRange","radio","registry","behavior","keydown","event","target","instance","_keydownBehavior_event_key","_keydownBehavior_event_key1","keydownBehavior","key","undefined","call","combinationBehavior","ArrowDown","type","walkRadio","ArrowLeft","ArrowRight","ArrowUp","Backspace","Delete","End","_getValueOrTextContent","_getValueOrTextContent_length","newPos","length","Home","PageDown","getUIValue","PageUp","Tab","dest","system","keyboard","modifiers","Shift","focusElement","hasOwnSelection","setUISelection","anchorOffset","focusOffset","value","code","Control"],"sources":["keydown.js"],"sourcesContent":["'use strict';\n\nvar UI = require('../../document/UI.js');\nvar getValueOrTextContent = require('../../document/getValueOrTextContent.js');\nvar isElementType = require('../../utils/misc/isElementType.js');\nrequire('../../utils/dataTransfer/Clipboard.js');\nvar isContentEditable = require('../../utils/edit/isContentEditable.js');\nvar isEditable = require('../../utils/edit/isEditable.js');\nvar getTabDestination = require('../../utils/focus/getTabDestination.js');\nvar selection = require('../../utils/focus/selection.js');\nvar focus = require('../focus.js');\nvar input = require('../input.js');\nvar moveSelection = require('../selection/moveSelection.js');\nvar selectAll = require('../selection/selectAll.js');\nvar setSelectionRange = require('../selection/setSelectionRange.js');\nvar radio = require('../radio.js');\nvar registry = require('./registry.js');\n\nregistry.behavior.keydown = (event, target, instance)=>{\n    var _keydownBehavior_event_key;\n    var _keydownBehavior_event_key1;\n    return (_keydownBehavior_event_key1 = (_keydownBehavior_event_key = keydownBehavior[event.key]) === null || _keydownBehavior_event_key === undefined ? undefined : _keydownBehavior_event_key.call(keydownBehavior, event, target, instance)) !== null && _keydownBehavior_event_key1 !== undefined ? _keydownBehavior_event_key1 : combinationBehavior(event, target, instance);\n};\nconst keydownBehavior = {\n    ArrowDown: (event, target, instance)=>{\n        /* istanbul ignore else */ if (isElementType.isElementType(target, 'input', {\n            type: 'radio'\n        })) {\n            return ()=>radio.walkRadio(instance, target, 1);\n        }\n    },\n    ArrowLeft: (event, target, instance)=>{\n        if (isElementType.isElementType(target, 'input', {\n            type: 'radio'\n        })) {\n            return ()=>radio.walkRadio(instance, target, -1);\n        }\n        return ()=>moveSelection.moveSelection(target, -1);\n    },\n    ArrowRight: (event, target, instance)=>{\n        if (isElementType.isElementType(target, 'input', {\n            type: 'radio'\n        })) {\n            return ()=>radio.walkRadio(instance, target, 1);\n        }\n        return ()=>moveSelection.moveSelection(target, 1);\n    },\n    ArrowUp: (event, target, instance)=>{\n        /* istanbul ignore else */ if (isElementType.isElementType(target, 'input', {\n            type: 'radio'\n        })) {\n            return ()=>radio.walkRadio(instance, target, -1);\n        }\n    },\n    Backspace: (event, target, instance)=>{\n        if (isEditable.isEditable(target)) {\n            return ()=>{\n                input.input(instance, target, '', 'deleteContentBackward');\n            };\n        }\n    },\n    Delete: (event, target, instance)=>{\n        if (isEditable.isEditable(target)) {\n            return ()=>{\n                input.input(instance, target, '', 'deleteContentForward');\n            };\n        }\n    },\n    End: (event, target)=>{\n        if (isElementType.isElementType(target, [\n            'input',\n            'textarea'\n        ]) || isContentEditable.isContentEditable(target)) {\n            return ()=>{\n                var _getValueOrTextContent;\n                var _getValueOrTextContent_length;\n                const newPos = (_getValueOrTextContent_length = (_getValueOrTextContent = getValueOrTextContent.getValueOrTextContent(target)) === null || _getValueOrTextContent === undefined ? undefined : _getValueOrTextContent.length) !== null && _getValueOrTextContent_length !== undefined ? _getValueOrTextContent_length : /* istanbul ignore next */ 0;\n                setSelectionRange.setSelectionRange(target, newPos, newPos);\n            };\n        }\n    },\n    Home: (event, target)=>{\n        if (isElementType.isElementType(target, [\n            'input',\n            'textarea'\n        ]) || isContentEditable.isContentEditable(target)) {\n            return ()=>{\n                setSelectionRange.setSelectionRange(target, 0, 0);\n            };\n        }\n    },\n    PageDown: (event, target)=>{\n        if (isElementType.isElementType(target, [\n            'input'\n        ])) {\n            return ()=>{\n                const newPos = UI.getUIValue(target).length;\n                setSelectionRange.setSelectionRange(target, newPos, newPos);\n            };\n        }\n    },\n    PageUp: (event, target)=>{\n        if (isElementType.isElementType(target, [\n            'input'\n        ])) {\n            return ()=>{\n                setSelectionRange.setSelectionRange(target, 0, 0);\n            };\n        }\n    },\n    Tab: (event, target, instance)=>{\n        return ()=>{\n            const dest = getTabDestination.getTabDestination(target, instance.system.keyboard.modifiers.Shift);\n            focus.focusElement(dest);\n            if (selection.hasOwnSelection(dest)) {\n                UI.setUISelection(dest, {\n                    anchorOffset: 0,\n                    focusOffset: dest.value.length\n                });\n            }\n        };\n    }\n};\nconst combinationBehavior = (event, target, instance)=>{\n    if (event.code === 'KeyA' && instance.system.keyboard.modifiers.Control) {\n        return ()=>selectAll.selectAll(target);\n    }\n};\n"],"mappings":"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","ignoreList":[]}