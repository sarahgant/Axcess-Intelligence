c44e3e566288325ce15d05c7c1cf14ed
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.queryByText = exports.queryAllByText = exports.getByText = exports.getAllByText = exports.findByText = exports.findAllByText = void 0;
var _queryHelpers = require("../query-helpers");
var _helpers = require("../helpers");
var _allUtils = require("./all-utils");
const queryAllByText = (container, text, {
  selector = '*',
  exact = true,
  collapseWhitespace,
  trim,
  ignore = (0, _allUtils.getConfig)().defaultIgnore,
  normalizer
} = {}) => {
  (0, _helpers.checkContainerType)(container);
  const matcher = exact ? _allUtils.matches : _allUtils.fuzzyMatches;
  const matchNormalizer = (0, _allUtils.makeNormalizer)({
    collapseWhitespace,
    trim,
    normalizer
  });
  let baseArray = [];
  if (typeof container.matches === 'function' && container.matches(selector)) {
    baseArray = [container];
  }
  return [...baseArray, ...Array.from(container.querySelectorAll(selector))]
  // TODO: `matches` according lib.dom.d.ts can get only `string` but according our code it can handle also boolean :)
  .filter(node => !ignore || !node.matches(ignore)).filter(node => matcher((0, _allUtils.getNodeText)(node), node, text, matchNormalizer));
};
const getMultipleError = (c, text) => `Found multiple elements with the text: ${text}`;
const getMissingError = (c, text, options = {}) => {
  const {
    collapseWhitespace,
    trim,
    normalizer,
    selector
  } = options;
  const matchNormalizer = (0, _allUtils.makeNormalizer)({
    collapseWhitespace,
    trim,
    normalizer
  });
  const normalizedText = matchNormalizer(text.toString());
  const isNormalizedDifferent = normalizedText !== text.toString();
  const isCustomSelector = (selector ?? '*') !== '*';
  return `Unable to find an element with the text: ${isNormalizedDifferent ? `${normalizedText} (normalized from '${text}')` : text}${isCustomSelector ? `, which matches selector '${selector}'` : ''}. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.`;
};
const queryAllByTextWithSuggestions = exports.queryAllByText = (0, _queryHelpers.wrapAllByQueryWithSuggestion)(queryAllByText, queryAllByText.name, 'queryAll');
const [queryByText, getAllByText, getByText, findAllByText, findByText] = (0, _allUtils.buildQueries)(queryAllByText, getMultipleError, getMissingError);
exports.findByText = findByText;
exports.findAllByText = findAllByText;
exports.getByText = getByText;
exports.getAllByText = getAllByText;
exports.queryByText = queryByText;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInF1ZXJ5QnlUZXh0IiwicXVlcnlBbGxCeVRleHQiLCJnZXRCeVRleHQiLCJnZXRBbGxCeVRleHQiLCJmaW5kQnlUZXh0IiwiZmluZEFsbEJ5VGV4dCIsIl9xdWVyeUhlbHBlcnMiLCJyZXF1aXJlIiwiX2hlbHBlcnMiLCJfYWxsVXRpbHMiLCJjb250YWluZXIiLCJ0ZXh0Iiwic2VsZWN0b3IiLCJleGFjdCIsImNvbGxhcHNlV2hpdGVzcGFjZSIsInRyaW0iLCJpZ25vcmUiLCJnZXRDb25maWciLCJkZWZhdWx0SWdub3JlIiwibm9ybWFsaXplciIsImNoZWNrQ29udGFpbmVyVHlwZSIsIm1hdGNoZXIiLCJtYXRjaGVzIiwiZnV6enlNYXRjaGVzIiwibWF0Y2hOb3JtYWxpemVyIiwibWFrZU5vcm1hbGl6ZXIiLCJiYXNlQXJyYXkiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZmlsdGVyIiwibm9kZSIsImdldE5vZGVUZXh0IiwiZ2V0TXVsdGlwbGVFcnJvciIsImMiLCJnZXRNaXNzaW5nRXJyb3IiLCJvcHRpb25zIiwibm9ybWFsaXplZFRleHQiLCJ0b1N0cmluZyIsImlzTm9ybWFsaXplZERpZmZlcmVudCIsImlzQ3VzdG9tU2VsZWN0b3IiLCJxdWVyeUFsbEJ5VGV4dFdpdGhTdWdnZXN0aW9ucyIsIndyYXBBbGxCeVF1ZXJ5V2l0aFN1Z2dlc3Rpb24iLCJuYW1lIiwiYnVpbGRRdWVyaWVzIl0sInNvdXJjZXMiOlsidGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMucXVlcnlCeVRleHQgPSBleHBvcnRzLnF1ZXJ5QWxsQnlUZXh0ID0gZXhwb3J0cy5nZXRCeVRleHQgPSBleHBvcnRzLmdldEFsbEJ5VGV4dCA9IGV4cG9ydHMuZmluZEJ5VGV4dCA9IGV4cG9ydHMuZmluZEFsbEJ5VGV4dCA9IHZvaWQgMDtcbnZhciBfcXVlcnlIZWxwZXJzID0gcmVxdWlyZShcIi4uL3F1ZXJ5LWhlbHBlcnNcIik7XG52YXIgX2hlbHBlcnMgPSByZXF1aXJlKFwiLi4vaGVscGVyc1wiKTtcbnZhciBfYWxsVXRpbHMgPSByZXF1aXJlKFwiLi9hbGwtdXRpbHNcIik7XG5jb25zdCBxdWVyeUFsbEJ5VGV4dCA9IChjb250YWluZXIsIHRleHQsIHtcbiAgc2VsZWN0b3IgPSAnKicsXG4gIGV4YWN0ID0gdHJ1ZSxcbiAgY29sbGFwc2VXaGl0ZXNwYWNlLFxuICB0cmltLFxuICBpZ25vcmUgPSAoMCwgX2FsbFV0aWxzLmdldENvbmZpZykoKS5kZWZhdWx0SWdub3JlLFxuICBub3JtYWxpemVyXG59ID0ge30pID0+IHtcbiAgKDAsIF9oZWxwZXJzLmNoZWNrQ29udGFpbmVyVHlwZSkoY29udGFpbmVyKTtcbiAgY29uc3QgbWF0Y2hlciA9IGV4YWN0ID8gX2FsbFV0aWxzLm1hdGNoZXMgOiBfYWxsVXRpbHMuZnV6enlNYXRjaGVzO1xuICBjb25zdCBtYXRjaE5vcm1hbGl6ZXIgPSAoMCwgX2FsbFV0aWxzLm1ha2VOb3JtYWxpemVyKSh7XG4gICAgY29sbGFwc2VXaGl0ZXNwYWNlLFxuICAgIHRyaW0sXG4gICAgbm9ybWFsaXplclxuICB9KTtcbiAgbGV0IGJhc2VBcnJheSA9IFtdO1xuICBpZiAodHlwZW9mIGNvbnRhaW5lci5tYXRjaGVzID09PSAnZnVuY3Rpb24nICYmIGNvbnRhaW5lci5tYXRjaGVzKHNlbGVjdG9yKSkge1xuICAgIGJhc2VBcnJheSA9IFtjb250YWluZXJdO1xuICB9XG4gIHJldHVybiBbLi4uYmFzZUFycmF5LCAuLi5BcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSldXG4gIC8vIFRPRE86IGBtYXRjaGVzYCBhY2NvcmRpbmcgbGliLmRvbS5kLnRzIGNhbiBnZXQgb25seSBgc3RyaW5nYCBidXQgYWNjb3JkaW5nIG91ciBjb2RlIGl0IGNhbiBoYW5kbGUgYWxzbyBib29sZWFuIDopXG4gIC5maWx0ZXIobm9kZSA9PiAhaWdub3JlIHx8ICFub2RlLm1hdGNoZXMoaWdub3JlKSkuZmlsdGVyKG5vZGUgPT4gbWF0Y2hlcigoMCwgX2FsbFV0aWxzLmdldE5vZGVUZXh0KShub2RlKSwgbm9kZSwgdGV4dCwgbWF0Y2hOb3JtYWxpemVyKSk7XG59O1xuY29uc3QgZ2V0TXVsdGlwbGVFcnJvciA9IChjLCB0ZXh0KSA9PiBgRm91bmQgbXVsdGlwbGUgZWxlbWVudHMgd2l0aCB0aGUgdGV4dDogJHt0ZXh0fWA7XG5jb25zdCBnZXRNaXNzaW5nRXJyb3IgPSAoYywgdGV4dCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBjb2xsYXBzZVdoaXRlc3BhY2UsXG4gICAgdHJpbSxcbiAgICBub3JtYWxpemVyLFxuICAgIHNlbGVjdG9yXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBtYXRjaE5vcm1hbGl6ZXIgPSAoMCwgX2FsbFV0aWxzLm1ha2VOb3JtYWxpemVyKSh7XG4gICAgY29sbGFwc2VXaGl0ZXNwYWNlLFxuICAgIHRyaW0sXG4gICAgbm9ybWFsaXplclxuICB9KTtcbiAgY29uc3Qgbm9ybWFsaXplZFRleHQgPSBtYXRjaE5vcm1hbGl6ZXIodGV4dC50b1N0cmluZygpKTtcbiAgY29uc3QgaXNOb3JtYWxpemVkRGlmZmVyZW50ID0gbm9ybWFsaXplZFRleHQgIT09IHRleHQudG9TdHJpbmcoKTtcbiAgY29uc3QgaXNDdXN0b21TZWxlY3RvciA9IChzZWxlY3RvciA/PyAnKicpICE9PSAnKic7XG4gIHJldHVybiBgVW5hYmxlIHRvIGZpbmQgYW4gZWxlbWVudCB3aXRoIHRoZSB0ZXh0OiAke2lzTm9ybWFsaXplZERpZmZlcmVudCA/IGAke25vcm1hbGl6ZWRUZXh0fSAobm9ybWFsaXplZCBmcm9tICcke3RleHR9JylgIDogdGV4dH0ke2lzQ3VzdG9tU2VsZWN0b3IgPyBgLCB3aGljaCBtYXRjaGVzIHNlbGVjdG9yICcke3NlbGVjdG9yfSdgIDogJyd9LiBUaGlzIGNvdWxkIGJlIGJlY2F1c2UgdGhlIHRleHQgaXMgYnJva2VuIHVwIGJ5IG11bHRpcGxlIGVsZW1lbnRzLiBJbiB0aGlzIGNhc2UsIHlvdSBjYW4gcHJvdmlkZSBhIGZ1bmN0aW9uIGZvciB5b3VyIHRleHQgbWF0Y2hlciB0byBtYWtlIHlvdXIgbWF0Y2hlciBtb3JlIGZsZXhpYmxlLmA7XG59O1xuY29uc3QgcXVlcnlBbGxCeVRleHRXaXRoU3VnZ2VzdGlvbnMgPSBleHBvcnRzLnF1ZXJ5QWxsQnlUZXh0ID0gKDAsIF9xdWVyeUhlbHBlcnMud3JhcEFsbEJ5UXVlcnlXaXRoU3VnZ2VzdGlvbikocXVlcnlBbGxCeVRleHQsIHF1ZXJ5QWxsQnlUZXh0Lm5hbWUsICdxdWVyeUFsbCcpO1xuY29uc3QgW3F1ZXJ5QnlUZXh0LCBnZXRBbGxCeVRleHQsIGdldEJ5VGV4dCwgZmluZEFsbEJ5VGV4dCwgZmluZEJ5VGV4dF0gPSAoMCwgX2FsbFV0aWxzLmJ1aWxkUXVlcmllcykocXVlcnlBbGxCeVRleHQsIGdldE11bHRpcGxlRXJyb3IsIGdldE1pc3NpbmdFcnJvcik7XG5leHBvcnRzLmZpbmRCeVRleHQgPSBmaW5kQnlUZXh0O1xuZXhwb3J0cy5maW5kQWxsQnlUZXh0ID0gZmluZEFsbEJ5VGV4dDtcbmV4cG9ydHMuZ2V0QnlUZXh0ID0gZ2V0QnlUZXh0O1xuZXhwb3J0cy5nZXRBbGxCeVRleHQgPSBnZXRBbGxCeVRleHQ7XG5leHBvcnRzLnF1ZXJ5QnlUZXh0ID0gcXVlcnlCeVRleHQ7Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUMzQ0MsS0FBSyxFQUFFO0FBQ1QsQ0FBQyxDQUFDO0FBQ0ZELE9BQU8sQ0FBQ0UsV0FBVyxHQUFHRixPQUFPLENBQUNHLGNBQWMsR0FBR0gsT0FBTyxDQUFDSSxTQUFTLEdBQUdK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