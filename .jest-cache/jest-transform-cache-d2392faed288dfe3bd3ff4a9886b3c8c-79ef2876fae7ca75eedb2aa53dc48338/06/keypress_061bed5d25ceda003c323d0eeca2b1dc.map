{"version":3,"names":["isElementType","require","isContentEditable","isEditable","input","registry","behavior","keypress","event","target","instance","key","ClickInputOnEnter","includes","type","Boolean","href","dispatchUIEvent","form","submit","undefined","querySelector","SubmitSingleInputOnEnter","querySelectorAll","length","inputType","system","keyboard","modifiers","Shift","inputData"],"sources":["keypress.js"],"sourcesContent":["'use strict';\n\nvar isElementType = require('../../utils/misc/isElementType.js');\nrequire('../../utils/dataTransfer/Clipboard.js');\nvar isContentEditable = require('../../utils/edit/isContentEditable.js');\nvar isEditable = require('../../utils/edit/isEditable.js');\nvar input = require('../input.js');\nvar registry = require('./registry.js');\n\nregistry.behavior.keypress = (event, target, instance)=>{\n    if (event.key === 'Enter') {\n        if (isElementType.isElementType(target, 'button') || isElementType.isElementType(target, 'input') && ClickInputOnEnter.includes(target.type) || isElementType.isElementType(target, 'a') && Boolean(target.href)) {\n            return ()=>{\n                instance.dispatchUIEvent(target, 'click');\n            };\n        } else if (isElementType.isElementType(target, 'input')) {\n            const form = target.form;\n            const submit = form === null || form === undefined ? undefined : form.querySelector('input[type=\"submit\"], button:not([type]), button[type=\"submit\"]');\n            if (submit) {\n                return ()=>instance.dispatchUIEvent(submit, 'click');\n            } else if (form && SubmitSingleInputOnEnter.includes(target.type) && form.querySelectorAll('input').length === 1) {\n                return ()=>instance.dispatchUIEvent(form, 'submit');\n            } else {\n                return;\n            }\n        }\n    }\n    if (isEditable.isEditable(target)) {\n        const inputType = event.key === 'Enter' ? isContentEditable.isContentEditable(target) && !instance.system.keyboard.modifiers.Shift ? 'insertParagraph' : 'insertLineBreak' : 'insertText';\n        const inputData = event.key === 'Enter' ? '\\n' : event.key;\n        return ()=>input.input(instance, target, inputData, inputType);\n    }\n};\nconst ClickInputOnEnter = [\n    'button',\n    'color',\n    'file',\n    'image',\n    'reset',\n    'submit'\n];\nconst SubmitSingleInputOnEnter = [\n    'email',\n    'month',\n    'password',\n    'search',\n    'tel',\n    'text',\n    'url',\n    'week'\n];\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,aAAa,GAAGC,OAAO,CAAC,mCAAmC,CAAC;AAChEA,OAAO,CAAC,uCAAuC,CAAC;AAChD,IAAIC,iBAAiB,GAAGD,OAAO,CAAC,uCAAuC,CAAC;AACxE,IAAIE,UAAU,GAAGF,OAAO,CAAC,gCAAgC,CAAC;AAC1D,IAAIG,KAAK,GAAGH,OAAO,CAAC,aAAa,CAAC;AAClC,IAAII,QAAQ,GAAGJ,OAAO,CAAC,eAAe,CAAC;AAEvCI,QAAQ,CAACC,QAAQ,CAACC,QAAQ,GAAG,CAACC,KAAK,EAAEC,MAAM,EAAEC,QAAQ,KAAG;EACpD,IAAIF,KAAK,CAACG,GAAG,KAAK,OAAO,EAAE;IACvB,IAAIX,aAAa,CAACA,aAAa,CAACS,MAAM,EAAE,QAAQ,CAAC,IAAIT,aAAa,CAACA,aAAa,CAACS,MAAM,EAAE,OAAO,CAAC,IAAIG,iBAAiB,CAACC,QAAQ,CAACJ,MAAM,CAACK,IAAI,CAAC,IAAId,aAAa,CAACA,aAAa,CAACS,MAAM,EAAE,GAAG,CAAC,IAAIM,OAAO,CAACN,MAAM,CAACO,IAAI,CAAC,EAAE;MAC9M,OAAO,MAAI;QACPN,QAAQ,CAACO,eAAe,CAACR,MAAM,EAAE,OAAO,CAAC;MAC7C,CAAC;IACL,CAAC,MAAM,IAAIT,aAAa,CAACA,aAAa,CAACS,MAAM,EAAE,OAAO,CAAC,EAAE;MACrD,MAAMS,IAAI,GAAGT,MAAM,CAACS,IAAI;MACxB,MAAMC,MAAM,GAAGD,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAKE,SAAS,GAAGA,SAAS,GAAGF,IAAI,CAACG,aAAa,CAAC,iEAAiE,CAAC;MACtJ,IAAIF,MAAM,EAAE;QACR,OAAO,MAAIT,QAAQ,CAACO,eAAe,CAACE,MAAM,EAAE,OAAO,CAAC;MACxD,CAAC,MAAM,IAAID,IAAI,IAAII,wBAAwB,CAACT,QAAQ,CAACJ,MAAM,CAACK,IAAI,CAAC,IAAII,IAAI,CAACK,gBAAgB,CAAC,OAAO,CAAC,CAACC,MAAM,KAAK,CAAC,EAAE;QAC9G,OAAO,MAAId,QAAQ,CAACO,eAAe,CAACC,IAAI,EAAE,QAAQ,CAAC;MACvD,CAAC,MAAM;QACH;MACJ;IACJ;EACJ;EACA,IAAIf,UAAU,CAACA,UAAU,CAACM,MAAM,CAAC,EAAE;IAC/B,MAAMgB,SAAS,GAAGjB,KAAK,CAACG,GAAG,KAAK,OAAO,GAAGT,iBAAiB,CAACA,iBAAiB,CAACO,MAAM,CAAC,IAAI,CAACC,QAAQ,CAACgB,MAAM,CAACC,QAAQ,CAACC,SAAS,CAACC,KAAK,GAAG,iBAAiB,GAAG,iBAAiB,GAAG,YAAY;IACzL,MAAMC,SAAS,GAAGtB,KAAK,CAACG,GAAG,KAAK,OAAO,GAAG,IAAI,GAAGH,KAAK,CAACG,GAAG;IAC1D,OAAO,MAAIP,KAAK,CAACA,KAAK,CAACM,QAAQ,EAAED,MAAM,EAAEqB,SAAS,EAAEL,SAAS,CAAC;EAClE;AACJ,CAAC;AACD,MAAMb,iBAAiB,GAAG,CACtB,QAAQ,EACR,OAAO,EACP,MAAM,EACN,OAAO,EACP,OAAO,EACP,QAAQ,CACX;AACD,MAAMU,wBAAwB,GAAG,CAC7B,OAAO,EACP,OAAO,EACP,UAAU,EACV,QAAQ,EACR,KAAK,EACL,MAAM,EACN,KAAK,EACL,MAAM,CACT","ignoreList":[]}