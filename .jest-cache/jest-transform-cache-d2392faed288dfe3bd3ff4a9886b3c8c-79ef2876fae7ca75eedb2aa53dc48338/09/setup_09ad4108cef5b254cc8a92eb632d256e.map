{"version":3,"names":["patchFocus","require","prepareDocument","dispatchEvent","Clipboard","getWindow","getDocumentFromNode","level","wait","options","keyMap","keyMap$1","index","api","wrapAsync","defaultOptionsDirect","applyAccept","autoModify","delay","document","globalThis","keyboardMap","defaultKeyMap","pointerMap","pointerEventsCheck","PointerEventsCheckLevel","EachApiCall","skipAutoClose","skipClick","skipHover","writeToClipboard","advanceTimers","Promise","resolve","defaultOptionsSetup","createConfig","defaults","node","getDocument","setupMain","config","HTMLElement","_config_document_defaultView","view","defaultView","undefined","window","attachClipboardStubToView","createInstance","setupDirect","keyboardState","pointerState","_ref","system","System","setupSub","wrapAndBindImpl","instance","impl","method","args","setLevelRef","ApiLevel","Call","apply","then","ret","Object","defineProperty","get","name","assign","bind","dispatchUIEvent","levelRefs","userEventApi","fromEntries","entries","map","setup","_options_document","exports"],"sources":["setup.js"],"sourcesContent":["'use strict';\n\nvar patchFocus = require('../document/patchFocus.js');\nvar prepareDocument = require('../document/prepareDocument.js');\nvar dispatchEvent = require('../event/dispatchEvent.js');\nvar Clipboard = require('../utils/dataTransfer/Clipboard.js');\nvar getWindow = require('../utils/misc/getWindow.js');\nvar getDocumentFromNode = require('../utils/misc/getDocumentFromNode.js');\nvar level = require('../utils/misc/level.js');\nvar wait = require('../utils/misc/wait.js');\nvar options = require('../options.js');\nrequire('@testing-library/dom');\nvar keyMap = require('../keyboard/keyMap.js');\nvar keyMap$1 = require('../pointer/keyMap.js');\nvar index = require('../system/index.js');\nvar api = require('./api.js');\nvar wrapAsync = require('./wrapAsync.js');\n\n/**\n * Default options applied when API is called per `userEvent.anyApi()`\n */ const defaultOptionsDirect = {\n    applyAccept: true,\n    autoModify: true,\n    delay: 0,\n    document: globalThis.document,\n    keyboardMap: keyMap.defaultKeyMap,\n    pointerMap: keyMap$1.defaultKeyMap,\n    pointerEventsCheck: options.PointerEventsCheckLevel.EachApiCall,\n    skipAutoClose: false,\n    skipClick: false,\n    skipHover: false,\n    writeToClipboard: false,\n    advanceTimers: ()=>Promise.resolve()\n};\n/**\n * Default options applied when API is called per `userEvent().anyApi()`\n */ const defaultOptionsSetup = {\n    ...defaultOptionsDirect,\n    writeToClipboard: true\n};\nfunction createConfig(options = {}, defaults = defaultOptionsSetup, node) {\n    const document = getDocument(options, node, defaults);\n    return {\n        ...defaults,\n        ...options,\n        document\n    };\n}\n/**\n * Start a \"session\" with userEvent.\n * All APIs returned by this function share an input device state and a default configuration.\n */ function setupMain(options = {}) {\n    const config = createConfig(options);\n    prepareDocument.prepareDocument(config.document);\n    patchFocus.patchFocus(getWindow.getWindow(config.document).HTMLElement);\n    var _config_document_defaultView;\n    const view = (_config_document_defaultView = config.document.defaultView) !== null && _config_document_defaultView !== undefined ? _config_document_defaultView : /* istanbul ignore next */ globalThis.window;\n    Clipboard.attachClipboardStubToView(view);\n    return createInstance(config).api;\n}\n/**\n * Setup in direct call per `userEvent.anyApi()`\n */ function setupDirect({ keyboardState, pointerState, ...options } = {}, node) {\n    const config = createConfig(options, defaultOptionsDirect, node);\n    prepareDocument.prepareDocument(config.document);\n    patchFocus.patchFocus(getWindow.getWindow(config.document).HTMLElement);\n    var _ref;\n    const system = (_ref = pointerState !== null && pointerState !== undefined ? pointerState : keyboardState) !== null && _ref !== undefined ? _ref : new index.System();\n    return {\n        api: createInstance(config, system).api,\n        system\n    };\n}\n/**\n * Create a set of callbacks with different default settings but the same state.\n */ function setupSub(options) {\n    return createInstance({\n        ...this.config,\n        ...options\n    }, this.system).api;\n}\nfunction wrapAndBindImpl(instance, impl) {\n    function method(...args) {\n        level.setLevelRef(instance, level.ApiLevel.Call);\n        return wrapAsync.wrapAsync(()=>impl.apply(instance, args).then(async (ret)=>{\n                await wait.wait(instance.config);\n                return ret;\n            }));\n    }\n    Object.defineProperty(method, 'name', {\n        get: ()=>impl.name\n    });\n    return method;\n}\nfunction createInstance(config, system = new index.System()) {\n    const instance = {};\n    Object.assign(instance, {\n        config,\n        dispatchEvent: dispatchEvent.dispatchEvent.bind(instance),\n        dispatchUIEvent: dispatchEvent.dispatchUIEvent.bind(instance),\n        system,\n        levelRefs: {},\n        ...api.userEventApi\n    });\n    return {\n        instance,\n        api: {\n            ...Object.fromEntries(Object.entries(api.userEventApi).map(([name, api])=>[\n                    name,\n                    wrapAndBindImpl(instance, api)\n                ])),\n            setup: setupSub.bind(instance)\n        }\n    };\n}\nfunction getDocument(options, node, defaults) {\n    var _options_document, _ref;\n    return (_ref = (_options_document = options.document) !== null && _options_document !== undefined ? _options_document : node && getDocumentFromNode.getDocumentFromNode(node)) !== null && _ref !== undefined ? _ref : defaults.document;\n}\n\nexports.createConfig = createConfig;\nexports.createInstance = createInstance;\nexports.setupDirect = setupDirect;\nexports.setupMain = setupMain;\nexports.setupSub = setupSub;\n"],"mappings":"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","ignoreList":[]}