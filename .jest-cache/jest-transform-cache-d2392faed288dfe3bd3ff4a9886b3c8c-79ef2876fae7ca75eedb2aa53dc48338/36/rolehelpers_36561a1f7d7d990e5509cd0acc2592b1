325cadeee2ae3eed9df4393261bb10e7
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.computeAriaBusy = computeAriaBusy;
exports.computeAriaChecked = computeAriaChecked;
exports.computeAriaCurrent = computeAriaCurrent;
exports.computeAriaExpanded = computeAriaExpanded;
exports.computeAriaPressed = computeAriaPressed;
exports.computeAriaSelected = computeAriaSelected;
exports.computeAriaValueMax = computeAriaValueMax;
exports.computeAriaValueMin = computeAriaValueMin;
exports.computeAriaValueNow = computeAriaValueNow;
exports.computeAriaValueText = computeAriaValueText;
exports.computeHeadingLevel = computeHeadingLevel;
exports.getImplicitAriaRoles = getImplicitAriaRoles;
exports.getRoles = getRoles;
exports.isInaccessible = isInaccessible;
exports.isSubtreeInaccessible = isSubtreeInaccessible;
exports.logRoles = void 0;
exports.prettyRoles = prettyRoles;
var _ariaQuery = require("aria-query");
var _domAccessibilityApi = require("dom-accessibility-api");
var _prettyDom = require("./pretty-dom");
var _config = require("./config");
const elementRoleList = buildElementRoleList(_ariaQuery.elementRoles);

/**
 * @param {Element} element -
 * @returns {boolean} - `true` if `element` and its subtree are inaccessible
 */
function isSubtreeInaccessible(element) {
  if (element.hidden === true) {
    return true;
  }
  if (element.getAttribute('aria-hidden') === 'true') {
    return true;
  }
  const window = element.ownerDocument.defaultView;
  if (window.getComputedStyle(element).display === 'none') {
    return true;
  }
  return false;
}

/**
 * Partial implementation https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion
 * which should only be used for elements with a non-presentational role i.e.
 * `role="none"` and `role="presentation"` will not be excluded.
 *
 * Implements aria-hidden semantics (i.e. parent overrides child)
 * Ignores "Child Presentational: True" characteristics
 *
 * @param {Element} element -
 * @param {object} [options] -
 * @param {function (element: Element): boolean} options.isSubtreeInaccessible -
 * can be used to return cached results from previous isSubtreeInaccessible calls
 * @returns {boolean} true if excluded, otherwise false
 */
function isInaccessible(element, options = {}) {
  const {
    isSubtreeInaccessible: isSubtreeInaccessibleImpl = isSubtreeInaccessible
  } = options;
  const window = element.ownerDocument.defaultView;
  // since visibility is inherited we can exit early
  if (window.getComputedStyle(element).visibility === 'hidden') {
    return true;
  }
  let currentElement = element;
  while (currentElement) {
    if (isSubtreeInaccessibleImpl(currentElement)) {
      return true;
    }
    currentElement = currentElement.parentElement;
  }
  return false;
}
function getImplicitAriaRoles(currentNode) {
  // eslint bug here:
  // eslint-disable-next-line no-unused-vars
  for (const {
    match,
    roles
  } of elementRoleList) {
    if (match(currentNode)) {
      return [...roles];
    }
  }
  return [];
}
function buildElementRoleList(elementRolesMap) {
  function makeElementSelector({
    name,
    attributes
  }) {
    return `${name}${attributes.map(({
      name: attributeName,
      value,
      constraints = []
    }) => {
      const shouldNotExist = constraints.indexOf('undefined') !== -1;
      const shouldBeNonEmpty = constraints.indexOf('set') !== -1;
      const hasExplicitValue = typeof value !== 'undefined';
      if (hasExplicitValue) {
        return `[${attributeName}="${value}"]`;
      } else if (shouldNotExist) {
        return `:not([${attributeName}])`;
      } else if (shouldBeNonEmpty) {
        return `[${attributeName}]:not([${attributeName}=""])`;
      }
      return `[${attributeName}]`;
    }).join('')}`;
  }
  function getSelectorSpecificity({
    attributes = []
  }) {
    return attributes.length;
  }
  function bySelectorSpecificity({
    specificity: leftSpecificity
  }, {
    specificity: rightSpecificity
  }) {
    return rightSpecificity - leftSpecificity;
  }
  function match(element) {
    let {
      attributes = []
    } = element;

    // https://github.com/testing-library/dom-testing-library/issues/814
    const typeTextIndex = attributes.findIndex(attribute => attribute.value && attribute.name === 'type' && attribute.value === 'text');
    if (typeTextIndex >= 0) {
      // not using splice to not mutate the attributes array
      attributes = [...attributes.slice(0, typeTextIndex), ...attributes.slice(typeTextIndex + 1)];
    }
    const selector = makeElementSelector({
      ...element,
      attributes
    });
    return node => {
      if (typeTextIndex >= 0 && node.type !== 'text') {
        return false;
      }
      return node.matches(selector);
    };
  }
  let result = [];

  // eslint bug here:
  // eslint-disable-next-line no-unused-vars
  for (const [element, roles] of elementRolesMap.entries()) {
    result = [...result, {
      match: match(element),
      roles: Array.from(roles),
      specificity: getSelectorSpecificity(element)
    }];
  }
  return result.sort(bySelectorSpecificity);
}
function getRoles(container, {
  hidden = false
} = {}) {
  function flattenDOM(node) {
    return [node, ...Array.from(node.children).reduce((acc, child) => [...acc, ...flattenDOM(child)], [])];
  }
  return flattenDOM(container).filter(element => {
    return hidden === false ? isInaccessible(element) === false : true;
  }).reduce((acc, node) => {
    let roles = [];
    // TODO: This violates html-aria which does not allow any role on every element
    if (node.hasAttribute('role')) {
      roles = node.getAttribute('role').split(' ').slice(0, 1);
    } else {
      roles = getImplicitAriaRoles(node);
    }
    return roles.reduce((rolesAcc, role) => Array.isArray(rolesAcc[role]) ? {
      ...rolesAcc,
      [role]: [...rolesAcc[role], node]
    } : {
      ...rolesAcc,
      [role]: [node]
    }, acc);
  }, {});
}
function prettyRoles(dom, {
  hidden,
  includeDescription
}) {
  const roles = getRoles(dom, {
    hidden
  });
  // We prefer to skip generic role, we don't recommend it
  return Object.entries(roles).filter(([role]) => role !== 'generic').map(([role, elements]) => {
    const delimiterBar = '-'.repeat(50);
    const elementsString = elements.map(el => {
      const nameString = `Name "${(0, _domAccessibilityApi.computeAccessibleName)(el, {
        computedStyleSupportsPseudoElements: (0, _config.getConfig)().computedStyleSupportsPseudoElements
      })}":\n`;
      const domString = (0, _prettyDom.prettyDOM)(el.cloneNode(false));
      if (includeDescription) {
        const descriptionString = `Description "${(0, _domAccessibilityApi.computeAccessibleDescription)(el, {
          computedStyleSupportsPseudoElements: (0, _config.getConfig)().computedStyleSupportsPseudoElements
        })}":\n`;
        return `${nameString}${descriptionString}${domString}`;
      }
      return `${nameString}${domString}`;
    }).join('\n\n');
    return `${role}:\n\n${elementsString}\n\n${delimiterBar}`;
  }).join('\n');
}
const logRoles = (dom, {
  hidden = false
} = {}) => console.log(prettyRoles(dom, {
  hidden
}));

/**
 * @param {Element} element -
 * @returns {boolean | undefined} - false/true if (not)selected, undefined if not selectable
 */
exports.logRoles = logRoles;
function computeAriaSelected(element) {
  // implicit value from html-aam mappings: https://www.w3.org/TR/html-aam-1.0/#html-attribute-state-and-property-mappings
  // https://www.w3.org/TR/html-aam-1.0/#details-id-97
  if (element.tagName === 'OPTION') {
    return element.selected;
  }

  // explicit value
  return checkBooleanAttribute(element, 'aria-selected');
}

/**
 * @param {Element} element -
 * @returns {boolean} -
 */
function computeAriaBusy(element) {
  // https://www.w3.org/TR/wai-aria-1.1/#aria-busy
  return element.getAttribute('aria-busy') === 'true';
}

/**
 * @param {Element} element -
 * @returns {boolean | undefined} - false/true if (not)checked, undefined if not checked-able
 */
function computeAriaChecked(element) {
  // implicit value from html-aam mappings: https://www.w3.org/TR/html-aam-1.0/#html-attribute-state-and-property-mappings
  // https://www.w3.org/TR/html-aam-1.0/#details-id-56
  // https://www.w3.org/TR/html-aam-1.0/#details-id-67
  if ('indeterminate' in element && element.indeterminate) {
    return undefined;
  }
  if ('checked' in element) {
    return element.checked;
  }

  // explicit value
  return checkBooleanAttribute(element, 'aria-checked');
}

/**
 * @param {Element} element -
 * @returns {boolean | undefined} - false/true if (not)pressed, undefined if not press-able
 */
function computeAriaPressed(element) {
  // https://www.w3.org/TR/wai-aria-1.1/#aria-pressed
  return checkBooleanAttribute(element, 'aria-pressed');
}

/**
 * @param {Element} element -
 * @returns {boolean | string | null} -
 */
function computeAriaCurrent(element) {
  // https://www.w3.org/TR/wai-aria-1.1/#aria-current
  return checkBooleanAttribute(element, 'aria-current') ?? element.getAttribute('aria-current') ?? false;
}

/**
 * @param {Element} element -
 * @returns {boolean | undefined} - false/true if (not)expanded, undefined if not expand-able
 */
function computeAriaExpanded(element) {
  // https://www.w3.org/TR/wai-aria-1.1/#aria-expanded
  return checkBooleanAttribute(element, 'aria-expanded');
}
function checkBooleanAttribute(element, attribute) {
  const attributeValue = element.getAttribute(attribute);
  if (attributeValue === 'true') {
    return true;
  }
  if (attributeValue === 'false') {
    return false;
  }
  return undefined;
}

/**
 * @param {Element} element -
 * @returns {number | undefined} - number if implicit heading or aria-level present, otherwise undefined
 */
function computeHeadingLevel(element) {
  // https://w3c.github.io/html-aam/#el-h1-h6
  // https://w3c.github.io/html-aam/#el-h1-h6
  const implicitHeadingLevels = {
    H1: 1,
    H2: 2,
    H3: 3,
    H4: 4,
    H5: 5,
    H6: 6
  };
  // explicit aria-level value
  // https://www.w3.org/TR/wai-aria-1.2/#aria-level
  const ariaLevelAttribute = element.getAttribute('aria-level') && Number(element.getAttribute('aria-level'));
  return ariaLevelAttribute || implicitHeadingLevels[element.tagName];
}

/**
 * @param {Element} element -
 * @returns {number | undefined} -
 */
function computeAriaValueNow(element) {
  const valueNow = element.getAttribute('aria-valuenow');
  return valueNow === null ? undefined : +valueNow;
}

/**
 * @param {Element} element -
 * @returns {number | undefined} -
 */
function computeAriaValueMax(element) {
  const valueMax = element.getAttribute('aria-valuemax');
  return valueMax === null ? undefined : +valueMax;
}

/**
 * @param {Element} element -
 * @returns {number | undefined} -
 */
function computeAriaValueMin(element) {
  const valueMin = element.getAttribute('aria-valuemin');
  return valueMin === null ? undefined : +valueMin;
}

/**
 * @param {Element} element -
 * @returns {string | undefined} -
 */
function computeAriaValueText(element) {
  const valueText = element.getAttribute('aria-valuetext');
  return valueText === null ? undefined : valueText;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNvbXB1dGVBcmlhQnVzeSIsImNvbXB1dGVBcmlhQ2hlY2tlZCIsImNvbXB1dGVBcmlhQ3VycmVudCIsImNvbXB1dGVBcmlhRXhwYW5kZWQiLCJjb21wdXRlQXJpYVByZXNzZWQiLCJjb21wdXRlQXJpYVNlbGVjdGVkIiwiY29tcHV0ZUFyaWFWYWx1ZU1heCIsImNvbXB1dGVBcmlhVmFsdWVNaW4iLCJjb21wdXRlQXJpYVZhbHVlTm93IiwiY29tcHV0ZUFyaWFWYWx1ZVRleHQiLCJjb21wdXRlSGVhZGluZ0xldmVsIiwiZ2V0SW1wbGljaXRBcmlhUm9sZXMiLCJnZXRSb2xlcyIsImlzSW5hY2Nlc3NpYmxlIiwiaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlIiwibG9nUm9sZXMiLCJwcmV0dHlSb2xlcyIsIl9hcmlhUXVlcnkiLCJyZXF1aXJlIiwiX2RvbUFjY2Vzc2liaWxpdHlBcGkiLCJfcHJldHR5RG9tIiwiX2NvbmZpZyIsImVsZW1lbnRSb2xlTGlzdCIsImJ1aWxkRWxlbWVudFJvbGVMaXN0IiwiZWxlbWVudFJvbGVzIiwiZWxlbWVudCIsImhpZGRlbiIsImdldEF0dHJpYnV0ZSIsIndpbmRvdyIsIm93bmVyRG9jdW1lbnQiLCJkZWZhdWx0VmlldyIsImdldENvbXB1dGVkU3R5bGUiLCJkaXNwbGF5Iiwib3B0aW9ucyIsImlzU3VidHJlZUluYWNjZXNzaWJsZUltcGwiLCJ2aXNpYmlsaXR5IiwiY3VycmVudEVsZW1lbnQiLCJwYXJlbnRFbGVtZW50IiwiY3VycmVudE5vZGUiLCJtYXRjaCIsInJvbGVzIiwiZWxlbWVudFJvbGVzTWFwIiwibWFrZUVsZW1lbnRTZWxlY3RvciIsIm5hbWUiLCJhdHRyaWJ1dGVzIiwibWFwIiwiYXR0cmlidXRlTmFtZSIsImNvbnN0cmFpbnRzIiwic2hvdWxkTm90RXhpc3QiLCJpbmRleE9mIiwic2hvdWxkQmVOb25FbXB0eSIsImhhc0V4cGxpY2l0VmFsdWUiLCJqb2luIiwiZ2V0U2VsZWN0b3JTcGVjaWZpY2l0eSIsImxlbmd0aCIsImJ5U2VsZWN0b3JTcGVjaWZpY2l0eSIsInNwZWNpZmljaXR5IiwibGVmdFNwZWNpZmljaXR5IiwicmlnaHRTcGVjaWZpY2l0eSIsInR5cGVUZXh0SW5kZXgiLCJmaW5kSW5kZXgiLCJhdHRyaWJ1dGUiLCJzbGljZSIsInNlbGVjdG9yIiwibm9kZSIsInR5cGUiLCJtYXRjaGVzIiwicmVzdWx0IiwiZW50cmllcyIsIkFycmF5IiwiZnJvbSIsInNvcnQiLCJjb250YWluZXIiLCJmbGF0dGVuRE9NIiwiY2hpbGRyZW4iLCJyZWR1Y2UiLCJhY2MiLCJjaGlsZCIsImZpbHRlciIsImhhc0F0dHJpYnV0ZSIsInNwbGl0Iiwicm9sZXNBY2MiLCJyb2xlIiwiaXNBcnJheSIsImRvbSIsImluY2x1ZGVEZXNjcmlwdGlvbiIsImVsZW1lbnRzIiwiZGVsaW1pdGVyQmFyIiwicmVwZWF0IiwiZWxlbWVudHNTdHJpbmciLCJlbCIsIm5hbWVTdHJpbmciLCJjb21wdXRlQWNjZXNzaWJsZU5hbWUiLCJjb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50cyIsImdldENvbmZpZyIsImRvbVN0cmluZyIsInByZXR0eURPTSIsImNsb25lTm9kZSIsImRlc2NyaXB0aW9uU3RyaW5nIiwiY29tcHV0ZUFjY2Vzc2libGVEZXNjcmlwdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJ0YWdOYW1lIiwic2VsZWN0ZWQiLCJjaGVja0Jvb2xlYW5BdHRyaWJ1dGUiLCJpbmRldGVybWluYXRlIiwidW5kZWZpbmVkIiwiY2hlY2tlZCIsImF0dHJpYnV0ZVZhbHVlIiwiaW1wbGljaXRIZWFkaW5nTGV2ZWxzIiwiSDEiLCJIMiIsIkgzIiwiSDQiLCJINSIsIkg2IiwiYXJpYUxldmVsQXR0cmlidXRlIiwiTnVtYmVyIiwidmFsdWVOb3ciLCJ2YWx1ZU1heCIsInZhbHVlTWluIiwidmFsdWVUZXh0Il0sInNvdXJjZXMiOlsicm9sZS1oZWxwZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jb21wdXRlQXJpYUJ1c3kgPSBjb21wdXRlQXJpYUJ1c3k7XG5leHBvcnRzLmNvbXB1dGVBcmlhQ2hlY2tlZCA9IGNvbXB1dGVBcmlhQ2hlY2tlZDtcbmV4cG9ydHMuY29tcHV0ZUFyaWFDdXJyZW50ID0gY29tcHV0ZUFyaWFDdXJyZW50O1xuZXhwb3J0cy5jb21wdXRlQXJpYUV4cGFuZGVkID0gY29tcHV0ZUFyaWFFeHBhbmRlZDtcbmV4cG9ydHMuY29tcHV0ZUFyaWFQcmVzc2VkID0gY29tcHV0ZUFyaWFQcmVzc2VkO1xuZXhwb3J0cy5jb21wdXRlQXJpYVNlbGVjdGVkID0gY29tcHV0ZUFyaWFTZWxlY3RlZDtcbmV4cG9ydHMuY29tcHV0ZUFyaWFWYWx1ZU1heCA9IGNvbXB1dGVBcmlhVmFsdWVNYXg7XG5leHBvcnRzLmNvbXB1dGVBcmlhVmFsdWVNaW4gPSBjb21wdXRlQXJpYVZhbHVlTWluO1xuZXhwb3J0cy5jb21wdXRlQXJpYVZhbHVlTm93ID0gY29tcHV0ZUFyaWFWYWx1ZU5vdztcbmV4cG9ydHMuY29tcHV0ZUFyaWFWYWx1ZVRleHQgPSBjb21wdXRlQXJpYVZhbHVlVGV4dDtcbmV4cG9ydHMuY29tcHV0ZUhlYWRpbmdMZXZlbCA9IGNvbXB1dGVIZWFkaW5nTGV2ZWw7XG5leHBvcnRzLmdldEltcGxpY2l0QXJpYVJvbGVzID0gZ2V0SW1wbGljaXRBcmlhUm9sZXM7XG5leHBvcnRzLmdldFJvbGVzID0gZ2V0Um9sZXM7XG5leHBvcnRzLmlzSW5hY2Nlc3NpYmxlID0gaXNJbmFjY2Vzc2libGU7XG5leHBvcnRzLmlzU3VidHJlZUluYWNjZXNzaWJsZSA9IGlzU3VidHJlZUluYWNjZXNzaWJsZTtcbmV4cG9ydHMubG9nUm9sZXMgPSB2b2lkIDA7XG5leHBvcnRzLnByZXR0eVJvbGVzID0gcHJldHR5Um9sZXM7XG52YXIgX2FyaWFRdWVyeSA9IHJlcXVpcmUoXCJhcmlhLXF1ZXJ5XCIpO1xudmFyIF9kb21BY2Nlc3NpYmlsaXR5QXBpID0gcmVxdWlyZShcImRvbS1hY2Nlc3NpYmlsaXR5LWFwaVwiKTtcbnZhciBfcHJldHR5RG9tID0gcmVxdWlyZShcIi4vcHJldHR5LWRvbVwiKTtcbnZhciBfY29uZmlnID0gcmVxdWlyZShcIi4vY29uZmlnXCIpO1xuY29uc3QgZWxlbWVudFJvbGVMaXN0ID0gYnVpbGRFbGVtZW50Um9sZUxpc3QoX2FyaWFRdWVyeS5lbGVtZW50Um9sZXMpO1xuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBgdHJ1ZWAgaWYgYGVsZW1lbnRgIGFuZCBpdHMgc3VidHJlZSBhcmUgaW5hY2Nlc3NpYmxlXG4gKi9cbmZ1bmN0aW9uIGlzU3VidHJlZUluYWNjZXNzaWJsZShlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50LmhpZGRlbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSA9PT0gJ3RydWUnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3Qgd2luZG93ID0gZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFBhcnRpYWwgaW1wbGVtZW50YXRpb24gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMi8jdHJlZV9leGNsdXNpb25cbiAqIHdoaWNoIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIGVsZW1lbnRzIHdpdGggYSBub24tcHJlc2VudGF0aW9uYWwgcm9sZSBpLmUuXG4gKiBgcm9sZT1cIm5vbmVcImAgYW5kIGByb2xlPVwicHJlc2VudGF0aW9uXCJgIHdpbGwgbm90IGJlIGV4Y2x1ZGVkLlxuICpcbiAqIEltcGxlbWVudHMgYXJpYS1oaWRkZW4gc2VtYW50aWNzIChpLmUuIHBhcmVudCBvdmVycmlkZXMgY2hpbGQpXG4gKiBJZ25vcmVzIFwiQ2hpbGQgUHJlc2VudGF0aW9uYWw6IFRydWVcIiBjaGFyYWN0ZXJpc3RpY3NcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtXG4gKiBAcGFyYW0ge2Z1bmN0aW9uIChlbGVtZW50OiBFbGVtZW50KTogYm9vbGVhbn0gb3B0aW9ucy5pc1N1YnRyZWVJbmFjY2Vzc2libGUgLVxuICogY2FuIGJlIHVzZWQgdG8gcmV0dXJuIGNhY2hlZCByZXN1bHRzIGZyb20gcHJldmlvdXMgaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlIGNhbGxzXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBleGNsdWRlZCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzSW5hY2Nlc3NpYmxlKGVsZW1lbnQsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7XG4gICAgaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlOiBpc1N1YnRyZWVJbmFjY2Vzc2libGVJbXBsID0gaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB3aW5kb3cgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gIC8vIHNpbmNlIHZpc2liaWxpdHkgaXMgaW5oZXJpdGVkIHdlIGNhbiBleGl0IGVhcmx5XG4gIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS52aXNpYmlsaXR5ID09PSAnaGlkZGVuJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGxldCBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gIHdoaWxlIChjdXJyZW50RWxlbWVudCkge1xuICAgIGlmIChpc1N1YnRyZWVJbmFjY2Vzc2libGVJbXBsKGN1cnJlbnRFbGVtZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRJbXBsaWNpdEFyaWFSb2xlcyhjdXJyZW50Tm9kZSkge1xuICAvLyBlc2xpbnQgYnVnIGhlcmU6XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBmb3IgKGNvbnN0IHtcbiAgICBtYXRjaCxcbiAgICByb2xlc1xuICB9IG9mIGVsZW1lbnRSb2xlTGlzdCkge1xuICAgIGlmIChtYXRjaChjdXJyZW50Tm9kZSkpIHtcbiAgICAgIHJldHVybiBbLi4ucm9sZXNdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW107XG59XG5mdW5jdGlvbiBidWlsZEVsZW1lbnRSb2xlTGlzdChlbGVtZW50Um9sZXNNYXApIHtcbiAgZnVuY3Rpb24gbWFrZUVsZW1lbnRTZWxlY3Rvcih7XG4gICAgbmFtZSxcbiAgICBhdHRyaWJ1dGVzXG4gIH0pIHtcbiAgICByZXR1cm4gYCR7bmFtZX0ke2F0dHJpYnV0ZXMubWFwKCh7XG4gICAgICBuYW1lOiBhdHRyaWJ1dGVOYW1lLFxuICAgICAgdmFsdWUsXG4gICAgICBjb25zdHJhaW50cyA9IFtdXG4gICAgfSkgPT4ge1xuICAgICAgY29uc3Qgc2hvdWxkTm90RXhpc3QgPSBjb25zdHJhaW50cy5pbmRleE9mKCd1bmRlZmluZWQnKSAhPT0gLTE7XG4gICAgICBjb25zdCBzaG91bGRCZU5vbkVtcHR5ID0gY29uc3RyYWludHMuaW5kZXhPZignc2V0JykgIT09IC0xO1xuICAgICAgY29uc3QgaGFzRXhwbGljaXRWYWx1ZSA9IHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICBpZiAoaGFzRXhwbGljaXRWYWx1ZSkge1xuICAgICAgICByZXR1cm4gYFske2F0dHJpYnV0ZU5hbWV9PVwiJHt2YWx1ZX1cIl1gO1xuICAgICAgfSBlbHNlIGlmIChzaG91bGROb3RFeGlzdCkge1xuICAgICAgICByZXR1cm4gYDpub3QoWyR7YXR0cmlidXRlTmFtZX1dKWA7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZEJlTm9uRW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIGBbJHthdHRyaWJ1dGVOYW1lfV06bm90KFske2F0dHJpYnV0ZU5hbWV9PVwiXCJdKWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYFske2F0dHJpYnV0ZU5hbWV9XWA7XG4gICAgfSkuam9pbignJyl9YDtcbiAgfVxuICBmdW5jdGlvbiBnZXRTZWxlY3RvclNwZWNpZmljaXR5KHtcbiAgICBhdHRyaWJ1dGVzID0gW11cbiAgfSkge1xuICAgIHJldHVybiBhdHRyaWJ1dGVzLmxlbmd0aDtcbiAgfVxuICBmdW5jdGlvbiBieVNlbGVjdG9yU3BlY2lmaWNpdHkoe1xuICAgIHNwZWNpZmljaXR5OiBsZWZ0U3BlY2lmaWNpdHlcbiAgfSwge1xuICAgIHNwZWNpZmljaXR5OiByaWdodFNwZWNpZmljaXR5XG4gIH0pIHtcbiAgICByZXR1cm4gcmlnaHRTcGVjaWZpY2l0eSAtIGxlZnRTcGVjaWZpY2l0eTtcbiAgfVxuICBmdW5jdGlvbiBtYXRjaChlbGVtZW50KSB7XG4gICAgbGV0IHtcbiAgICAgIGF0dHJpYnV0ZXMgPSBbXVxuICAgIH0gPSBlbGVtZW50O1xuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Rlc3RpbmctbGlicmFyeS9kb20tdGVzdGluZy1saWJyYXJ5L2lzc3Vlcy84MTRcbiAgICBjb25zdCB0eXBlVGV4dEluZGV4ID0gYXR0cmlidXRlcy5maW5kSW5kZXgoYXR0cmlidXRlID0+IGF0dHJpYnV0ZS52YWx1ZSAmJiBhdHRyaWJ1dGUubmFtZSA9PT0gJ3R5cGUnICYmIGF0dHJpYnV0ZS52YWx1ZSA9PT0gJ3RleHQnKTtcbiAgICBpZiAodHlwZVRleHRJbmRleCA+PSAwKSB7XG4gICAgICAvLyBub3QgdXNpbmcgc3BsaWNlIHRvIG5vdCBtdXRhdGUgdGhlIGF0dHJpYnV0ZXMgYXJyYXlcbiAgICAgIGF0dHJpYnV0ZXMgPSBbLi4uYXR0cmlidXRlcy5zbGljZSgwLCB0eXBlVGV4dEluZGV4KSwgLi4uYXR0cmlidXRlcy5zbGljZSh0eXBlVGV4dEluZGV4ICsgMSldO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3RvciA9IG1ha2VFbGVtZW50U2VsZWN0b3Ioe1xuICAgICAgLi4uZWxlbWVudCxcbiAgICAgIGF0dHJpYnV0ZXNcbiAgICB9KTtcbiAgICByZXR1cm4gbm9kZSA9PiB7XG4gICAgICBpZiAodHlwZVRleHRJbmRleCA+PSAwICYmIG5vZGUudHlwZSAhPT0gJ3RleHQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub2RlLm1hdGNoZXMoc2VsZWN0b3IpO1xuICAgIH07XG4gIH1cbiAgbGV0IHJlc3VsdCA9IFtdO1xuXG4gIC8vIGVzbGludCBidWcgaGVyZTpcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGZvciAoY29uc3QgW2VsZW1lbnQsIHJvbGVzXSBvZiBlbGVtZW50Um9sZXNNYXAuZW50cmllcygpKSB7XG4gICAgcmVzdWx0ID0gWy4uLnJlc3VsdCwge1xuICAgICAgbWF0Y2g6IG1hdGNoKGVsZW1lbnQpLFxuICAgICAgcm9sZXM6IEFycmF5LmZyb20ocm9sZXMpLFxuICAgICAgc3BlY2lmaWNpdHk6IGdldFNlbGVjdG9yU3BlY2lmaWNpdHkoZWxlbWVudClcbiAgICB9XTtcbiAgfVxuICByZXR1cm4gcmVzdWx0LnNvcnQoYnlTZWxlY3RvclNwZWNpZmljaXR5KTtcbn1cbmZ1bmN0aW9uIGdldFJvbGVzKGNvbnRhaW5lciwge1xuICBoaWRkZW4gPSBmYWxzZVxufSA9IHt9KSB7XG4gIGZ1bmN0aW9uIGZsYXR0ZW5ET00obm9kZSkge1xuICAgIHJldHVybiBbbm9kZSwgLi4uQXJyYXkuZnJvbShub2RlLmNoaWxkcmVuKS5yZWR1Y2UoKGFjYywgY2hpbGQpID0+IFsuLi5hY2MsIC4uLmZsYXR0ZW5ET00oY2hpbGQpXSwgW10pXTtcbiAgfVxuICByZXR1cm4gZmxhdHRlbkRPTShjb250YWluZXIpLmZpbHRlcihlbGVtZW50ID0+IHtcbiAgICByZXR1cm4gaGlkZGVuID09PSBmYWxzZSA/IGlzSW5hY2Nlc3NpYmxlKGVsZW1lbnQpID09PSBmYWxzZSA6IHRydWU7XG4gIH0pLnJlZHVjZSgoYWNjLCBub2RlKSA9PiB7XG4gICAgbGV0IHJvbGVzID0gW107XG4gICAgLy8gVE9ETzogVGhpcyB2aW9sYXRlcyBodG1sLWFyaWEgd2hpY2ggZG9lcyBub3QgYWxsb3cgYW55IHJvbGUgb24gZXZlcnkgZWxlbWVudFxuICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZSgncm9sZScpKSB7XG4gICAgICByb2xlcyA9IG5vZGUuZ2V0QXR0cmlidXRlKCdyb2xlJykuc3BsaXQoJyAnKS5zbGljZSgwLCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sZXMgPSBnZXRJbXBsaWNpdEFyaWFSb2xlcyhub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJvbGVzLnJlZHVjZSgocm9sZXNBY2MsIHJvbGUpID0+IEFycmF5LmlzQXJyYXkocm9sZXNBY2Nbcm9sZV0pID8ge1xuICAgICAgLi4ucm9sZXNBY2MsXG4gICAgICBbcm9sZV06IFsuLi5yb2xlc0FjY1tyb2xlXSwgbm9kZV1cbiAgICB9IDoge1xuICAgICAgLi4ucm9sZXNBY2MsXG4gICAgICBbcm9sZV06IFtub2RlXVxuICAgIH0sIGFjYyk7XG4gIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIHByZXR0eVJvbGVzKGRvbSwge1xuICBoaWRkZW4sXG4gIGluY2x1ZGVEZXNjcmlwdGlvblxufSkge1xuICBjb25zdCByb2xlcyA9IGdldFJvbGVzKGRvbSwge1xuICAgIGhpZGRlblxuICB9KTtcbiAgLy8gV2UgcHJlZmVyIHRvIHNraXAgZ2VuZXJpYyByb2xlLCB3ZSBkb24ndCByZWNvbW1lbmQgaXRcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHJvbGVzKS5maWx0ZXIoKFtyb2xlXSkgPT4gcm9sZSAhPT0gJ2dlbmVyaWMnKS5tYXAoKFtyb2xlLCBlbGVtZW50c10pID0+IHtcbiAgICBjb25zdCBkZWxpbWl0ZXJCYXIgPSAnLScucmVwZWF0KDUwKTtcbiAgICBjb25zdCBlbGVtZW50c1N0cmluZyA9IGVsZW1lbnRzLm1hcChlbCA9PiB7XG4gICAgICBjb25zdCBuYW1lU3RyaW5nID0gYE5hbWUgXCIkeygwLCBfZG9tQWNjZXNzaWJpbGl0eUFwaS5jb21wdXRlQWNjZXNzaWJsZU5hbWUpKGVsLCB7XG4gICAgICAgIGNvbXB1dGVkU3R5bGVTdXBwb3J0c1BzZXVkb0VsZW1lbnRzOiAoMCwgX2NvbmZpZy5nZXRDb25maWcpKCkuY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHNcbiAgICAgIH0pfVwiOlxcbmA7XG4gICAgICBjb25zdCBkb21TdHJpbmcgPSAoMCwgX3ByZXR0eURvbS5wcmV0dHlET00pKGVsLmNsb25lTm9kZShmYWxzZSkpO1xuICAgICAgaWYgKGluY2x1ZGVEZXNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvblN0cmluZyA9IGBEZXNjcmlwdGlvbiBcIiR7KDAsIF9kb21BY2Nlc3NpYmlsaXR5QXBpLmNvbXB1dGVBY2Nlc3NpYmxlRGVzY3JpcHRpb24pKGVsLCB7XG4gICAgICAgICAgY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHM6ICgwLCBfY29uZmlnLmdldENvbmZpZykoKS5jb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50c1xuICAgICAgICB9KX1cIjpcXG5gO1xuICAgICAgICByZXR1cm4gYCR7bmFtZVN0cmluZ30ke2Rlc2NyaXB0aW9uU3RyaW5nfSR7ZG9tU3RyaW5nfWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7bmFtZVN0cmluZ30ke2RvbVN0cmluZ31gO1xuICAgIH0pLmpvaW4oJ1xcblxcbicpO1xuICAgIHJldHVybiBgJHtyb2xlfTpcXG5cXG4ke2VsZW1lbnRzU3RyaW5nfVxcblxcbiR7ZGVsaW1pdGVyQmFyfWA7XG4gIH0pLmpvaW4oJ1xcbicpO1xufVxuY29uc3QgbG9nUm9sZXMgPSAoZG9tLCB7XG4gIGhpZGRlbiA9IGZhbHNlXG59ID0ge30pID0+IGNvbnNvbGUubG9nKHByZXR0eVJvbGVzKGRvbSwge1xuICBoaWRkZW5cbn0pKTtcblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge2Jvb2xlYW4gfCB1bmRlZmluZWR9IC0gZmFsc2UvdHJ1ZSBpZiAobm90KXNlbGVjdGVkLCB1bmRlZmluZWQgaWYgbm90IHNlbGVjdGFibGVcbiAqL1xuZXhwb3J0cy5sb2dSb2xlcyA9IGxvZ1JvbGVzO1xuZnVuY3Rpb24gY29tcHV0ZUFyaWFTZWxlY3RlZChlbGVtZW50KSB7XG4gIC8vIGltcGxpY2l0IHZhbHVlIGZyb20gaHRtbC1hYW0gbWFwcGluZ3M6IGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sLWFhbS0xLjAvI2h0bWwtYXR0cmlidXRlLXN0YXRlLWFuZC1wcm9wZXJ0eS1tYXBwaW5nc1xuICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbC1hYW0tMS4wLyNkZXRhaWxzLWlkLTk3XG4gIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuc2VsZWN0ZWQ7XG4gIH1cblxuICAvLyBleHBsaWNpdCB2YWx1ZVxuICByZXR1cm4gY2hlY2tCb29sZWFuQXR0cmlidXRlKGVsZW1lbnQsICdhcmlhLXNlbGVjdGVkJyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC1cbiAqIEByZXR1cm5zIHtib29sZWFufSAtXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVBcmlhQnVzeShlbGVtZW50KSB7XG4gIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI2FyaWEtYnVzeVxuICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtYnVzeScpID09PSAndHJ1ZSc7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC1cbiAqIEByZXR1cm5zIHtib29sZWFuIHwgdW5kZWZpbmVkfSAtIGZhbHNlL3RydWUgaWYgKG5vdCljaGVja2VkLCB1bmRlZmluZWQgaWYgbm90IGNoZWNrZWQtYWJsZVxuICovXG5mdW5jdGlvbiBjb21wdXRlQXJpYUNoZWNrZWQoZWxlbWVudCkge1xuICAvLyBpbXBsaWNpdCB2YWx1ZSBmcm9tIGh0bWwtYWFtIG1hcHBpbmdzOiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbC1hYW0tMS4wLyNodG1sLWF0dHJpYnV0ZS1zdGF0ZS1hbmQtcHJvcGVydHktbWFwcGluZ3NcbiAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWwtYWFtLTEuMC8jZGV0YWlscy1pZC01NlxuICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbC1hYW0tMS4wLyNkZXRhaWxzLWlkLTY3XG4gIGlmICgnaW5kZXRlcm1pbmF0ZScgaW4gZWxlbWVudCAmJiBlbGVtZW50LmluZGV0ZXJtaW5hdGUpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmICgnY2hlY2tlZCcgaW4gZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmNoZWNrZWQ7XG4gIH1cblxuICAvLyBleHBsaWNpdCB2YWx1ZVxuICByZXR1cm4gY2hlY2tCb29sZWFuQXR0cmlidXRlKGVsZW1lbnQsICdhcmlhLWNoZWNrZWQnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge2Jvb2xlYW4gfCB1bmRlZmluZWR9IC0gZmFsc2UvdHJ1ZSBpZiAobm90KXByZXNzZWQsIHVuZGVmaW5lZCBpZiBub3QgcHJlc3MtYWJsZVxuICovXG5mdW5jdGlvbiBjb21wdXRlQXJpYVByZXNzZWQoZWxlbWVudCkge1xuICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4xLyNhcmlhLXByZXNzZWRcbiAgcmV0dXJuIGNoZWNrQm9vbGVhbkF0dHJpYnV0ZShlbGVtZW50LCAnYXJpYS1wcmVzc2VkJyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC1cbiAqIEByZXR1cm5zIHtib29sZWFuIHwgc3RyaW5nIHwgbnVsbH0gLVxuICovXG5mdW5jdGlvbiBjb21wdXRlQXJpYUN1cnJlbnQoZWxlbWVudCkge1xuICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4xLyNhcmlhLWN1cnJlbnRcbiAgcmV0dXJuIGNoZWNrQm9vbGVhbkF0dHJpYnV0ZShlbGVtZW50LCAnYXJpYS1jdXJyZW50JykgPz8gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcpID8/IGZhbHNlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtXG4gKiBAcmV0dXJucyB7Ym9vbGVhbiB8IHVuZGVmaW5lZH0gLSBmYWxzZS90cnVlIGlmIChub3QpZXhwYW5kZWQsIHVuZGVmaW5lZCBpZiBub3QgZXhwYW5kLWFibGVcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUFyaWFFeHBhbmRlZChlbGVtZW50KSB7XG4gIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI2FyaWEtZXhwYW5kZWRcbiAgcmV0dXJuIGNoZWNrQm9vbGVhbkF0dHJpYnV0ZShlbGVtZW50LCAnYXJpYS1leHBhbmRlZCcpO1xufVxuZnVuY3Rpb24gY2hlY2tCb29sZWFuQXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZSkge1xuICBjb25zdCBhdHRyaWJ1dGVWYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gIGlmIChhdHRyaWJ1dGVWYWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGF0dHJpYnV0ZVZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC1cbiAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9IC0gbnVtYmVyIGlmIGltcGxpY2l0IGhlYWRpbmcgb3IgYXJpYS1sZXZlbCBwcmVzZW50LCBvdGhlcndpc2UgdW5kZWZpbmVkXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVIZWFkaW5nTGV2ZWwoZWxlbWVudCkge1xuICAvLyBodHRwczovL3czYy5naXRodWIuaW8vaHRtbC1hYW0vI2VsLWgxLWg2XG4gIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9odG1sLWFhbS8jZWwtaDEtaDZcbiAgY29uc3QgaW1wbGljaXRIZWFkaW5nTGV2ZWxzID0ge1xuICAgIEgxOiAxLFxuICAgIEgyOiAyLFxuICAgIEgzOiAzLFxuICAgIEg0OiA0LFxuICAgIEg1OiA1LFxuICAgIEg2OiA2XG4gIH07XG4gIC8vIGV4cGxpY2l0IGFyaWEtbGV2ZWwgdmFsdWVcbiAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMi8jYXJpYS1sZXZlbFxuICBjb25zdCBhcmlhTGV2ZWxBdHRyaWJ1dGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1sZXZlbCcpICYmIE51bWJlcihlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1sZXZlbCcpKTtcbiAgcmV0dXJuIGFyaWFMZXZlbEF0dHJpYnV0ZSB8fCBpbXBsaWNpdEhlYWRpbmdMZXZlbHNbZWxlbWVudC50YWdOYW1lXTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge251bWJlciB8IHVuZGVmaW5lZH0gLVxuICovXG5mdW5jdGlvbiBjb21wdXRlQXJpYVZhbHVlTm93KGVsZW1lbnQpIHtcbiAgY29uc3QgdmFsdWVOb3cgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycpO1xuICByZXR1cm4gdmFsdWVOb3cgPT09IG51bGwgPyB1bmRlZmluZWQgOiArdmFsdWVOb3c7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC1cbiAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9IC1cbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUFyaWFWYWx1ZU1heChlbGVtZW50KSB7XG4gIGNvbnN0IHZhbHVlTWF4ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtYXgnKTtcbiAgcmV0dXJuIHZhbHVlTWF4ID09PSBudWxsID8gdW5kZWZpbmVkIDogK3ZhbHVlTWF4O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtXG4gKiBAcmV0dXJucyB7bnVtYmVyIHwgdW5kZWZpbmVkfSAtXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVBcmlhVmFsdWVNaW4oZWxlbWVudCkge1xuICBjb25zdCB2YWx1ZU1pbiA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbWluJyk7XG4gIHJldHVybiB2YWx1ZU1pbiA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6ICt2YWx1ZU1pbjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge3N0cmluZyB8IHVuZGVmaW5lZH0gLVxuICovXG5mdW5jdGlvbiBjb21wdXRlQXJpYVZhbHVlVGV4dChlbGVtZW50KSB7XG4gIGNvbnN0IHZhbHVlVGV4dCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXZhbHVldGV4dCcpO1xuICByZXR1cm4gdmFsdWVUZXh0ID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWVUZXh0O1xufSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFDM0NDLEtBQUssRUFBRTtBQUNULENBQUMsQ0FBQztBQUNGRCxPQUFPLENBQUNFLGVBQWUs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