4be63a9a419b5ede0ad270776552374d
'use strict';

function _define_property(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
class Buttons {
  getButtons() {
    let v = 0;
    for (const button of Object.keys(this.pressed)) {
      // eslint-disable-next-line no-bitwise
      v |= 2 ** Number(button);
    }
    return v;
  }
  down(keyDef) {
    const button = getMouseButtonId(keyDef.button);
    if (button in this.pressed) {
      this.pressed[button].push(keyDef);
      return undefined;
    }
    this.pressed[button] = [keyDef];
    return button;
  }
  up(keyDef) {
    const button = getMouseButtonId(keyDef.button);
    if (button in this.pressed) {
      this.pressed[button] = this.pressed[button].filter(k => k.name !== keyDef.name);
      if (this.pressed[button].length === 0) {
        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
        delete this.pressed[button];
        return button;
      }
    }
    return undefined;
  }
  constructor() {
    _define_property(this, "pressed", {});
  }
}
const MouseButton = {
  primary: 0,
  secondary: 1,
  auxiliary: 2,
  back: 3,
  X1: 3,
  forward: 4,
  X2: 4
};
function getMouseButtonId(button = 0) {
  if (button in MouseButton) {
    return MouseButton[button];
  }
  return Number(button);
}
// On the `MouseEvent.button` property auxiliary and secondary button are flipped compared to `MouseEvent.buttons`.
const MouseButtonFlip = {
  1: 2,
  2: 1
};
function getMouseEventButton(button) {
  button = getMouseButtonId(button);
  if (button in MouseButtonFlip) {
    return MouseButtonFlip[button];
  }
  return button;
}
exports.Buttons = Buttons;
exports.MouseButton = MouseButton;
exports.MouseButtonFlip = MouseButtonFlip;
exports.getMouseButtonId = getMouseButtonId;
exports.getMouseEventButton = getMouseEventButton;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZGVmaW5lX3Byb3BlcnR5Iiwib2JqIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIkJ1dHRvbnMiLCJnZXRCdXR0b25zIiwidiIsImJ1dHRvbiIsImtleXMiLCJwcmVzc2VkIiwiTnVtYmVyIiwiZG93biIsImtleURlZiIsImdldE1vdXNlQnV0dG9uSWQiLCJwdXNoIiwidW5kZWZpbmVkIiwidXAiLCJmaWx0ZXIiLCJrIiwibmFtZSIsImxlbmd0aCIsImNvbnN0cnVjdG9yIiwiTW91c2VCdXR0b24iLCJwcmltYXJ5Iiwic2Vjb25kYXJ5IiwiYXV4aWxpYXJ5IiwiYmFjayIsIlgxIiwiZm9yd2FyZCIsIlgyIiwiTW91c2VCdXR0b25GbGlwIiwiZ2V0TW91c2VFdmVudEJ1dHRvbiIsImV4cG9ydHMiXSwic291cmNlcyI6WyJidXR0b25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gX2RlZmluZV9wcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuY2xhc3MgQnV0dG9ucyB7XG4gICAgZ2V0QnV0dG9ucygpIHtcbiAgICAgICAgbGV0IHYgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBPYmplY3Qua2V5cyh0aGlzLnByZXNzZWQpKXtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgICAgICAgICB2IHw9IDIgKiogTnVtYmVyKGJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHY7XG4gICAgfVxuICAgIGRvd24oa2V5RGVmKSB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGdldE1vdXNlQnV0dG9uSWQoa2V5RGVmLmJ1dHRvbik7XG4gICAgICAgIGlmIChidXR0b24gaW4gdGhpcy5wcmVzc2VkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWRbYnV0dG9uXS5wdXNoKGtleURlZik7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlc3NlZFtidXR0b25dID0gW1xuICAgICAgICAgICAga2V5RGVmXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIHVwKGtleURlZikge1xuICAgICAgICBjb25zdCBidXR0b24gPSBnZXRNb3VzZUJ1dHRvbklkKGtleURlZi5idXR0b24pO1xuICAgICAgICBpZiAoYnV0dG9uIGluIHRoaXMucHJlc3NlZCkge1xuICAgICAgICAgICAgdGhpcy5wcmVzc2VkW2J1dHRvbl0gPSB0aGlzLnByZXNzZWRbYnV0dG9uXS5maWx0ZXIoKGspPT5rLm5hbWUgIT09IGtleURlZi5uYW1lKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXNzZWRbYnV0dG9uXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWR5bmFtaWMtZGVsZXRlXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucHJlc3NlZFtidXR0b25dO1xuICAgICAgICAgICAgICAgIHJldHVybiBidXR0b247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcInByZXNzZWRcIiwge30pO1xuICAgIH1cbn1cbmNvbnN0IE1vdXNlQnV0dG9uID0ge1xuICAgIHByaW1hcnk6IDAsXG4gICAgc2Vjb25kYXJ5OiAxLFxuICAgIGF1eGlsaWFyeTogMixcbiAgICBiYWNrOiAzLFxuICAgIFgxOiAzLFxuICAgIGZvcndhcmQ6IDQsXG4gICAgWDI6IDRcbn07XG5mdW5jdGlvbiBnZXRNb3VzZUJ1dHRvbklkKGJ1dHRvbiA9IDApIHtcbiAgICBpZiAoYnV0dG9uIGluIE1vdXNlQnV0dG9uKSB7XG4gICAgICAgIHJldHVybiBNb3VzZUJ1dHRvbltidXR0b25dO1xuICAgIH1cbiAgICByZXR1cm4gTnVtYmVyKGJ1dHRvbik7XG59XG4vLyBPbiB0aGUgYE1vdXNlRXZlbnQuYnV0dG9uYCBwcm9wZXJ0eSBhdXhpbGlhcnkgYW5kIHNlY29uZGFyeSBidXR0b24gYXJlIGZsaXBwZWQgY29tcGFyZWQgdG8gYE1vdXNlRXZlbnQuYnV0dG9uc2AuXG5jb25zdCBNb3VzZUJ1dHRvbkZsaXAgPSB7XG4gICAgMTogMixcbiAgICAyOiAxXG59O1xuZnVuY3Rpb24gZ2V0TW91c2VFdmVudEJ1dHRvbihidXR0b24pIHtcbiAgICBidXR0b24gPSBnZXRNb3VzZUJ1dHRvbklkKGJ1dHRvbik7XG4gICAgaWYgKGJ1dHRvbiBpbiBNb3VzZUJ1dHRvbkZsaXApIHtcbiAgICAgICAgcmV0dXJuIE1vdXNlQnV0dG9uRmxpcFtidXR0b25dO1xuICAgIH1cbiAgICByZXR1cm4gYnV0dG9uO1xufVxuXG5leHBvcnRzLkJ1dHRvbnMgPSBCdXR0b25zO1xuZXhwb3J0cy5Nb3VzZUJ1dHRvbiA9IE1vdXNlQnV0dG9uO1xuZXhwb3J0cy5Nb3VzZUJ1dHRvbkZsaXAgPSBNb3VzZUJ1dHRvbkZsaXA7XG5leHBvcnRzLmdldE1vdXNlQnV0dG9uSWQgPSBnZXRNb3VzZUJ1dHRvbklkO1xuZXhw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