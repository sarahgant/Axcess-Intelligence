b56a9086c0c1ad091348144f37fdc30c
'use strict';

var DataTransfer = require('../utils/dataTransfer/DataTransfer.js');
require('../utils/dataTransfer/Clipboard.js');
var getWindow = require('../utils/misc/getWindow.js');
var selection = require('../utils/focus/selection.js');
var UI = require('./UI.js');
function copySelection(target) {
  const data = selection.hasOwnSelection(target) ? {
    'text/plain': readSelectedValueFromInput(target)
  } : {
    'text/plain': String(target.ownerDocument.getSelection())
  };
  const dt = DataTransfer.createDataTransfer(getWindow.getWindow(target));
  for (const type in data) {
    if (data[type]) {
      dt.setData(type, data[type]);
    }
  }
  return dt;
}
function readSelectedValueFromInput(target) {
  const sel = UI.getUISelection(target);
  const val = UI.getUIValue(target);
  return val.substring(sel.startOffset, sel.endOffset);
}
exports.copySelection = copySelection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHJhbnNmZXIiLCJyZXF1aXJlIiwiZ2V0V2luZG93Iiwic2VsZWN0aW9uIiwiVUkiLCJjb3B5U2VsZWN0aW9uIiwidGFyZ2V0IiwiZGF0YSIsImhhc093blNlbGVjdGlvbiIsInJlYWRTZWxlY3RlZFZhbHVlRnJvbUlucHV0IiwiU3RyaW5nIiwib3duZXJEb2N1bWVudCIsImdldFNlbGVjdGlvbiIsImR0IiwiY3JlYXRlRGF0YVRyYW5zZmVyIiwidHlwZSIsInNldERhdGEiLCJzZWwiLCJnZXRVSVNlbGVjdGlvbiIsInZhbCIsImdldFVJVmFsdWUiLCJzdWJzdHJpbmciLCJzdGFydE9mZnNldCIsImVuZE9mZnNldCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJjb3B5U2VsZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIERhdGFUcmFuc2ZlciA9IHJlcXVpcmUoJy4uL3V0aWxzL2RhdGFUcmFuc2Zlci9EYXRhVHJhbnNmZXIuanMnKTtcbnJlcXVpcmUoJy4uL3V0aWxzL2RhdGFUcmFuc2Zlci9DbGlwYm9hcmQuanMnKTtcbnZhciBnZXRXaW5kb3cgPSByZXF1aXJlKCcuLi91dGlscy9taXNjL2dldFdpbmRvdy5qcycpO1xudmFyIHNlbGVjdGlvbiA9IHJlcXVpcmUoJy4uL3V0aWxzL2ZvY3VzL3NlbGVjdGlvbi5qcycpO1xudmFyIFVJID0gcmVxdWlyZSgnLi9VSS5qcycpO1xuXG5mdW5jdGlvbiBjb3B5U2VsZWN0aW9uKHRhcmdldCkge1xuICAgIGNvbnN0IGRhdGEgPSBzZWxlY3Rpb24uaGFzT3duU2VsZWN0aW9uKHRhcmdldCkgPyB7XG4gICAgICAgICd0ZXh0L3BsYWluJzogcmVhZFNlbGVjdGVkVmFsdWVGcm9tSW5wdXQodGFyZ2V0KVxuICAgIH0gOiB7XG4gICAgICAgICd0ZXh0L3BsYWluJzogU3RyaW5nKHRhcmdldC5vd25lckRvY3VtZW50LmdldFNlbGVjdGlvbigpKVxuICAgIH07XG4gICAgY29uc3QgZHQgPSBEYXRhVHJhbnNmZXIuY3JlYXRlRGF0YVRyYW5zZmVyKGdldFdpbmRvdy5nZXRXaW5kb3codGFyZ2V0KSk7XG4gICAgZm9yKGNvbnN0IHR5cGUgaW4gZGF0YSl7XG4gICAgICAgIGlmIChkYXRhW3R5cGVdKSB7XG4gICAgICAgICAgICBkdC5zZXREYXRhKHR5cGUsIGRhdGFbdHlwZV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkdDtcbn1cbmZ1bmN0aW9uIHJlYWRTZWxlY3RlZFZhbHVlRnJvbUlucHV0KHRhcmdldCkge1xuICAgIGNvbnN0IHNlbCA9IFVJLmdldFVJU2VsZWN0aW9uKHRhcmdldCk7XG4gICAgY29uc3QgdmFsID0gVUkuZ2V0VUlWYWx1ZSh0YXJnZXQpO1xuICAgIHJldHVybiB2YWwuc3Vic3RyaW5nKHNlbC5zdGFydE9mZnNldCwgc2VsLmVuZE9mZnNldCk7XG59XG5cbmV4cG9ydHMuY29weVNlbGVjdGlvbiA9IGNvcHlTZWxlY3Rpb247XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVosSUFBSUEsWUFBWSxHQUFHQyxPQUFPLENBQUMsdUNBQXVDLENBQUM7QUFDbkVBLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUM3QyxJQUFJQyxTQUFTLEdBQUdELE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUNyRCxJQUFJRSxTQUFTLEdBQUdGLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztBQUN0RCxJQUFJRyxFQUFFLEdBQUdILE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFFM0IsU0FBU0ksYUFBYUEsQ0FBQ0MsTUFBTSxFQUFFO0VBQzNCLE1BQU1DLElBQUksR0FBR0osU0FBUyxDQUFDSyxlQUFlLENBQUNGLE1BQU0sQ0FBQyxHQUFHO0lBQzdDLFlBQVksRUFBRUcsMEJBQTBCLENBQUNILE1BQU07RUFDbkQsQ0FBQyxHQUFHO0lBQ0EsWUFBWSxFQUFFSSxNQUFNLENBQUNKLE1BQU0sQ0FBQ0ssYUFBYSxDQUFDQyxZQUFZLENBQUMsQ0FBQztFQUM1RCxDQUFDO0VBQ0QsTUFBTUMsRUFBRSxHQUFHYixZQUFZLENBQUNjLGtCQUFrQixDQUFDWixTQUFTLENBQUNBLFNBQVMsQ0FBQ0ksTUFBTSxDQUFDLENBQUM7RUFDdkUsS0FBSSxNQUFNUyxJQUFJLElBQUlSLElBQUksRUFBQztJQUNuQixJQUFJQSxJQUFJLENBQUNRLElBQUksQ0FBQyxFQUFFO01BQ1pGLEVBQUUsQ0FBQ0csT0FBTyxDQUFDRCxJQUFJLEVBQUVSLElBQUksQ0FBQ1EsSUFBSSxDQUFDLENBQUM7SUFDaEM7RUFDSjtFQUNBLE9BQU9GLEVBQUU7QUFDYjtBQUNBLFNBQVNKLDBCQUEwQkEsQ0FBQ0gsTUFBTSxFQUFFO0VBQ3hDLE1BQU1XLEdBQUcsR0FBR2IsRUFBRSxDQUFDYyxjQUFjLENBQUNaLE1BQU0sQ0FBQztFQUNyQyxNQUFNYSxHQUFHLEdBQUdmLEVBQUUsQ0FBQ2dCLFVBQVUsQ0FBQ2QsTUFBTSxDQUFDO0VBQ2pDLE9BQU9hLEdBQUcsQ0FBQ0UsU0FBUyxDQUFDSixHQUFHLENBQUNLLFdBQVcsRUFBRUwsR0FBRyxDQUFDTSxTQUFTLENBQUM7QUFDeEQ7QUFFQUMsT0FBTyxDQUFDbkIsYUFBYSxHQUFHQSxhQUFhIiwiaWdub3JlTGlzdCI6W119