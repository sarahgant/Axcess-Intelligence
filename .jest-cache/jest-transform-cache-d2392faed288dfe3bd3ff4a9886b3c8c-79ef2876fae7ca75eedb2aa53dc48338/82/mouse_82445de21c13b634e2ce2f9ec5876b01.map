{"version":3,"names":["require","isDisabled","getTreeDiff","focus","setSelectionPerMouse","modifySelectionPerMouse","buttons","shared","_define_property","obj","key","value","Object","defineProperty","enumerable","configurable","writable","Mouse","move","instance","position","isPrevented","prevPosition","prevTarget","getTarget","isDifferentPointerPosition","nextTarget","init","getEventInit","leave","enter","dispatchUIEvent","forEach","el","modifySelecting","down","keyDef","button","undefined","target","buttonDownTarget","disabled","startSelecting","detail","focusElement","getMouseEventButton","up","mouseUpInit","endSelecting","clickTarget","resetClickCount","clickCount","reset","type","coords","getButtons","getOnDown","getOnUp","incOnClick","_this_position_target","config","document","body","_this_position_caret","_this_position_caret1","selecting","setSelectionPerMouseDown","node","caret","offset","modifySelectionPerMouseMove","constructor","Buttons","current","Number","count","_this_count_button","_this_count_button1","exports"],"sources":["mouse.js"],"sourcesContent":["'use strict';\n\nrequire('../../event/behavior/click.js');\nrequire('../../event/behavior/cut.js');\nrequire('../../event/behavior/keydown.js');\nrequire('../../event/behavior/keypress.js');\nrequire('../../event/behavior/keyup.js');\nrequire('../../event/behavior/paste.js');\nrequire('@testing-library/dom');\nrequire('../../utils/dataTransfer/Clipboard.js');\nvar isDisabled = require('../../utils/misc/isDisabled.js');\nvar getTreeDiff = require('../../utils/misc/getTreeDiff.js');\nvar focus = require('../../event/focus.js');\nvar setSelectionPerMouse = require('../../event/selection/setSelectionPerMouse.js');\nvar modifySelectionPerMouse = require('../../event/selection/modifySelectionPerMouse.js');\nvar buttons = require('./buttons.js');\nvar shared = require('./shared.js');\n\nfunction _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n/**\n * This object is the single \"virtual\" mouse that might be controlled by multiple different pointer devices.\n */ class Mouse {\n    move(instance, position, /** Whether `preventDefault()` has been called on the `pointerdown` event */ isPrevented) {\n        const prevPosition = this.position;\n        const prevTarget = this.getTarget(instance);\n        this.position = position;\n        if (!shared.isDifferentPointerPosition(prevPosition, position)) {\n            return;\n        }\n        const nextTarget = this.getTarget(instance);\n        const init = this.getEventInit('mousemove');\n        const [leave, enter] = getTreeDiff.getTreeDiff(prevTarget, nextTarget);\n        return {\n            leave: ()=>{\n                if (prevTarget !== nextTarget) {\n                    instance.dispatchUIEvent(prevTarget, 'mouseout', init);\n                    leave.forEach((el)=>instance.dispatchUIEvent(el, 'mouseleave', init));\n                }\n            },\n            enter: ()=>{\n                if (prevTarget !== nextTarget) {\n                    instance.dispatchUIEvent(nextTarget, 'mouseover', init);\n                    enter.forEach((el)=>instance.dispatchUIEvent(el, 'mouseenter', init));\n                }\n            },\n            move: ()=>{\n                if (isPrevented) {\n                    return;\n                }\n                instance.dispatchUIEvent(nextTarget, 'mousemove', init);\n                this.modifySelecting(instance);\n            }\n        };\n    }\n    down(instance, keyDef, /** Whether `preventDefault()` has been called on the `pointerdown` event */ isPrevented) {\n        const button = this.buttons.down(keyDef);\n        if (button === undefined) {\n            return;\n        }\n        const target = this.getTarget(instance);\n        this.buttonDownTarget[button] = target;\n        const init = this.getEventInit('mousedown', keyDef.button);\n        const disabled = isDisabled.isDisabled(target);\n        if (!isPrevented && (disabled || instance.dispatchUIEvent(target, 'mousedown', init))) {\n            this.startSelecting(instance, init.detail);\n            focus.focusElement(target);\n        }\n        if (!disabled && buttons.getMouseEventButton(keyDef.button) === 2) {\n            instance.dispatchUIEvent(target, 'contextmenu', this.getEventInit('contextmenu', keyDef.button));\n        }\n    }\n    up(instance, keyDef, /** Whether `preventDefault()` has been called on the `pointerdown` event */ isPrevented) {\n        const button = this.buttons.up(keyDef);\n        if (button === undefined) {\n            return;\n        }\n        const target = this.getTarget(instance);\n        if (!isDisabled.isDisabled(target)) {\n            if (!isPrevented) {\n                const mouseUpInit = this.getEventInit('mouseup', keyDef.button);\n                instance.dispatchUIEvent(target, 'mouseup', mouseUpInit);\n                this.endSelecting();\n            }\n            const clickTarget = getTreeDiff.getTreeDiff(this.buttonDownTarget[button], target)[2][0];\n            if (clickTarget) {\n                const init = this.getEventInit('click', keyDef.button);\n                if (init.detail) {\n                    instance.dispatchUIEvent(clickTarget, init.button === 0 ? 'click' : 'auxclick', init);\n                    if (init.button === 0 && init.detail === 2) {\n                        instance.dispatchUIEvent(clickTarget, 'dblclick', {\n                            ...this.getEventInit('dblclick', keyDef.button),\n                            detail: init.detail\n                        });\n                    }\n                }\n            }\n        }\n    }\n    resetClickCount() {\n        this.clickCount.reset();\n    }\n    getEventInit(type, button) {\n        const init = {\n            ...this.position.coords\n        };\n        init.button = buttons.getMouseEventButton(button);\n        init.buttons = this.buttons.getButtons();\n        if (type === 'mousedown') {\n            init.detail = this.clickCount.getOnDown(init.button);\n        } else if (type === 'mouseup') {\n            init.detail = this.clickCount.getOnUp(init.button);\n        } else if (type === 'click' || type === 'auxclick') {\n            init.detail = this.clickCount.incOnClick(init.button);\n        }\n        return init;\n    }\n    getTarget(instance) {\n        var _this_position_target;\n        return (_this_position_target = this.position.target) !== null && _this_position_target !== undefined ? _this_position_target : instance.config.document.body;\n    }\n    startSelecting(instance, clickCount) {\n        var _this_position_caret, _this_position_caret1;\n        // TODO: support extending range (shift)\n        this.selecting = setSelectionPerMouse.setSelectionPerMouseDown({\n            document: instance.config.document,\n            target: this.getTarget(instance),\n            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === undefined ? undefined : _this_position_caret.node,\n            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === undefined ? undefined : _this_position_caret1.offset,\n            clickCount\n        });\n    }\n    modifySelecting(instance) {\n        var _this_position_caret, _this_position_caret1;\n        if (!this.selecting) {\n            return;\n        }\n        modifySelectionPerMouse.modifySelectionPerMouseMove(this.selecting, {\n            document: instance.config.document,\n            target: this.getTarget(instance),\n            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === undefined ? undefined : _this_position_caret.node,\n            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === undefined ? undefined : _this_position_caret1.offset\n        });\n    }\n    endSelecting() {\n        this.selecting = undefined;\n    }\n    constructor(){\n        _define_property(this, \"position\", {});\n        _define_property(this, \"buttons\", new buttons.Buttons());\n        _define_property(this, \"selecting\", undefined);\n        _define_property(this, \"buttonDownTarget\", {});\n        // According to spec the `detail` on click events should be the number\n        // of *consecutive* clicks with a specific button.\n        // On `mousedown` and `mouseup` it should be this number increased by one.\n        // But the browsers don't implement it this way.\n        // If another button is pressed,\n        //   in Webkit: the `mouseup` on the previously pressed button has `detail: 0` and no `click`/`auxclick`.\n        //   in Gecko: the `mouseup` and click events have the same detail as the `mousedown`.\n        // If there is a delay while a button is pressed,\n        // the `mouseup` and `click` are normal, but a following `mousedown` starts a new click count.\n        // We'll follow the minimal implementation of Webkit.\n        _define_property(this, \"clickCount\", new class {\n            incOnClick(button) {\n                const current = this.down[button] === undefined ? undefined : Number(this.down[button]) + 1;\n                this.count = this.count[button] === undefined ? {} : {\n                    [button]: Number(this.count[button]) + 1\n                };\n                return current;\n            }\n            getOnDown(button) {\n                var _this_count_button;\n                this.down = {\n                    [button]: (_this_count_button = this.count[button]) !== null && _this_count_button !== undefined ? _this_count_button : 0\n                };\n                var _this_count_button1;\n                this.count = {\n                    [button]: (_this_count_button1 = this.count[button]) !== null && _this_count_button1 !== undefined ? _this_count_button1 : 0\n                };\n                return Number(this.count[button]) + 1;\n            }\n            getOnUp(button) {\n                return this.down[button] === undefined ? undefined : Number(this.down[button]) + 1;\n            }\n            reset() {\n                this.count = {};\n            }\n            constructor(){\n                _define_property(this, \"down\", {});\n                _define_property(this, \"count\", {});\n            }\n        }());\n    }\n}\n\nexports.Mouse = Mouse;\n"],"mappings":"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","ignoreList":[]}