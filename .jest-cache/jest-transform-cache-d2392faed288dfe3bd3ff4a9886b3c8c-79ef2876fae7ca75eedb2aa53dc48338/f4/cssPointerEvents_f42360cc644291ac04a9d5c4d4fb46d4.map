{"version":3,"names":["options","require","getWindow","isElementType","level","hasPointerEvents","instance","element","_checkPointerEvents","checkPointerEvents","undefined","pointerEvents","closestPointerEventsDeclaration","window","el","tree","ownerDocument","parentElement","push","getComputedStyle","includes","PointerEventsCheck","Symbol","lastCheck","needsCheck","config","pointerEventsCheck","PointerEventsCheckLevel","Never","hasBitFlag","EachApiCall","ApiLevel","Call","getLevelRef","EachTrigger","Trigger","result","declaration","assertPointerEvents","Error","length","printTree","join","reverse","map","i","padEnd","tagName","id","hasAttribute","getAttribute","getLabelDescr","filter","Boolean","_element_labels","label","_element_ownerDocument_getElementById_textContent","_element_ownerDocument_getElementById","getElementById","textContent","trim","labels","Array","from","_el_textContent","_element_textContent","replace","Number","substring","conf","flag","exports"],"sources":["cssPointerEvents.js"],"sourcesContent":["'use strict';\n\nvar options = require('../../options.js');\nvar getWindow = require('../misc/getWindow.js');\nvar isElementType = require('../misc/isElementType.js');\nvar level = require('../misc/level.js');\n\nfunction hasPointerEvents(instance, element) {\n    var _checkPointerEvents;\n    return ((_checkPointerEvents = checkPointerEvents(instance, element)) === null || _checkPointerEvents === undefined ? undefined : _checkPointerEvents.pointerEvents) !== 'none';\n}\nfunction closestPointerEventsDeclaration(element) {\n    const window = getWindow.getWindow(element);\n    for(let el = element, tree = []; el === null || el === undefined ? undefined : el.ownerDocument; el = el.parentElement){\n        tree.push(el);\n        const pointerEvents = window.getComputedStyle(el).pointerEvents;\n        if (pointerEvents && ![\n            'inherit',\n            'unset'\n        ].includes(pointerEvents)) {\n            return {\n                pointerEvents,\n                tree\n            };\n        }\n    }\n    return undefined;\n}\nconst PointerEventsCheck = Symbol('Last check for pointer-events');\nfunction checkPointerEvents(instance, element) {\n    const lastCheck = element[PointerEventsCheck];\n    const needsCheck = instance.config.pointerEventsCheck !== options.PointerEventsCheckLevel.Never && (!lastCheck || hasBitFlag(instance.config.pointerEventsCheck, options.PointerEventsCheckLevel.EachApiCall) && lastCheck[level.ApiLevel.Call] !== level.getLevelRef(instance, level.ApiLevel.Call) || hasBitFlag(instance.config.pointerEventsCheck, options.PointerEventsCheckLevel.EachTrigger) && lastCheck[level.ApiLevel.Trigger] !== level.getLevelRef(instance, level.ApiLevel.Trigger));\n    if (!needsCheck) {\n        return lastCheck === null || lastCheck === undefined ? undefined : lastCheck.result;\n    }\n    const declaration = closestPointerEventsDeclaration(element);\n    element[PointerEventsCheck] = {\n        [level.ApiLevel.Call]: level.getLevelRef(instance, level.ApiLevel.Call),\n        [level.ApiLevel.Trigger]: level.getLevelRef(instance, level.ApiLevel.Trigger),\n        result: declaration\n    };\n    return declaration;\n}\nfunction assertPointerEvents(instance, element) {\n    const declaration = checkPointerEvents(instance, element);\n    if ((declaration === null || declaration === undefined ? undefined : declaration.pointerEvents) === 'none') {\n        throw new Error([\n            `Unable to perform pointer interaction as the element ${declaration.tree.length > 1 ? 'inherits' : 'has'} \\`pointer-events: none\\`:`,\n            '',\n            printTree(declaration.tree)\n        ].join('\\n'));\n    }\n}\nfunction printTree(tree) {\n    return tree.reverse().map((el, i)=>[\n            ''.padEnd(i),\n            el.tagName,\n            el.id && `#${el.id}`,\n            el.hasAttribute('data-testid') && `(testId=${el.getAttribute('data-testid')})`,\n            getLabelDescr(el),\n            tree.length > 1 && i === 0 && '  <-- This element declared `pointer-events: none`',\n            tree.length > 1 && i === tree.length - 1 && '  <-- Asserted pointer events here'\n        ].filter(Boolean).join('')).join('\\n');\n}\nfunction getLabelDescr(element) {\n    var _element_labels;\n    let label;\n    if (element.hasAttribute('aria-label')) {\n        label = element.getAttribute('aria-label');\n    } else if (element.hasAttribute('aria-labelledby')) {\n        var _element_ownerDocument_getElementById_textContent, _element_ownerDocument_getElementById;\n        label = (_element_ownerDocument_getElementById = element.ownerDocument.getElementById(element.getAttribute('aria-labelledby'))) === null || _element_ownerDocument_getElementById === undefined ? undefined : (_element_ownerDocument_getElementById_textContent = _element_ownerDocument_getElementById.textContent) === null || _element_ownerDocument_getElementById_textContent === undefined ? undefined : _element_ownerDocument_getElementById_textContent.trim();\n    } else if (isElementType.isElementType(element, [\n        'button',\n        'input',\n        'meter',\n        'output',\n        'progress',\n        'select',\n        'textarea'\n    ]) && ((_element_labels = element.labels) === null || _element_labels === undefined ? undefined : _element_labels.length)) {\n        label = Array.from(element.labels).map((el)=>{\n            var _el_textContent;\n            return (_el_textContent = el.textContent) === null || _el_textContent === undefined ? undefined : _el_textContent.trim();\n        }).join('|');\n    } else if (isElementType.isElementType(element, 'button')) {\n        var _element_textContent;\n        label = (_element_textContent = element.textContent) === null || _element_textContent === undefined ? undefined : _element_textContent.trim();\n    }\n    label = label === null || label === undefined ? undefined : label.replace(/\\n/g, '  ');\n    if (Number(label === null || label === undefined ? undefined : label.length) > 30) {\n        label = `${label === null || label === undefined ? undefined : label.substring(0, 29)}â€¦`;\n    }\n    return label ? `(label=${label})` : '';\n}\n// With the eslint rule and prettier the bitwise operation isn't nice to read\nfunction hasBitFlag(conf, flag) {\n    // eslint-disable-next-line no-bitwise\n    return (conf & flag) > 0;\n}\n\nexports.assertPointerEvents = assertPointerEvents;\nexports.hasPointerEvents = hasPointerEvents;\n"],"mappings":"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","ignoreList":[]}