577507259c0faf687f7e15f35d9049d0
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock the logger to avoid console output during tests
jest.mock('../../src/core/logging/logger', () => ({
    logger: {
        debug: jest.fn(),
        info: jest.fn(),
        warn: jest.fn(),
        error: jest.fn(),
        fatal: jest.fn()
    }
}));
const environment_1 = require("../../src/config/environment");
// Mock import.meta.env
const mockImportMetaEnv = {
    VITE_API_BASE_URL: 'http://localhost:3001',
    VITE_API_TIMEOUT: '5000',
    VITE_ANTHROPIC_API_KEY: 'sk-ant-test-key',
    VITE_OPENAI_API_KEY: 'sk-test-key',
    VITE_AI_PROVIDER: 'anthropic',
    VITE_CORS_ORIGIN: 'http://localhost:5173',
    VITE_RATE_LIMIT_REQUESTS: '100',
    VITE_RATE_LIMIT_WINDOW: '60000',
    VITE_ENABLE_LOGGING: 'true',
    VITE_ENABLE_MONITORING: 'false',
    VITE_ENABLE_CACHE: 'true',
    VITE_MAX_FILE_SIZE: '20971520',
    VITE_MAX_CONCURRENT_REQUESTS: '5',
    VITE_CACHE_TTL: '3600',
    VITE_DEBUG: 'false',
    VITE_RETRY_MAX_ATTEMPTS: '3',
    VITE_RETRY_INITIAL_DELAY: '1000',
    VITE_RETRY_MAX_DELAY: '10000',
    VITE_CIRCUIT_BREAKER_FAILURE_THRESHOLD: '5',
    VITE_CIRCUIT_BREAKER_RESET_TIMEOUT: '60000',
    VITE_CIRCUIT_BREAKER_SUCCESS_THRESHOLD: '2',
    MODE: 'development'
};
describe('Environment Configuration', () => {
    beforeEach(() => {
        // Reset import.meta.env mock
        Object.defineProperty(global, 'import', {
            value: {
                meta: {
                    env: { ...mockImportMetaEnv }
                }
            },
            writable: true
        });
    });
    describe('loadEnvironment', () => {
        it('should load environment with default values', () => {
            const config = (0, environment_1.loadEnvironment)();
            expect(config.API_BASE_URL).toBe('http://localhost:3001');
            expect(config.API_TIMEOUT).toBe(5000);
            expect(config.AI_PROVIDER).toBe('anthropic');
            expect(config.ENABLE_LOGGING).toBe(true);
            expect(config.ENABLE_CACHE).toBe(true);
            expect(config.NODE_ENV).toBe('development');
        });
        it('should validate URL format for API_BASE_URL', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: { ...mockImportMetaEnv, VITE_API_BASE_URL: 'invalid-url' }
                    }
                },
                writable: true
            });
            expect(() => (0, environment_1.loadEnvironment)()).toThrow('Invalid environment configuration');
        });
        it('should validate numeric values', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: { ...mockImportMetaEnv, VITE_API_TIMEOUT: 'invalid-number' }
                    }
                },
                writable: true
            });
            expect(() => (0, environment_1.loadEnvironment)()).toThrow('Invalid environment configuration');
        });
        it('should validate enum values', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: { ...mockImportMetaEnv, VITE_AI_PROVIDER: 'invalid-provider' }
                    }
                },
                writable: true
            });
            expect(() => (0, environment_1.loadEnvironment)()).toThrow('Invalid environment configuration');
        });
        it('should handle missing optional values', () => {
            const envWithoutOptional = { ...mockImportMetaEnv };
            delete envWithoutOptional.VITE_ANTHROPIC_API_KEY;
            delete envWithoutOptional.VITE_OPENAI_API_KEY;
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: envWithoutOptional
                    }
                },
                writable: true
            });
            const config = (0, environment_1.loadEnvironment)();
            expect(config.ANTHROPIC_API_KEY).toBeUndefined();
            expect(config.OPENAI_API_KEY).toBeUndefined();
        });
    });
    describe('Environment Helpers', () => {
        let config;
        beforeEach(() => {
            config = (0, environment_1.loadEnvironment)();
        });
        describe('env.isDevelopment', () => {
            it('should return true for development mode', () => {
                expect(environment_1.env.isDevelopment()).toBe(true);
            });
            it('should return false for production mode', () => {
                Object.defineProperty(global, 'import', {
                    value: {
                        meta: {
                            env: { ...mockImportMetaEnv, MODE: 'production' }
                        }
                    },
                    writable: true
                });
                const prodConfig = (0, environment_1.loadEnvironment)();
                expect(prodConfig.NODE_ENV).toBe('production');
            });
        });
        describe('env.api', () => {
            it('should return API configuration', () => {
                expect(environment_1.env.api.baseUrl()).toBe('http://localhost:3001');
                expect(environment_1.env.api.timeout()).toBe(5000);
            });
        });
        describe('env.ai', () => {
            it('should return AI provider configuration', () => {
                expect(environment_1.env.ai.provider()).toBe('anthropic');
                expect(environment_1.env.ai.anthropicKey()).toBe('sk-ant-test-key');
                expect(environment_1.env.ai.openaiKey()).toBe('sk-test-key');
            });
        });
        describe('env.security', () => {
            it('should return security configuration', () => {
                expect(environment_1.env.security.corsOrigin()).toBe('http://localhost:5173');
                expect(environment_1.env.security.rateLimitRequests()).toBe(100);
                expect(environment_1.env.security.rateLimitWindow()).toBe(60000);
            });
        });
        describe('env.features', () => {
            it('should return feature flags', () => {
                expect(environment_1.env.features.logging()).toBe(true);
                expect(environment_1.env.features.monitoring()).toBe(false);
                expect(environment_1.env.features.cache()).toBe(true);
            });
        });
        describe('env.performance', () => {
            it('should return performance configuration', () => {
                expect(environment_1.env.performance.maxFileSize()).toBe(20971520);
                expect(environment_1.env.performance.maxConcurrentRequests()).toBe(5);
                expect(environment_1.env.performance.cacheTTL()).toBe(3600);
            });
        });
        describe('env.retry', () => {
            it('should return retry configuration', () => {
                expect(environment_1.env.retry.maxAttempts()).toBe(3);
                expect(environment_1.env.retry.initialDelay()).toBe(1000);
                expect(environment_1.env.retry.maxDelay()).toBe(10000);
            });
        });
        describe('env.circuitBreaker', () => {
            it('should return circuit breaker configuration', () => {
                expect(environment_1.env.circuitBreaker.failureThreshold()).toBe(5);
                expect(environment_1.env.circuitBreaker.resetTimeout()).toBe(60000);
                expect(environment_1.env.circuitBreaker.successThreshold()).toBe(2);
            });
        });
    });
    describe('validateProductionEnvironment', () => {
        it('should not throw error in development mode', () => {
            expect(() => (0, environment_1.validateProductionEnvironment)()).not.toThrow();
        });
        it('should throw error for missing required variables in production', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: {
                            ...mockImportMetaEnv,
                            MODE: 'production',
                            VITE_API_BASE_URL: '',
                            VITE_ANTHROPIC_API_KEY: '',
                            VITE_OPENAI_API_KEY: '',
                            VITE_CORS_ORIGIN: ''
                        }
                    }
                },
                writable: true
            });
            const prodConfig = (0, environment_1.loadEnvironment)();
            expect(() => (0, environment_1.validateProductionEnvironment)()).toThrow('Missing required environment variables for production');
        });
        it('should pass validation with all required variables in production', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: {
                            ...mockImportMetaEnv,
                            MODE: 'production',
                            VITE_API_BASE_URL: 'https://api.production.com',
                            VITE_CORS_ORIGIN: 'https://app.production.com'
                        }
                    }
                },
                writable: true
            });
            const prodConfig = (0, environment_1.loadEnvironment)();
            expect(() => (0, environment_1.validateProductionEnvironment)()).not.toThrow();
        });
    });
    describe('getEnvironmentSummary', () => {
        it('should return environment summary', () => {
            const summary = (0, environment_1.getEnvironmentSummary)();
            expect(summary.nodeEnv).toBe('development');
            expect(summary.debug).toBe(false);
            expect(summary.apiBaseUrl).toBe('http://localhost:3001');
            expect(summary.aiProvider).toBe('anthropic');
            expect(summary.features).toEqual({
                logging: true,
                monitoring: false,
                cache: true,
            });
            expect(summary.performance).toEqual({
                maxFileSize: '20MB',
                maxConcurrentRequests: 5,
                cacheTTL: '3600s',
            });
            expect(summary.retry).toEqual({
                maxAttempts: 3,
                initialDelay: '1000ms',
                maxDelay: '10000ms',
            });
            expect(summary.circuitBreaker).toEqual({
                failureThreshold: 5,
                resetTimeout: '60000ms',
                successThreshold: 2,
            });
        });
    });
    describe('Edge Cases', () => {
        it('should handle empty string values', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: {
                            ...mockImportMetaEnv,
                            VITE_API_TIMEOUT: '',
                            VITE_RATE_LIMIT_REQUESTS: ''
                        }
                    }
                },
                writable: true
            });
            const config = (0, environment_1.loadEnvironment)();
            expect(config.API_TIMEOUT).toBe(5000); // Default value
            expect(config.RATE_LIMIT_REQUESTS).toBe(100); // Default value
        });
        it('should handle undefined values', () => {
            const envWithUndefined = { ...mockImportMetaEnv };
            delete envWithUndefined.VITE_API_TIMEOUT;
            delete envWithUndefined.VITE_RATE_LIMIT_REQUESTS;
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: envWithUndefined
                    }
                },
                writable: true
            });
            const config = (0, environment_1.loadEnvironment)();
            expect(config.API_TIMEOUT).toBe(5000); // Default value
            expect(config.RATE_LIMIT_REQUESTS).toBe(100); // Default value
        });
        it('should validate numeric ranges', () => {
            Object.defineProperty(global, 'import', {
                value: {
                    meta: {
                        env: {
                            ...mockImportMetaEnv,
                            VITE_API_TIMEOUT: '0', // Below minimum
                            VITE_MAX_FILE_SIZE: '999999999999' // Above maximum
                        }
                    }
                },
                writable: true
            });
            expect(() => (0, environment_1.loadEnvironment)()).toThrow('Invalid environment configuration');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxzYXJhaFxcUmVwb3NcXENDSCBBeGNlc3MgSW50ZWxsaWdlbmNlIFZpYmVkXFx0ZXN0c1xcdW5pdFxcZW52aXJvbm1lbnQudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQTRCQSx1REFBdUQ7QUFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQywrQkFBK0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2hELE1BQU0sRUFBRTtRQUNOLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNoQixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNqQjtDQUNGLENBQUMsQ0FBQyxDQUFDO0FBckNKLDhEQUEwSDtBQUUxSCx1QkFBdUI7QUFDdkIsTUFBTSxpQkFBaUIsR0FBRztJQUN4QixpQkFBaUIsRUFBRSx1QkFBdUI7SUFDMUMsZ0JBQWdCLEVBQUUsTUFBTTtJQUN4QixzQkFBc0IsRUFBRSxpQkFBaUI7SUFDekMsbUJBQW1CLEVBQUUsYUFBYTtJQUNsQyxnQkFBZ0IsRUFBRSxXQUFXO0lBQzdCLGdCQUFnQixFQUFFLHVCQUF1QjtJQUN6Qyx3QkFBd0IsRUFBRSxLQUFLO0lBQy9CLHNCQUFzQixFQUFFLE9BQU87SUFDL0IsbUJBQW1CLEVBQUUsTUFBTTtJQUMzQixzQkFBc0IsRUFBRSxPQUFPO0lBQy9CLGlCQUFpQixFQUFFLE1BQU07SUFDekIsa0JBQWtCLEVBQUUsVUFBVTtJQUM5Qiw0QkFBNEIsRUFBRSxHQUFHO0lBQ2pDLGNBQWMsRUFBRSxNQUFNO0lBQ3RCLFVBQVUsRUFBRSxPQUFPO0lBQ25CLHVCQUF1QixFQUFFLEdBQUc7SUFDNUIsd0JBQXdCLEVBQUUsTUFBTTtJQUNoQyxvQkFBb0IsRUFBRSxPQUFPO0lBQzdCLHNDQUFzQyxFQUFFLEdBQUc7SUFDM0Msa0NB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QyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHNhcmFoXFxSZXBvc1xcQ0NIIEF4Y2VzcyBJbnRlbGxpZ2VuY2UgVmliZWRcXHRlc3RzXFx1bml0XFxlbnZpcm9ubWVudC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvYWRFbnZpcm9ubWVudCwgZW52LCBnZXRFbnZpcm9ubWVudFN1bW1hcnksIHZhbGlkYXRlUHJvZHVjdGlvbkVudmlyb25tZW50IH0gZnJvbSAnLi4vLi4vc3JjL2NvbmZpZy9lbnZpcm9ubWVudCc7XHJcblxyXG4vLyBNb2NrIGltcG9ydC5tZXRhLmVudlxyXG5jb25zdCBtb2NrSW1wb3J0TWV0YUVudiA9IHtcclxuICBWSVRFX0FQSV9CQVNFX1VSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScsXHJcbiAgVklURV9BUElfVElNRU9VVDogJzUwMDAnLFxyXG4gIFZJVEVfQU5USFJPUElDX0FQSV9LRVk6ICdzay1hbnQtdGVzdC1rZXknLFxyXG4gIFZJVEVfT1BFTkFJX0FQSV9LRVk6ICdzay10ZXN0LWtleScsXHJcbiAgVklURV9BSV9QUk9WSURFUjogJ2FudGhyb3BpYycsXHJcbiAgVklURV9DT1JTX09SSUdJTjogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTE3MycsXHJcbiAgVklURV9SQVRFX0xJTUlUX1JFUVVFU1RTOiAnMTAwJyxcclxuICBWSVRFX1JBVEVfTElNSVRfV0lORE9XOiAnNjAwMDAnLFxyXG4gIFZJVEVfRU5BQkxFX0xPR0dJTkc6ICd0cnVlJyxcclxuICBWSVRFX0VOQUJMRV9NT05JVE9SSU5HOiAnZmFsc2UnLFxyXG4gIFZJVEVfRU5BQkxFX0NBQ0hFOiAndHJ1ZScsXHJcbiAgVklURV9NQVhfRklMRV9TSVpFOiAnMjA5NzE1MjAnLFxyXG4gIFZJVEVfTUFYX0NPTkNVUlJFTlRfUkVRVUVTVFM6ICc1JyxcclxuICBWSVRFX0NBQ0hFX1RUTDogJzM2MDAnLFxyXG4gIFZJVEVfREVCVUc6ICdmYWxzZScsXHJcbiAgVklURV9SRVRSWV9NQVhfQVRURU1QVFM6ICczJyxcclxuICBWSVRFX1JFVFJZX0lOSVRJQUxfREVMQVk6ICcxMDAwJyxcclxuICBWSVRFX1JFVFJZX01BWF9ERUxBWTogJzEwMDAwJyxcclxuICBWSVRFX0NJUkNVSVRfQlJFQUtFUl9GQUlMVVJFX1RIUkVTSE9MRDogJzUnLFxyXG4gIFZJVEVfQ0lSQ1VJVF9CUkVBS0VSX1JFU0VUX1RJTUVPVVQ6ICc2MDAwMCcsXHJcbiAgVklURV9DSVJDVUlUX0JSRUFLRVJfU1VDQ0VTU19USFJFU0hPTEQ6ICcyJyxcclxuICBNT0RFOiAnZGV2ZWxvcG1lbnQnXHJcbn07XHJcblxyXG4vLyBNb2NrIHRoZSBsb2dnZXIgdG8gYXZvaWQgY29uc29sZSBvdXRwdXQgZHVyaW5nIHRlc3RzXHJcbmplc3QubW9jaygnLi4vLi4vc3JjL2NvcmUvbG9nZ2luZy9sb2dnZXInLCAoKSA9PiAoe1xyXG4gIGxvZ2dlcjoge1xyXG4gICAgZGVidWc6IGplc3QuZm4oKSxcclxuICAgIGluZm86IGplc3QuZm4oKSxcclxuICAgIHdhcm46IGplc3QuZm4oKSxcclxuICAgIGVycm9yOiBqZXN0LmZuKCksXHJcbiAgICBmYXRhbDogamVzdC5mbigpXHJcbiAgfVxyXG59KSk7XHJcblxyXG5kZXNjcmliZSgnRW52aXJvbm1lbnQgQ29uZmlndXJhdGlvbicsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIC8vIFJlc2V0IGltcG9ydC5tZXRhLmVudiBtb2NrXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICB2YWx1ZToge1xyXG4gICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgIGVudjogeyAuLi5tb2NrSW1wb3J0TWV0YUVudiB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdsb2FkRW52aXJvbm1lbnQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGxvYWQgZW52aXJvbm1lbnQgd2l0aCBkZWZhdWx0IHZhbHVlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uZmlnID0gbG9hZEVudmlyb25tZW50KCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY29uZmlnLkFQSV9CQVNFX1VSTCkudG9CZSgnaHR0cDovL2xvY2FsaG9zdDozMDAxJyk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuQVBJX1RJTUVPVVQpLnRvQmUoNTAwMCk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuQUlfUFJPVklERVIpLnRvQmUoJ2FudGhyb3BpYycpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLkVOQUJMRV9MT0dHSU5HKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLkVOQUJMRV9DQUNIRSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5OT0RFX0VOVikudG9CZSgnZGV2ZWxvcG1lbnQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgVVJMIGZvcm1hdCBmb3IgQVBJX0JBU0VfVVJMJywgKCkgPT4ge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIGVudjogeyAuLi5tb2NrSW1wb3J0TWV0YUVudiwgVklURV9BUElfQkFTRV9VUkw6ICdpbnZhbGlkLXVybCcgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QoKCkgPT4gbG9hZEVudmlyb25tZW50KCkpLnRvVGhyb3coJ0ludmFsaWQgZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBudW1lcmljIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ2ltcG9ydCcsIHtcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICBlbnY6IHsgLi4ubW9ja0ltcG9ydE1ldGFFbnYsIFZJVEVfQVBJX1RJTUVPVVQ6ICdpbnZhbGlkLW51bWJlcicgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QoKCkgPT4gbG9hZEVudmlyb25tZW50KCkpLnRvVGhyb3coJ0ludmFsaWQgZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBlbnVtIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ2ltcG9ydCcsIHtcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICBlbnY6IHsgLi4ubW9ja0ltcG9ydE1ldGFFbnYsIFZJVEVfQUlfUFJPVklERVI6ICdpbnZhbGlkLXByb3ZpZGVyJyB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdCgoKSA9PiBsb2FkRW52aXJvbm1lbnQoKSkudG9UaHJvdygnSW52YWxpZCBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIG9wdGlvbmFsIHZhbHVlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgZW52V2l0aG91dE9wdGlvbmFsID0geyAuLi5tb2NrSW1wb3J0TWV0YUVudiB9O1xyXG4gICAgICBkZWxldGUgZW52V2l0aG91dE9wdGlvbmFsLlZJVEVfQU5USFJPUElDX0FQSV9LRVk7XHJcbiAgICAgIGRlbGV0ZSBlbnZXaXRob3V0T3B0aW9uYWwuVklURV9PUEVOQUlfQVBJX0tFWTtcclxuXHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsICdpbXBvcnQnLCB7XHJcbiAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgICAgZW52OiBlbnZXaXRob3V0T3B0aW9uYWxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgY29uZmlnID0gbG9hZEVudmlyb25tZW50KCk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuQU5USFJPUElDX0FQSV9LRVkpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5PUEVOQUlfQVBJX0tFWSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFbnZpcm9ubWVudCBIZWxwZXJzJywgKCkgPT4ge1xyXG4gICAgbGV0IGNvbmZpZzogUmV0dXJuVHlwZTx0eXBlb2YgbG9hZEVudmlyb25tZW50PjtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgY29uZmlnID0gbG9hZEVudmlyb25tZW50KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZW52LmlzRGV2ZWxvcG1lbnQnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgZm9yIGRldmVsb3BtZW50IG1vZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGVudi5pc0RldmVsb3BtZW50KCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2UgZm9yIHByb2R1Y3Rpb24gbW9kZScsICgpID0+IHtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICAgIGVudjogeyAuLi5tb2NrSW1wb3J0TWV0YUVudiwgTU9ERTogJ3Byb2R1Y3Rpb24nIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcHJvZENvbmZpZyA9IGxvYWRFbnZpcm9ubWVudCgpO1xyXG4gICAgICAgIGV4cGVjdChwcm9kQ29uZmlnLk5PREVfRU5WKS50b0JlKCdwcm9kdWN0aW9uJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2Vudi5hcGknLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIEFQSSBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChlbnYuYXBpLmJhc2VVcmwoKSkudG9CZSgnaHR0cDovL2xvY2FsaG9zdDozMDAxJyk7XHJcbiAgICAgICAgZXhwZWN0KGVudi5hcGkudGltZW91dCgpKS50b0JlKDUwMDApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdlbnYuYWknLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIEFJIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGVudi5haS5wcm92aWRlcigpKS50b0JlKCdhbnRocm9waWMnKTtcclxuICAgICAgICBleHBlY3QoZW52LmFpLmFudGhyb3BpY0tleSgpKS50b0JlKCdzay1hbnQtdGVzdC1rZXknKTtcclxuICAgICAgICBleHBlY3QoZW52LmFpLm9wZW5haUtleSgpKS50b0JlKCdzay10ZXN0LWtleScpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdlbnYuc2VjdXJpdHknLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHNlY3VyaXR5IGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGVudi5zZWN1cml0eS5jb3JzT3JpZ2luKCkpLnRvQmUoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTE3MycpO1xyXG4gICAgICAgIGV4cGVjdChlbnYuc2VjdXJpdHkucmF0ZUxpbWl0UmVxdWVzdHMoKSkudG9CZSgxMDApO1xyXG4gICAgICAgIGV4cGVjdChlbnYuc2VjdXJpdHkucmF0ZUxpbWl0V2luZG93KCkpLnRvQmUoNjAwMDApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdlbnYuZmVhdHVyZXMnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGZlYXR1cmUgZmxhZ3MnLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGVudi5mZWF0dXJlcy5sb2dnaW5nKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgZXhwZWN0KGVudi5mZWF0dXJlcy5tb25pdG9yaW5nKCkpLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgIGV4cGVjdChlbnYuZmVhdHVyZXMuY2FjaGUoKSkudG9CZSh0cnVlKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZW52LnBlcmZvcm1hbmNlJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBwZXJmb3JtYW5jZSBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChlbnYucGVyZm9ybWFuY2UubWF4RmlsZVNpemUoKSkudG9CZSgyMDk3MTUyMCk7XHJcbiAgICAgICAgZXhwZWN0KGVudi5wZXJmb3JtYW5jZS5tYXhDb25jdXJyZW50UmVxdWVzdHMoKSkudG9CZSg1KTtcclxuICAgICAgICBleHBlY3QoZW52LnBlcmZvcm1hbmNlLmNhY2hlVFRMKCkpLnRvQmUoMzYwMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2Vudi5yZXRyeScsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gcmV0cnkgY29uZmlndXJhdGlvbicsICgpID0+IHtcclxuICAgICAgICBleHBlY3QoZW52LnJldHJ5Lm1heEF0dGVtcHRzKCkpLnRvQmUoMyk7XHJcbiAgICAgICAgZXhwZWN0KGVudi5yZXRyeS5pbml0aWFsRGVsYXkoKSkudG9CZSgxMDAwKTtcclxuICAgICAgICBleHBlY3QoZW52LnJldHJ5Lm1heERlbGF5KCkpLnRvQmUoMTAwMDApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdlbnYuY2lyY3VpdEJyZWFrZXInLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGNpcmN1aXQgYnJlYWtlciBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChlbnYuY2lyY3VpdEJyZWFrZXIuZmFpbHVyZVRocmVzaG9sZCgpKS50b0JlKDUpO1xyXG4gICAgICAgIGV4cGVjdChlbnYuY2lyY3VpdEJyZWFrZXIucmVzZXRUaW1lb3V0KCkpLnRvQmUoNjAwMDApO1xyXG4gICAgICAgIGV4cGVjdChlbnYuY2lyY3VpdEJyZWFrZXIuc3VjY2Vzc1RocmVzaG9sZCgpKS50b0JlKDIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgndmFsaWRhdGVQcm9kdWN0aW9uRW52aXJvbm1lbnQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIG5vdCB0aHJvdyBlcnJvciBpbiBkZXZlbG9wbWVudCBtb2RlJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVQcm9kdWN0aW9uRW52aXJvbm1lbnQoKSkubm90LnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIG1pc3NpbmcgcmVxdWlyZWQgdmFyaWFibGVzIGluIHByb2R1Y3Rpb24nLCAoKSA9PiB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsICdpbXBvcnQnLCB7XHJcbiAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgICAgZW52OiB7IFxyXG4gICAgICAgICAgICAgIC4uLm1vY2tJbXBvcnRNZXRhRW52LCBcclxuICAgICAgICAgICAgICBNT0RFOiAncHJvZHVjdGlvbicsXHJcbiAgICAgICAgICAgICAgVklURV9BUElfQkFTRV9VUkw6ICcnLFxyXG4gICAgICAgICAgICAgIFZJVEVfQU5USFJPUElDX0FQSV9LRVk6ICcnLFxyXG4gICAgICAgICAgICAgIFZJVEVfT1BFTkFJX0FQSV9LRVk6ICcnLFxyXG4gICAgICAgICAgICAgIFZJVEVfQ09SU19PUklHSU46ICcnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcHJvZENvbmZpZyA9IGxvYWRFbnZpcm9ubWVudCgpO1xyXG4gICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVQcm9kdWN0aW9uRW52aXJvbm1lbnQoKSkudG9UaHJvdygnTWlzc2luZyByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIHByb2R1Y3Rpb24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcGFzcyB2YWxpZGF0aW9uIHdpdGggYWxsIHJlcXVpcmVkIHZhcmlhYmxlcyBpbiBwcm9kdWN0aW9uJywgKCkgPT4ge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIGVudjogeyBcclxuICAgICAgICAgICAgICAuLi5tb2NrSW1wb3J0TWV0YUVudiwgXHJcbiAgICAgICAgICAgICAgTU9ERTogJ3Byb2R1Y3Rpb24nLFxyXG4gICAgICAgICAgICAgIFZJVEVfQVBJX0JBU0VfVVJMOiAnaHR0cHM6Ly9hcGkucHJvZHVjdGlvbi5jb20nLFxyXG4gICAgICAgICAgICAgIFZJVEVfQ09SU19PUklHSU46ICdodHRwczovL2FwcC5wcm9kdWN0aW9uLmNvbSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBwcm9kQ29uZmlnID0gbG9hZEVudmlyb25tZW50KCk7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZVByb2R1Y3Rpb25FbnZpcm9ubWVudCgpKS5ub3QudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRFbnZpcm9ubWVudFN1bW1hcnknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbnZpcm9ubWVudCBzdW1tYXJ5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdW1tYXJ5ID0gZ2V0RW52aXJvbm1lbnRTdW1tYXJ5KCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc3VtbWFyeS5ub2RlRW52KS50b0JlKCdkZXZlbG9wbWVudCcpO1xyXG4gICAgICBleHBlY3Qoc3VtbWFyeS5kZWJ1ZykudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChzdW1tYXJ5LmFwaUJhc2VVcmwpLnRvQmUoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScpO1xyXG4gICAgICBleHBlY3Qoc3VtbWFyeS5haVByb3ZpZGVyKS50b0JlKCdhbnRocm9waWMnKTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuZmVhdHVyZXMpLnRvRXF1YWwoe1xyXG4gICAgICAgIGxvZ2dpbmc6IHRydWUsXHJcbiAgICAgICAgbW9uaXRvcmluZzogZmFsc2UsXHJcbiAgICAgICAgY2FjaGU6IHRydWUsXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3Qoc3VtbWFyeS5wZXJmb3JtYW5jZSkudG9FcXVhbCh7XHJcbiAgICAgICAgbWF4RmlsZVNpemU6ICcyME1CJyxcclxuICAgICAgICBtYXhDb25jdXJyZW50UmVxdWVzdHM6IDUsXHJcbiAgICAgICAgY2FjaGVUVEw6ICczNjAwcycsXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3Qoc3VtbWFyeS5yZXRyeSkudG9FcXVhbCh7XHJcbiAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXHJcbiAgICAgICAgaW5pdGlhbERlbGF5OiAnMTAwMG1zJyxcclxuICAgICAgICBtYXhEZWxheTogJzEwMDAwbXMnLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuY2lyY3VpdEJyZWFrZXIpLnRvRXF1YWwoe1xyXG4gICAgICAgIGZhaWx1cmVUaHJlc2hvbGQ6IDUsXHJcbiAgICAgICAgcmVzZXRUaW1lb3V0OiAnNjAwMDBtcycsXHJcbiAgICAgICAgc3VjY2Vzc1RocmVzaG9sZDogMixcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBzdHJpbmcgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIGVudjogeyBcclxuICAgICAgICAgICAgICAuLi5tb2NrSW1wb3J0TWV0YUVudixcclxuICAgICAgICAgICAgICBWSVRFX0FQSV9USU1FT1VUOiAnJyxcclxuICAgICAgICAgICAgICBWSVRFX1JBVEVfTElNSVRfUkVRVUVTVFM6ICcnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgY29uZmlnID0gbG9hZEVudmlyb25tZW50KCk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuQVBJX1RJTUVPVVQpLnRvQmUoNTAwMCk7IC8vIERlZmF1bHQgdmFsdWVcclxuICAgICAgZXhwZWN0KGNvbmZpZy5SQVRFX0xJTUlUX1JFUVVFU1RTKS50b0JlKDEwMCk7IC8vIERlZmF1bHQgdmFsdWVcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVudldpdGhVbmRlZmluZWQgPSB7IC4uLm1vY2tJbXBvcnRNZXRhRW52IH07XHJcbiAgICAgIGRlbGV0ZSBlbnZXaXRoVW5kZWZpbmVkLlZJVEVfQVBJX1RJTUVPVVQ7XHJcbiAgICAgIGRlbGV0ZSBlbnZXaXRoVW5kZWZpbmVkLlZJVEVfUkFURV9MSU1JVF9SRVFVRVNUUztcclxuXHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsICdpbXBvcnQnLCB7XHJcbiAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgICAgZW52OiBlbnZXaXRoVW5kZWZpbmVkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGxvYWRFbnZpcm9ubWVudCgpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLkFQSV9USU1FT1VUKS50b0JlKDUwMDApOyAvLyBEZWZhdWx0IHZhbHVlXHJcbiAgICAgIGV4cGVjdChjb25maWcuUkFURV9MSU1JVF9SRVFVRVNUUykudG9CZSgxMDApOyAvLyBEZWZhdWx0IHZhbHVlXHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIG51bWVyaWMgcmFuZ2VzJywgKCkgPT4ge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnaW1wb3J0Jywge1xyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIGVudjogeyBcclxuICAgICAgICAgICAgICAuLi5tb2NrSW1wb3J0TWV0YUVudixcclxuICAgICAgICAgICAgICBWSVRFX0FQSV9USU1FT1VUOiAnMCcsIC8vIEJlbG93IG1pbmltdW1cclxuICAgICAgICAgICAgICBWSVRFX01BWF9GSUxFX1NJWkU6ICc5OTk5OTk5OTk5OTknIC8vIEFib3ZlIG1heGltdW1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QoKCkgPT4gbG9hZEVudmlyb25tZW50KCkpLnRvVGhyb3coJ0ludmFsaWQgZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=