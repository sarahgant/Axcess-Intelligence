2a614308f262414517e14a6afb30c42c
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createDOMElementFilter;
exports.test = void 0;
/**
 * Source: https://github.com/facebook/jest/blob/e7bb6a1e26ffab90611b2593912df15b69315611/packages/pretty-format/src/plugins/DOMElement.ts
 */
/* eslint-disable -- trying to stay as close to the original as possible */
/* istanbul ignore file */

function escapeHTML(str) {
  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');
}
// Return empty string if keys is empty.
const printProps = (keys, props, config, indentation, depth, refs, printer) => {
  const indentationNext = indentation + config.indent;
  const colors = config.colors;
  return keys.map(key => {
    const value = props[key];
    let printed = printer(value, config, indentationNext, depth, refs);
    if (typeof value !== 'string') {
      if (printed.indexOf('\n') !== -1) {
        printed = config.spacingOuter + indentationNext + printed + config.spacingOuter + indentation;
      }
      printed = '{' + printed + '}';
    }
    return config.spacingInner + indentation + colors.prop.open + key + colors.prop.close + '=' + colors.value.open + printed + colors.value.close;
  }).join('');
};

// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType#node_type_constants
const NodeTypeTextNode = 3;

// Return empty string if children is empty.
const printChildren = (children, config, indentation, depth, refs, printer) => children.map(child => {
  const printedChild = typeof child === 'string' ? printText(child, config) : printer(child, config, indentation, depth, refs);
  if (printedChild === '' && typeof child === 'object' && child !== null && child.nodeType !== NodeTypeTextNode) {
    // A plugin serialized this Node to '' meaning we should ignore it.
    return '';
  }
  return config.spacingOuter + indentation + printedChild;
}).join('');
const printText = (text, config) => {
  const contentColor = config.colors.content;
  return contentColor.open + escapeHTML(text) + contentColor.close;
};
const printComment = (comment, config) => {
  const commentColor = config.colors.comment;
  return commentColor.open + '<!--' + escapeHTML(comment) + '-->' + commentColor.close;
};

// Separate the functions to format props, children, and element,
// so a plugin could override a particular function, if needed.
// Too bad, so sad: the traditional (but unnecessary) space
// in a self-closing tagColor requires a second test of printedProps.
const printElement = (type, printedProps, printedChildren, config, indentation) => {
  const tagColor = config.colors.tag;
  return tagColor.open + '<' + type + (printedProps && tagColor.close + printedProps + config.spacingOuter + indentation + tagColor.open) + (printedChildren ? '>' + tagColor.close + printedChildren + config.spacingOuter + indentation + tagColor.open + '</' + type : (printedProps && !config.min ? '' : ' ') + '/') + '>' + tagColor.close;
};
const printElementAsLeaf = (type, config) => {
  const tagColor = config.colors.tag;
  return tagColor.open + '<' + type + tagColor.close + ' â€¦' + tagColor.open + ' />' + tagColor.close;
};
const ELEMENT_NODE = 1;
const TEXT_NODE = 3;
const COMMENT_NODE = 8;
const FRAGMENT_NODE = 11;
const ELEMENT_REGEXP = /^((HTML|SVG)\w*)?Element$/;
const testNode = val => {
  const constructorName = val.constructor.name;
  const {
    nodeType,
    tagName
  } = val;
  const isCustomElement = typeof tagName === 'string' && tagName.includes('-') || typeof val.hasAttribute === 'function' && val.hasAttribute('is');
  return nodeType === ELEMENT_NODE && (ELEMENT_REGEXP.test(constructorName) || isCustomElement) || nodeType === TEXT_NODE && constructorName === 'Text' || nodeType === COMMENT_NODE && constructorName === 'Comment' || nodeType === FRAGMENT_NODE && constructorName === 'DocumentFragment';
};
const test = val => {
  var _val$constructor;
  return (val == null || (_val$constructor = val.constructor) == null ? void 0 : _val$constructor.name) && testNode(val);
};
exports.test = test;
function nodeIsText(node) {
  return node.nodeType === TEXT_NODE;
}
function nodeIsComment(node) {
  return node.nodeType === COMMENT_NODE;
}
function nodeIsFragment(node) {
  return node.nodeType === FRAGMENT_NODE;
}
function createDOMElementFilter(filterNode) {
  return {
    test: val => {
      var _val$constructor2;
      return (val == null || (_val$constructor2 = val.constructor) == null ? void 0 : _val$constructor2.name) && testNode(val);
    },
    serialize: (node, config, indentation, depth, refs, printer) => {
      if (nodeIsText(node)) {
        return printText(node.data, config);
      }
      if (nodeIsComment(node)) {
        return printComment(node.data, config);
      }
      const type = nodeIsFragment(node) ? `DocumentFragment` : node.tagName.toLowerCase();
      if (++depth > config.maxDepth) {
        return printElementAsLeaf(type, config);
      }
      return printElement(type, printProps(nodeIsFragment(node) ? [] : Array.from(node.attributes).map(attr => attr.name).sort(), nodeIsFragment(node) ? {} : Array.from(node.attributes).reduce((props, attribute) => {
        props[attribute.name] = attribute.value;
        return props;
      }, {}), config, indentation + config.indent, depth, refs, printer), printChildren(Array.prototype.slice.call(node.childNodes || node.children).filter(filterNode), config, indentation + config.indent, depth, refs, printer), config, indentation);
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJjcmVhdGVET01FbGVtZW50RmlsdGVyIiwidGVzdCIsImVzY2FwZUhUTUwiLCJzdHIiLCJyZXBsYWNlIiwicHJpbnRQcm9wcyIsImtleXMiLCJwcm9wcyIsImNvbmZpZyIsImluZGVudGF0aW9uIiwiZGVwdGgiLCJyZWZzIiwicHJpbnRlciIsImluZGVudGF0aW9uTmV4dCIsImluZGVudCIsImNvbG9ycyIsIm1hcCIsImtleSIsInByaW50ZWQiLCJpbmRleE9mIiwic3BhY2luZ091dGVyIiwic3BhY2luZ0lubmVyIiwicHJvcCIsIm9wZW4iLCJjbG9zZSIsImpvaW4iLCJOb2RlVHlwZVRleHROb2RlIiwicHJpbnRDaGlsZHJlbiIsImNoaWxkcmVuIiwiY2hpbGQiLCJwcmludGVkQ2hpbGQiLCJwcmludFRleHQiLCJub2RlVHlwZSIsInRleHQiLCJjb250ZW50Q29sb3IiLCJjb250ZW50IiwicHJpbnRDb21tZW50IiwiY29tbWVudCIsImNvbW1lbnRDb2xvciIsInByaW50RWxlbWVudCIsInR5cGUiLCJwcmludGVkUHJvcHMiLCJwcmludGVkQ2hpbGRyZW4iLCJ0YWdDb2xvciIsInRhZyIsIm1pbiIsInByaW50RWxlbWVudEFzTGVhZiIsIkVMRU1FTlRfTk9ERSIsIlRFWFRfTk9ERSIsIkNPTU1FTlRfTk9ERSIsIkZSQUdNRU5UX05PREUiLCJFTEVNRU5UX1JFR0VYUCIsInRlc3ROb2RlIiwidmFsIiwiY29uc3RydWN0b3JOYW1lIiwiY29uc3RydWN0b3IiLCJuYW1lIiwidGFnTmFtZSIsImlzQ3VzdG9tRWxlbWVudCIsImluY2x1ZGVzIiwiaGFzQXR0cmlidXRlIiwiX3ZhbCRjb25zdHJ1Y3RvciIsIm5vZGVJc1RleHQiLCJub2RlIiwibm9kZUlzQ29tbWVudCIsIm5vZGVJc0ZyYWdtZW50IiwiZmlsdGVyTm9kZSIsIl92YWwkY29uc3RydWN0b3IyIiwic2VyaWFsaXplIiwiZGF0YSIsInRvTG93ZXJDYXNlIiwibWF4RGVwdGgiLCJBcnJheSIsImZyb20iLCJhdHRyaWJ1dGVzIiwiYXR0ciIsInNvcnQiLCJyZWR1Y2UiLCJhdHRyaWJ1dGUiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJjaGlsZE5vZGVzIiwiZmlsdGVyIl0sInNvdXJjZXMiOlsiRE9NRWxlbWVudEZpbHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGNyZWF0ZURPTUVsZW1lbnRGaWx0ZXI7XG5leHBvcnRzLnRlc3QgPSB2b2lkIDA7XG4vKipcbiAqIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2plc3QvYmxvYi9lN2JiNmExZTI2ZmZhYjkwNjExYjI1OTM5MTJkZjE1YjY5MzE1NjExL3BhY2thZ2VzL3ByZXR0eS1mb3JtYXQvc3JjL3BsdWdpbnMvRE9NRWxlbWVudC50c1xuICovXG4vKiBlc2xpbnQtZGlzYWJsZSAtLSB0cnlpbmcgdG8gc3RheSBhcyBjbG9zZSB0byB0aGUgb3JpZ2luYWwgYXMgcG9zc2libGUgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cbmZ1bmN0aW9uIGVzY2FwZUhUTUwoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcbn1cbi8vIFJldHVybiBlbXB0eSBzdHJpbmcgaWYga2V5cyBpcyBlbXB0eS5cbmNvbnN0IHByaW50UHJvcHMgPSAoa2V5cywgcHJvcHMsIGNvbmZpZywgaW5kZW50YXRpb24sIGRlcHRoLCByZWZzLCBwcmludGVyKSA9PiB7XG4gIGNvbnN0IGluZGVudGF0aW9uTmV4dCA9IGluZGVudGF0aW9uICsgY29uZmlnLmluZGVudDtcbiAgY29uc3QgY29sb3JzID0gY29uZmlnLmNvbG9ycztcbiAgcmV0dXJuIGtleXMubWFwKGtleSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBwcm9wc1trZXldO1xuICAgIGxldCBwcmludGVkID0gcHJpbnRlcih2YWx1ZSwgY29uZmlnLCBpbmRlbnRhdGlvbk5leHQsIGRlcHRoLCByZWZzKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHByaW50ZWQuaW5kZXhPZignXFxuJykgIT09IC0xKSB7XG4gICAgICAgIHByaW50ZWQgPSBjb25maWcuc3BhY2luZ091dGVyICsgaW5kZW50YXRpb25OZXh0ICsgcHJpbnRlZCArIGNvbmZpZy5zcGFjaW5nT3V0ZXIgKyBpbmRlbnRhdGlvbjtcbiAgICAgIH1cbiAgICAgIHByaW50ZWQgPSAneycgKyBwcmludGVkICsgJ30nO1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnLnNwYWNpbmdJbm5lciArIGluZGVudGF0aW9uICsgY29sb3JzLnByb3Aub3BlbiArIGtleSArIGNvbG9ycy5wcm9wLmNsb3NlICsgJz0nICsgY29sb3JzLnZhbHVlLm9wZW4gKyBwcmludGVkICsgY29sb3JzLnZhbHVlLmNsb3NlO1xuICB9KS5qb2luKCcnKTtcbn07XG5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob2RlL25vZGVUeXBlI25vZGVfdHlwZV9jb25zdGFudHNcbmNvbnN0IE5vZGVUeXBlVGV4dE5vZGUgPSAzO1xuXG4vLyBSZXR1cm4gZW1wdHkgc3RyaW5nIGlmIGNoaWxkcmVuIGlzIGVtcHR5LlxuY29uc3QgcHJpbnRDaGlsZHJlbiA9IChjaGlsZHJlbiwgY29uZmlnLCBpbmRlbnRhdGlvbiwgZGVwdGgsIHJlZnMsIHByaW50ZXIpID0+IGNoaWxkcmVuLm1hcChjaGlsZCA9PiB7XG4gIGNvbnN0IHByaW50ZWRDaGlsZCA9IHR5cGVvZiBjaGlsZCA9PT0gJ3N0cmluZycgPyBwcmludFRleHQoY2hpbGQsIGNvbmZpZykgOiBwcmludGVyKGNoaWxkLCBjb25maWcsIGluZGVudGF0aW9uLCBkZXB0aCwgcmVmcyk7XG4gIGlmIChwcmludGVkQ2hpbGQgPT09ICcnICYmIHR5cGVvZiBjaGlsZCA9PT0gJ29iamVjdCcgJiYgY2hpbGQgIT09IG51bGwgJiYgY2hpbGQubm9kZVR5cGUgIT09IE5vZGVUeXBlVGV4dE5vZGUpIHtcbiAgICAvLyBBIHBsdWdpbiBzZXJpYWxpemVkIHRoaXMgTm9kZSB0byAnJyBtZWFuaW5nIHdlIHNob3VsZCBpZ25vcmUgaXQuXG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHJldHVybiBjb25maWcuc3BhY2luZ091dGVyICsgaW5kZW50YXRpb24gKyBwcmludGVkQ2hpbGQ7XG59KS5qb2luKCcnKTtcbmNvbnN0IHByaW50VGV4dCA9ICh0ZXh0LCBjb25maWcpID0+IHtcbiAgY29uc3QgY29udGVudENvbG9yID0gY29uZmlnLmNvbG9ycy5jb250ZW50O1xuICByZXR1cm4gY29udGVudENvbG9yLm9wZW4gKyBlc2NhcGVIVE1MKHRleHQpICsgY29udGVudENvbG9yLmNsb3NlO1xufTtcbmNvbnN0IHByaW50Q29tbWVudCA9IChjb21tZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgY29tbWVudENvbG9yID0gY29uZmlnLmNvbG9ycy5jb21tZW50O1xuICByZXR1cm4gY29tbWVudENvbG9yLm9wZW4gKyAnPCEtLScgKyBlc2NhcGVIVE1MKGNvbW1lbnQpICsgJy0tPicgKyBjb21tZW50Q29sb3IuY2xvc2U7XG59O1xuXG4vLyBTZXBhcmF0ZSB0aGUgZnVuY3Rpb25zIHRvIGZvcm1hdCBwcm9wcywgY2hpbGRyZW4sIGFuZCBlbGVtZW50LFxuLy8gc28gYSBwbHVnaW4gY291bGQgb3ZlcnJpZGUgYSBwYXJ0aWN1bGFyIGZ1bmN0aW9uLCBpZiBuZWVkZWQuXG4vLyBUb28gYmFkLCBzbyBzYWQ6IHRoZSB0cmFkaXRpb25hbCAoYnV0IHVubmVjZXNzYXJ5KSBzcGFjZVxuLy8gaW4gYSBzZWxmLWNsb3NpbmcgdGFnQ29sb3IgcmVxdWlyZXMgYSBzZWNvbmQgdGVzdCBvZiBwcmludGVkUHJvcHMuXG5jb25zdCBwcmludEVsZW1lbnQgPSAodHlwZSwgcHJpbnRlZFByb3BzLCBwcmludGVkQ2hpbGRyZW4sIGNvbmZpZywgaW5kZW50YXRpb24pID0+IHtcbiAgY29uc3QgdGFnQ29sb3IgPSBjb25maWcuY29sb3JzLnRhZztcbiAgcmV0dXJuIHRhZ0NvbG9yLm9wZW4gKyAnPCcgKyB0eXBlICsgKHByaW50ZWRQcm9wcyAmJiB0YWdDb2xvci5jbG9zZSArIHByaW50ZWRQcm9wcyArIGNvbmZpZy5zcGFjaW5nT3V0ZXIgKyBpbmRlbnRhdGlvbiArIHRhZ0NvbG9yLm9wZW4pICsgKHByaW50ZWRDaGlsZHJlbiA/ICc+JyArIHRhZ0NvbG9yLmNsb3NlICsgcHJpbnRlZENoaWxkcmVuICsgY29uZmlnLnNwYWNpbmdPdXRlciArIGluZGVudGF0aW9uICsgdGFnQ29sb3Iub3BlbiArICc8LycgKyB0eXBlIDogKHByaW50ZWRQcm9wcyAmJiAhY29uZmlnLm1pbiA/ICcnIDogJyAnKSArICcvJykgKyAnPicgKyB0YWdDb2xvci5jbG9zZTtcbn07XG5jb25zdCBwcmludEVsZW1lbnRBc0xlYWYgPSAodHlwZSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IHRhZ0NvbG9yID0gY29uZmlnLmNvbG9ycy50YWc7XG4gIHJldHVybiB0YWdDb2xvci5vcGVuICsgJzwnICsgdHlwZSArIHRhZ0NvbG9yLmNsb3NlICsgJyDigKYnICsgdGFnQ29sb3Iub3BlbiArICcgLz4nICsgdGFnQ29sb3IuY2xvc2U7XG59O1xuY29uc3QgRUxFTUVOVF9OT0RFID0gMTtcbmNvbnN0IFRFWFRfTk9ERSA9IDM7XG5jb25zdCBDT01NRU5UX05PREUgPSA4O1xuY29uc3QgRlJBR01FTlRfTk9ERSA9IDExO1xuY29uc3QgRUxFTUVOVF9SRUdFWFAgPSAvXigoSFRNTHxTVkcpXFx3Kik/RWxlbWVudCQvO1xuY29uc3QgdGVzdE5vZGUgPSB2YWwgPT4ge1xuICBjb25zdCBjb25zdHJ1Y3Rvck5hbWUgPSB2YWwuY29uc3RydWN0b3IubmFtZTtcbiAgY29uc3Qge1xuICAgIG5vZGVUeXBlLFxuICAgIHRhZ05hbWVcbiAgfSA9IHZhbDtcbiAgY29uc3QgaXNDdXN0b21FbGVtZW50ID0gdHlwZW9mIHRhZ05hbWUgPT09ICdzdHJpbmcnICYmIHRhZ05hbWUuaW5jbHVkZXMoJy0nKSB8fCB0eXBlb2YgdmFsLmhhc0F0dHJpYnV0ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWwuaGFzQXR0cmlidXRlKCdpcycpO1xuICByZXR1cm4gbm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSAmJiAoRUxFTUVOVF9SRUdFWFAudGVzdChjb25zdHJ1Y3Rvck5hbWUpIHx8IGlzQ3VzdG9tRWxlbWVudCkgfHwgbm9kZVR5cGUgPT09IFRFWFRfTk9ERSAmJiBjb25zdHJ1Y3Rvck5hbWUgPT09ICdUZXh0JyB8fCBub2RlVHlwZSA9PT0gQ09NTUVOVF9OT0RFICYmIGNvbnN0cnVjdG9yTmFtZSA9PT0gJ0NvbW1lbnQnIHx8IG5vZGVUeXBlID09PSBGUkFHTUVOVF9OT0RFICYmIGNvbnN0cnVjdG9yTmFtZSA9PT0gJ0RvY3VtZW50RnJhZ21lbnQnO1xufTtcbmNvbnN0IHRlc3QgPSB2YWwgPT4ge1xuICB2YXIgX3ZhbCRjb25zdHJ1Y3RvcjtcbiAgcmV0dXJuICh2YWwgPT0gbnVsbCB8fCAoX3ZhbCRjb25zdHJ1Y3RvciA9IHZhbC5jb25zdHJ1Y3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF92YWwkY29uc3RydWN0b3IubmFtZSkgJiYgdGVzdE5vZGUodmFsKTtcbn07XG5leHBvcnRzLnRlc3QgPSB0ZXN0O1xuZnVuY3Rpb24gbm9kZUlzVGV4dChub2RlKSB7XG4gIHJldHVybiBub2RlLm5vZGVUeXBlID09PSBURVhUX05PREU7XG59XG5mdW5jdGlvbiBub2RlSXNDb21tZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IENPTU1FTlRfTk9ERTtcbn1cbmZ1bmN0aW9uIG5vZGVJc0ZyYWdtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IEZSQUdNRU5UX05PREU7XG59XG5mdW5jdGlvbiBjcmVhdGVET01FbGVtZW50RmlsdGVyKGZpbHRlck5vZGUpIHtcbiAgcmV0dXJuIHtcbiAgICB0ZXN0OiB2YWwgPT4ge1xuICAgICAgdmFyIF92YWwkY29uc3RydWN0b3IyO1xuICAgICAgcmV0dXJuICh2YWwgPT0gbnVsbCB8fCAoX3ZhbCRjb25zdHJ1Y3RvcjIgPSB2YWwuY29uc3RydWN0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfdmFsJGNvbnN0cnVjdG9yMi5uYW1lKSAmJiB0ZXN0Tm9kZSh2YWwpO1xuICAgIH0sXG4gICAgc2VyaWFsaXplOiAobm9kZSwgY29uZmlnLCBpbmRlbnRhdGlvbiwgZGVwdGgsIHJlZnMsIHByaW50ZXIpID0+IHtcbiAgICAgIGlmIChub2RlSXNUZXh0KG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBwcmludFRleHQobm9kZS5kYXRhLCBjb25maWcpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGVJc0NvbW1lbnQobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHByaW50Q29tbWVudChub2RlLmRhdGEsIGNvbmZpZyk7XG4gICAgICB9XG4gICAgICBjb25zdCB0eXBlID0gbm9kZUlzRnJhZ21lbnQobm9kZSkgPyBgRG9jdW1lbnRGcmFnbWVudGAgOiBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICgrK2RlcHRoID4gY29uZmlnLm1heERlcHRoKSB7XG4gICAgICAgIHJldHVybiBwcmludEVsZW1lbnRBc0xlYWYodHlwZSwgY29uZmlnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcmludEVsZW1lbnQodHlwZSwgcHJpbnRQcm9wcyhub2RlSXNGcmFnbWVudChub2RlKSA/IFtdIDogQXJyYXkuZnJvbShub2RlLmF0dHJpYnV0ZXMpLm1hcChhdHRyID0+IGF0dHIubmFtZSkuc29ydCgpLCBub2RlSXNGcmFnbWVudChub2RlKSA/IHt9IDogQXJyYXkuZnJvbShub2RlLmF0dHJpYnV0ZXMpLnJlZHVjZSgocHJvcHMsIGF0dHJpYnV0ZSkgPT4ge1xuICAgICAgICBwcm9wc1thdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGUudmFsdWU7XG4gICAgICAgIHJldHVybiBwcm9wcztcbiAgICAgIH0sIHt9KSwgY29uZmlnLCBpbmRlbnRhdGlvbiArIGNvbmZpZy5pbmRlbnQsIGRlcHRoLCByZWZzLCBwcmludGVyKSwgcHJpbnRDaGlsZHJlbihBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChub2RlLmNoaWxkTm9kZXMgfHwgbm9kZS5jaGlsZHJlbikuZmlsdGVyKGZpbHRlck5vZGUpLCBjb25maWcsIGluZGVudGF0aW9uICsgY29uZmlnLmluZGVudCwgZGVwdGgsIHJlZnMsIHByaW50ZXIpLCBjb25maWcsIGluZGVudGF0aW9uKTtcbiAgICB9XG4gIH07XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUMzQ0MsS0FBSyxFQUFFO0FBQ1QsQ0FBQyxDQUFDO0FBQ0ZELE9BQU8sQ0FBQ0UsT0FBTyxHQUFHQyxzQkFBc0I7QUFDeENILE9BQU8sQ0FBQ0ksSUFBSSxHQUFHLEtBQUssQ0FBQztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNDLFVBQVVBLENBQUNDLEdBQUcsRUFBRTtFQUN2QixPQUFPQSxHQUFHLENBQUNDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUNBLE9BQU8sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDO0FBQ3hEO0FBQ0E7QUFDQSxNQUFNQyxVQUFVLEdBQUdBLENBQUNDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUVDLFdBQVcsRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLE9BQU8sS0FBSztFQUM3RSxNQUFNQyxlQUFlLEdBQUdKLFdBQVcsR0FBR0QsTUFBTSxDQUFDTSxNQUFNO0VB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