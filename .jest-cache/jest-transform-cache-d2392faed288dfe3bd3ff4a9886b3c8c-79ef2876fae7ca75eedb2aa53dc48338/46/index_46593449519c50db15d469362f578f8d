6c1cc839fbec0ed7dd1269c5e5f8e007
'use strict';

var buttons = require('./buttons.js');
var device = require('./device.js');
var mouse = require('./mouse.js');
var pointer = require('./pointer.js');
function _define_property(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
class PointerHost {
  isKeyPressed(keyDef) {
    return this.devices.get(keyDef.pointerType).isPressed(keyDef);
  }
  async press(instance, keyDef, position) {
    this.devices.get(keyDef.pointerType).addPressed(keyDef);
    this.buttons.down(keyDef);
    const pointerName = this.getPointerName(keyDef);
    const pointer = keyDef.pointerType === 'touch' ? this.pointers.new(pointerName, keyDef.pointerType, this.buttons) : this.pointers.get(pointerName);
    // TODO: deprecate the following implicit setting of position
    pointer.position = position;
    if (pointer.pointerType !== 'touch') {
      this.mouse.position = position;
    }
    if (pointer.pointerType === 'touch') {
      pointer.init(instance);
    }
    pointer.down(instance, keyDef.button);
    if (pointer.pointerType !== 'touch') {
      this.mouse.down(instance, keyDef, pointer.isPrevented);
    }
  }
  async move(instance, pointerName, position) {
    const pointer = this.pointers.get(pointerName);
    // In (some?) browsers this order of events can be observed.
    // This interweaving of events is probably unnecessary.
    // While the order of mouse (or pointer) events is defined per spec,
    // the order in which they interweave/follow on a user interaction depends on the implementation.
    const pointermove = pointer.move(instance, position);
    const mousemove = pointer.pointerType === 'touch' ? undefined : this.mouse.move(instance, position, pointer.isPrevented);
    pointermove === null || pointermove === undefined ? undefined : pointermove.leave();
    mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
    pointermove === null || pointermove === undefined ? undefined : pointermove.enter();
    mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
    pointermove === null || pointermove === undefined ? undefined : pointermove.move();
    mousemove === null || mousemove === undefined ? undefined : mousemove.move();
  }
  async release(instance, keyDef, position) {
    const device = this.devices.get(keyDef.pointerType);
    device.removePressed(keyDef);
    this.buttons.up(keyDef);
    const pointer = this.pointers.get(this.getPointerName(keyDef));
    const isPrevented = pointer.isPrevented;
    // TODO: deprecate the following implicit setting of position
    pointer.position = position;
    if (pointer.pointerType !== 'touch') {
      this.mouse.position = position;
    }
    if (device.countPressed === 0) {
      pointer.up(instance, keyDef.button);
    }
    if (pointer.pointerType === 'touch') {
      pointer.release(instance);
    }
    if (pointer.pointerType === 'touch' && !pointer.isMultitouch) {
      const mousemove = this.mouse.move(instance, position, isPrevented);
      mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
      mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
      mousemove === null || mousemove === undefined ? undefined : mousemove.move();
      this.mouse.down(instance, keyDef, isPrevented);
    }
    if (!pointer.isMultitouch) {
      const mousemove = this.mouse.move(instance, position, isPrevented);
      mousemove === null || mousemove === undefined ? undefined : mousemove.leave();
      mousemove === null || mousemove === undefined ? undefined : mousemove.enter();
      mousemove === null || mousemove === undefined ? undefined : mousemove.move();
      this.mouse.up(instance, keyDef, isPrevented);
    }
  }
  getPointerName(keyDef) {
    return keyDef.pointerType === 'touch' ? keyDef.name : keyDef.pointerType;
  }
  getPreviousPosition(pointerName) {
    return this.pointers.has(pointerName) ? this.pointers.get(pointerName).position : undefined;
  }
  resetClickCount() {
    this.mouse.resetClickCount();
  }
  getMouseTarget(instance) {
    var _this_mouse_position_target;
    return (_this_mouse_position_target = this.mouse.position.target) !== null && _this_mouse_position_target !== undefined ? _this_mouse_position_target : instance.config.document.body;
  }
  setMousePosition(position) {
    this.mouse.position = position;
    this.pointers.get('mouse').position = position;
  }
  constructor(system) {
    _define_property(this, "system", undefined);
    _define_property(this, "mouse", undefined);
    _define_property(this, "buttons", undefined);
    _define_property(this, "devices", new class {
      get(k) {
        var _this_registry, _k;
        var _;
        return (_ = (_this_registry = this.registry)[_k = k]) !== null && _ !== undefined ? _ : _this_registry[_k] = new device.Device();
      }
      constructor() {
        _define_property(this, "registry", {});
      }
    }());
    _define_property(this, "pointers", new class {
      new(pointerName, pointerType, buttons) {
        const isPrimary = pointerType !== 'touch' || !Object.values(this.registry).some(p => p.pointerType === 'touch' && !p.isCancelled);
        if (!isPrimary) {
          Object.values(this.registry).forEach(p => {
            if (p.pointerType === pointerType && !p.isCancelled) {
              p.isMultitouch = true;
            }
          });
        }
        this.registry[pointerName] = new pointer.Pointer({
          pointerId: this.nextId++,
          pointerType,
          isPrimary
        }, buttons);
        return this.registry[pointerName];
      }
      get(pointerName) {
        if (!this.has(pointerName)) {
          throw new Error(`Trying to access pointer "${pointerName}" which does not exist.`);
        }
        return this.registry[pointerName];
      }
      has(pointerName) {
        return pointerName in this.registry;
      }
      constructor() {
        _define_property(this, "registry", {});
        _define_property(this, "nextId", 1);
      }
    }());
    this.system = system;
    this.buttons = new buttons.Buttons();
    this.mouse = new mouse.Mouse();
    this.pointers.new('mouse', 'mouse', this.buttons);
  }
}
exports.PointerHost = PointerHost;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJidXR0b25zIiwicmVxdWlyZSIsImRldmljZSIsIm1vdXNlIiwicG9pbnRlciIsIl9kZWZpbmVfcHJvcGVydHkiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiUG9pbnRlckhvc3QiLCJpc0tleVByZXNzZWQiLCJrZXlEZWYiLCJkZXZpY2VzIiwiZ2V0IiwicG9pbnRlclR5cGUiLCJpc1ByZXNzZWQiLCJwcmVzcyIsImluc3RhbmNlIiwicG9zaXRpb24iLCJhZGRQcmVzc2VkIiwiZG93biIsInBvaW50ZXJOYW1lIiwiZ2V0UG9pbnRlck5hbWUiLCJwb2ludGVycyIsIm5ldyIsImluaXQiLCJidXR0b24iLCJpc1ByZXZlbnRlZCIsIm1vdmUiLCJwb2ludGVybW92ZSIsIm1vdXNlbW92ZSIsInVuZGVmaW5lZCIsImxlYXZlIiwiZW50ZXIiLCJyZWxlYXNlIiwicmVtb3ZlUHJlc3NlZCIsInVwIiwiY291bnRQcmVzc2VkIiwiaXNNdWx0aXRvdWNoIiwibmFtZSIsImdldFByZXZpb3VzUG9zaXRpb24iLCJoYXMiLCJyZXNldENsaWNrQ291bnQiLCJnZXRNb3VzZVRhcmdldCIsIl90aGlzX21vdXNlX3Bvc2l0aW9uX3RhcmdldCIsInRhcmdldCIsImNvbmZpZyIsImRvY3VtZW50IiwiYm9keSIsInNldE1vdXNlUG9zaXRpb24iLCJjb25zdHJ1Y3RvciIsInN5c3RlbSIsImsiLCJfdGhpc19yZWdpc3RyeSIsIl9rIiwiXyIsInJlZ2lzdHJ5IiwiRGV2aWNlIiwiaXNQcmltYXJ5IiwidmFsdWVzIiwic29tZSIsInAiLCJpc0NhbmNlbGxlZCIsImZvckVhY2giLCJQb2ludGVyIiwicG9pbnRlcklkIiwibmV4dElkIiwiRXJyb3IiLCJCdXR0b25zIiwiTW91c2UiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYnV0dG9ucyA9IHJlcXVpcmUoJy4vYnV0dG9ucy5qcycpO1xudmFyIGRldmljZSA9IHJlcXVpcmUoJy4vZGV2aWNlLmpzJyk7XG52YXIgbW91c2UgPSByZXF1aXJlKCcuL21vdXNlLmpzJyk7XG52YXIgcG9pbnRlciA9IHJlcXVpcmUoJy4vcG9pbnRlci5qcycpO1xuXG5mdW5jdGlvbiBfZGVmaW5lX3Byb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG5jbGFzcyBQb2ludGVySG9zdCB7XG4gICAgaXNLZXlQcmVzc2VkKGtleURlZikge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXZpY2VzLmdldChrZXlEZWYucG9pbnRlclR5cGUpLmlzUHJlc3NlZChrZXlEZWYpO1xuICAgIH1cbiAgICBhc3luYyBwcmVzcyhpbnN0YW5jZSwga2V5RGVmLCBwb3NpdGlvbikge1xuICAgICAgICB0aGlzLmRldmljZXMuZ2V0KGtleURlZi5wb2ludGVyVHlwZSkuYWRkUHJlc3NlZChrZXlEZWYpO1xuICAgICAgICB0aGlzLmJ1dHRvbnMuZG93bihrZXlEZWYpO1xuICAgICAgICBjb25zdCBwb2ludGVyTmFtZSA9IHRoaXMuZ2V0UG9pbnRlck5hbWUoa2V5RGVmKTtcbiAgICAgICAgY29uc3QgcG9pbnRlciA9IGtleURlZi5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyA/IHRoaXMucG9pbnRlcnMubmV3KHBvaW50ZXJOYW1lLCBrZXlEZWYucG9pbnRlclR5cGUsIHRoaXMuYnV0dG9ucykgOiB0aGlzLnBvaW50ZXJzLmdldChwb2ludGVyTmFtZSk7XG4gICAgICAgIC8vIFRPRE86IGRlcHJlY2F0ZSB0aGUgZm9sbG93aW5nIGltcGxpY2l0IHNldHRpbmcgb2YgcG9zaXRpb25cbiAgICAgICAgcG9pbnRlci5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICBpZiAocG9pbnRlci5wb2ludGVyVHlwZSAhPT0gJ3RvdWNoJykge1xuICAgICAgICAgICAgdGhpcy5tb3VzZS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb2ludGVyLnBvaW50ZXJUeXBlID09PSAndG91Y2gnKSB7XG4gICAgICAgICAgICBwb2ludGVyLmluaXQoaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIHBvaW50ZXIuZG93bihpbnN0YW5jZSwga2V5RGVmLmJ1dHRvbik7XG4gICAgICAgIGlmIChwb2ludGVyLnBvaW50ZXJUeXBlICE9PSAndG91Y2gnKSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlLmRvd24oaW5zdGFuY2UsIGtleURlZiwgcG9pbnRlci5pc1ByZXZlbnRlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbW92ZShpbnN0YW5jZSwgcG9pbnRlck5hbWUsIHBvc2l0aW9uKSB7XG4gICAgICAgIGNvbnN0IHBvaW50ZXIgPSB0aGlzLnBvaW50ZXJzLmdldChwb2ludGVyTmFtZSk7XG4gICAgICAgIC8vIEluIChzb21lPykgYnJvd3NlcnMgdGhpcyBvcmRlciBvZiBldmVudHMgY2FuIGJlIG9ic2VydmVkLlxuICAgICAgICAvLyBUaGlzIGludGVyd2VhdmluZyBvZiBldmVudHMgaXMgcHJvYmFibHkgdW5uZWNlc3NhcnkuXG4gICAgICAgIC8vIFdoaWxlIHRoZSBvcmRlciBvZiBtb3VzZSAob3IgcG9pbnRlcikgZXZlbnRzIGlzIGRlZmluZWQgcGVyIHNwZWMsXG4gICAgICAgIC8vIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IGludGVyd2VhdmUvZm9sbG93IG9uIGEgdXNlciBpbnRlcmFjdGlvbiBkZXBlbmRzIG9uIHRoZSBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgY29uc3QgcG9pbnRlcm1vdmUgPSBwb2ludGVyLm1vdmUoaW5zdGFuY2UsIHBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgbW91c2Vtb3ZlID0gcG9pbnRlci5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyA/IHVuZGVmaW5lZCA6IHRoaXMubW91c2UubW92ZShpbnN0YW5jZSwgcG9zaXRpb24sIHBvaW50ZXIuaXNQcmV2ZW50ZWQpO1xuICAgICAgICBwb2ludGVybW92ZSA9PT0gbnVsbCB8fCBwb2ludGVybW92ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcG9pbnRlcm1vdmUubGVhdmUoKTtcbiAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbW91c2Vtb3ZlLmxlYXZlKCk7XG4gICAgICAgIHBvaW50ZXJtb3ZlID09PSBudWxsIHx8IHBvaW50ZXJtb3ZlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBwb2ludGVybW92ZS5lbnRlcigpO1xuICAgICAgICBtb3VzZW1vdmUgPT09IG51bGwgfHwgbW91c2Vtb3ZlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBtb3VzZW1vdmUuZW50ZXIoKTtcbiAgICAgICAgcG9pbnRlcm1vdmUgPT09IG51bGwgfHwgcG9pbnRlcm1vdmUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHBvaW50ZXJtb3ZlLm1vdmUoKTtcbiAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbW91c2Vtb3ZlLm1vdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgcmVsZWFzZShpbnN0YW5jZSwga2V5RGVmLCBwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLmRldmljZXMuZ2V0KGtleURlZi5wb2ludGVyVHlwZSk7XG4gICAgICAgIGRldmljZS5yZW1vdmVQcmVzc2VkKGtleURlZik7XG4gICAgICAgIHRoaXMuYnV0dG9ucy51cChrZXlEZWYpO1xuICAgICAgICBjb25zdCBwb2ludGVyID0gdGhpcy5wb2ludGVycy5nZXQodGhpcy5nZXRQb2ludGVyTmFtZShrZXlEZWYpKTtcbiAgICAgICAgY29uc3QgaXNQcmV2ZW50ZWQgPSBwb2ludGVyLmlzUHJldmVudGVkO1xuICAgICAgICAvLyBUT0RPOiBkZXByZWNhdGUgdGhlIGZvbGxvd2luZyBpbXBsaWNpdCBzZXR0aW5nIG9mIHBvc2l0aW9uXG4gICAgICAgIHBvaW50ZXIucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgaWYgKHBvaW50ZXIucG9pbnRlclR5cGUgIT09ICd0b3VjaCcpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2UucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGV2aWNlLmNvdW50UHJlc3NlZCA9PT0gMCkge1xuICAgICAgICAgICAgcG9pbnRlci51cChpbnN0YW5jZSwga2V5RGVmLmJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvaW50ZXIucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpIHtcbiAgICAgICAgICAgIHBvaW50ZXIucmVsZWFzZShpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvaW50ZXIucG9pbnRlclR5cGUgPT09ICd0b3VjaCcgJiYgIXBvaW50ZXIuaXNNdWx0aXRvdWNoKSB7XG4gICAgICAgICAgICBjb25zdCBtb3VzZW1vdmUgPSB0aGlzLm1vdXNlLm1vdmUoaW5zdGFuY2UsIHBvc2l0aW9uLCBpc1ByZXZlbnRlZCk7XG4gICAgICAgICAgICBtb3VzZW1vdmUgPT09IG51bGwgfHwgbW91c2Vtb3ZlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBtb3VzZW1vdmUubGVhdmUoKTtcbiAgICAgICAgICAgIG1vdXNlbW92ZSA9PT0gbnVsbCB8fCBtb3VzZW1vdmUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IG1vdXNlbW92ZS5lbnRlcigpO1xuICAgICAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbW91c2Vtb3ZlLm1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMubW91c2UuZG93bihpbnN0YW5jZSwga2V5RGVmLCBpc1ByZXZlbnRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwb2ludGVyLmlzTXVsdGl0b3VjaCkge1xuICAgICAgICAgICAgY29uc3QgbW91c2Vtb3ZlID0gdGhpcy5tb3VzZS5tb3ZlKGluc3RhbmNlLCBwb3NpdGlvbiwgaXNQcmV2ZW50ZWQpO1xuICAgICAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbW91c2Vtb3ZlLmxlYXZlKCk7XG4gICAgICAgICAgICBtb3VzZW1vdmUgPT09IG51bGwgfHwgbW91c2Vtb3ZlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBtb3VzZW1vdmUuZW50ZXIoKTtcbiAgICAgICAgICAgIG1vdXNlbW92ZSA9PT0gbnVsbCB8fCBtb3VzZW1vdmUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IG1vdXNlbW92ZS5tb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLm1vdXNlLnVwKGluc3RhbmNlLCBrZXlEZWYsIGlzUHJldmVudGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRQb2ludGVyTmFtZShrZXlEZWYpIHtcbiAgICAgICAgcmV0dXJuIGtleURlZi5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyA/IGtleURlZi5uYW1lIDoga2V5RGVmLnBvaW50ZXJUeXBlO1xuICAgIH1cbiAgICBnZXRQcmV2aW91c1Bvc2l0aW9uKHBvaW50ZXJOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvaW50ZXJzLmhhcyhwb2ludGVyTmFtZSkgPyB0aGlzLnBvaW50ZXJzLmdldChwb2ludGVyTmFtZSkucG9zaXRpb24gOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJlc2V0Q2xpY2tDb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VzZS5yZXNldENsaWNrQ291bnQoKTtcbiAgICB9XG4gICAgZ2V0TW91c2VUYXJnZXQoaW5zdGFuY2UpIHtcbiAgICAgICAgdmFyIF90aGlzX21vdXNlX3Bvc2l0aW9uX3RhcmdldDtcbiAgICAgICAgcmV0dXJuIChfdGhpc19tb3VzZV9wb3NpdGlvbl90YXJnZXQgPSB0aGlzLm1vdXNlLnBvc2l0aW9uLnRhcmdldCkgIT09IG51bGwgJiYgX3RoaXNfbW91c2VfcG9zaXRpb25fdGFyZ2V0ICE9PSB1bmRlZmluZWQgPyBfdGhpc19tb3VzZV9wb3NpdGlvbl90YXJnZXQgOiBpbnN0YW5jZS5jb25maWcuZG9jdW1lbnQuYm9keTtcbiAgICB9XG4gICAgc2V0TW91c2VQb3NpdGlvbihwb3NpdGlvbikge1xuICAgICAgICB0aGlzLm1vdXNlLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMucG9pbnRlcnMuZ2V0KCdtb3VzZScpLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHN5c3RlbSl7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJzeXN0ZW1cIiwgdW5kZWZpbmVkKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcIm1vdXNlXCIsIHVuZGVmaW5lZCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJidXR0b25zXCIsIHVuZGVmaW5lZCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJkZXZpY2VzXCIsIG5ldyBjbGFzcyB7XG4gICAgICAgICAgICBnZXQoaykge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpc19yZWdpc3RyeSwgX2s7XG4gICAgICAgICAgICAgICAgdmFyIF87XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfID0gKF90aGlzX3JlZ2lzdHJ5ID0gdGhpcy5yZWdpc3RyeSlbX2sgPSBrXSkgIT09IG51bGwgJiYgXyAhPT0gdW5kZWZpbmVkID8gXyA6IF90aGlzX3JlZ2lzdHJ5W19rXSA9IG5ldyBkZXZpY2UuRGV2aWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICAgICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJyZWdpc3RyeVwiLCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oKSk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJwb2ludGVyc1wiLCBuZXcgY2xhc3Mge1xuICAgICAgICAgICAgbmV3KHBvaW50ZXJOYW1lLCBwb2ludGVyVHlwZSwgYnV0dG9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzUHJpbWFyeSA9IHBvaW50ZXJUeXBlICE9PSAndG91Y2gnIHx8ICFPYmplY3QudmFsdWVzKHRoaXMucmVnaXN0cnkpLnNvbWUoKHApPT5wLnBvaW50ZXJUeXBlID09PSAndG91Y2gnICYmICFwLmlzQ2FuY2VsbGVkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzUHJpbWFyeSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMucmVnaXN0cnkpLmZvckVhY2goKHApPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocC5wb2ludGVyVHlwZSA9PT0gcG9pbnRlclR5cGUgJiYgIXAuaXNDYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmlzTXVsdGl0b3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdHJ5W3BvaW50ZXJOYW1lXSA9IG5ldyBwb2ludGVyLlBvaW50ZXIoe1xuICAgICAgICAgICAgICAgICAgICBwb2ludGVySWQ6IHRoaXMubmV4dElkKyssXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXJUeXBlLFxuICAgICAgICAgICAgICAgICAgICBpc1ByaW1hcnlcbiAgICAgICAgICAgICAgICB9LCBidXR0b25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RyeVtwb2ludGVyTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZXQocG9pbnRlck5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzKHBvaW50ZXJOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRyeWluZyB0byBhY2Nlc3MgcG9pbnRlciBcIiR7cG9pbnRlck5hbWV9XCIgd2hpY2ggZG9lcyBub3QgZXhpc3QuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdHJ5W3BvaW50ZXJOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhhcyhwb2ludGVyTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwb2ludGVyTmFtZSBpbiB0aGlzLnJlZ2lzdHJ5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwicmVnaXN0cnlcIiwge30pO1xuICAgICAgICAgICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJuZXh0SWRcIiwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oKSk7XG4gICAgICAgIHRoaXMuc3lzdGVtID0gc3lzdGVtO1xuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBuZXcgYnV0dG9ucy5CdXR0b25zKCk7XG4gICAgICAgIHRoaXMubW91c2UgPSBuZXcgbW91c2UuTW91c2UoKTtcbiAgICAgICAgdGhpcy5wb2ludGVycy5uZXcoJ21vdXNlJywgJ21vdXNlJywgdGhpcy5idXR0b25zKTtcbiAgICB9XG59XG5cbmV4cG9ydHMuUG9pbnRlckhvc3QgPSBQb2ludGVySG9zdDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWixJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDckMsSUFBSUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ25DLElBQUlFLEtBQUssR0FBR0YsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUNqQyxJQUFJRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFFckMsU0FBU0ksZ0JBQWdCQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsS0FBSyxFQUFFO0VBQ3ZDLElBQUlELEdBQUcsSUFBSUQsR0FBRyxFQUFFO0lBQ1pHLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDSixHQUFHLEVBQUVDLEdBQUcsRUFBRTtNQUM1QkMsS0FBSyxFQUFFQSxLQUFLO01BQ1pHLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxZQUFZLEVBQUUsSUFBSTtNQUNsQkMsUUFBUSxFQUFFO0lBQ2QsQ0FBQyxDQUFDO0VBQ04sQ0FBQyxNQUFNO0lBQ0hQLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLEdBQUdDLEtBQUs7RUFDcEI7RUFDQSxPQUFPRixHQUFHO0FBQ2Q7QUFDQSxNQUFNUSxXQUFXLENBQUM7RUFDZEMsWUFBWUEsQ0FBQ0MsTUFBTSxFQUFFO0lBQ2pCLE9BQU8sSUFBSSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsTUFBTSxDQUFDRyxXQUFXLENBQUMsQ0FBQ0MsU0FBUyxDQUFDSixNQUFNLENBQUM7RUFDakU7RUFDQSxNQUFNSyxLQUFLQSxDQUFDQyxRQUFRLEVBQUVOLE1BQU0sRUFBRU8sUUFBUSxFQUFFO0lBQ3BDLElBQUksQ0FBQ04sT0FBTyxDQUFDQyxHQUFHLENBQUNGLE1BQU0sQ0FBQ0csV0FBVyxDQUFDLENBQUNLLFVB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