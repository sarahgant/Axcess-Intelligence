732d2e751219b9827d92181c58dade79
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.queryByRole = exports.queryAllByRole = exports.getByRole = exports.getAllByRole = exports.findByRole = exports.findAllByRole = void 0;
var _domAccessibilityApi = require("dom-accessibility-api");
var _ariaQuery = require("aria-query");
var _roleHelpers = require("../role-helpers");
var _queryHelpers = require("../query-helpers");
var _helpers = require("../helpers");
var _allUtils = require("./all-utils");
/* eslint-disable complexity */

const queryAllByRole = (container, role, {
  hidden = (0, _allUtils.getConfig)().defaultHidden,
  name,
  description,
  queryFallbacks = false,
  selected,
  busy,
  checked,
  pressed,
  current,
  level,
  expanded,
  value: {
    now: valueNow,
    min: valueMin,
    max: valueMax,
    text: valueText
  } = {}
} = {}) => {
  (0, _helpers.checkContainerType)(container);
  if (selected !== undefined) {
    var _allRoles$get;
    // guard against unknown roles
    if (((_allRoles$get = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get.props['aria-selected']) === undefined) {
      throw new Error(`"aria-selected" is not supported on role "${role}".`);
    }
  }
  if (busy !== undefined) {
    var _allRoles$get2;
    // guard against unknown roles
    if (((_allRoles$get2 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get2.props['aria-busy']) === undefined) {
      throw new Error(`"aria-busy" is not supported on role "${role}".`);
    }
  }
  if (checked !== undefined) {
    var _allRoles$get3;
    // guard against unknown roles
    if (((_allRoles$get3 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get3.props['aria-checked']) === undefined) {
      throw new Error(`"aria-checked" is not supported on role "${role}".`);
    }
  }
  if (pressed !== undefined) {
    var _allRoles$get4;
    // guard against unknown roles
    if (((_allRoles$get4 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get4.props['aria-pressed']) === undefined) {
      throw new Error(`"aria-pressed" is not supported on role "${role}".`);
    }
  }
  if (current !== undefined) {
    var _allRoles$get5;
    /* istanbul ignore next */
    // guard against unknown roles
    // All currently released ARIA versions support `aria-current` on all roles.
    // Leaving this for symetry and forward compatibility
    if (((_allRoles$get5 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get5.props['aria-current']) === undefined) {
      throw new Error(`"aria-current" is not supported on role "${role}".`);
    }
  }
  if (level !== undefined) {
    // guard against using `level` option with any role other than `heading`
    if (role !== 'heading') {
      throw new Error(`Role "${role}" cannot have "level" property.`);
    }
  }
  if (valueNow !== undefined) {
    var _allRoles$get6;
    // guard against unknown roles
    if (((_allRoles$get6 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get6.props['aria-valuenow']) === undefined) {
      throw new Error(`"aria-valuenow" is not supported on role "${role}".`);
    }
  }
  if (valueMax !== undefined) {
    var _allRoles$get7;
    // guard against unknown roles
    if (((_allRoles$get7 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get7.props['aria-valuemax']) === undefined) {
      throw new Error(`"aria-valuemax" is not supported on role "${role}".`);
    }
  }
  if (valueMin !== undefined) {
    var _allRoles$get8;
    // guard against unknown roles
    if (((_allRoles$get8 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get8.props['aria-valuemin']) === undefined) {
      throw new Error(`"aria-valuemin" is not supported on role "${role}".`);
    }
  }
  if (valueText !== undefined) {
    var _allRoles$get9;
    // guard against unknown roles
    if (((_allRoles$get9 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get9.props['aria-valuetext']) === undefined) {
      throw new Error(`"aria-valuetext" is not supported on role "${role}".`);
    }
  }
  if (expanded !== undefined) {
    var _allRoles$get10;
    // guard against unknown roles
    if (((_allRoles$get10 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get10.props['aria-expanded']) === undefined) {
      throw new Error(`"aria-expanded" is not supported on role "${role}".`);
    }
  }
  const subtreeIsInaccessibleCache = new WeakMap();
  function cachedIsSubtreeInaccessible(element) {
    if (!subtreeIsInaccessibleCache.has(element)) {
      subtreeIsInaccessibleCache.set(element, (0, _roleHelpers.isSubtreeInaccessible)(element));
    }
    return subtreeIsInaccessibleCache.get(element);
  }
  return Array.from(container.querySelectorAll(
  // Only query elements that can be matched by the following filters
  makeRoleSelector(role))).filter(node => {
    const isRoleSpecifiedExplicitly = node.hasAttribute('role');
    if (isRoleSpecifiedExplicitly) {
      const roleValue = node.getAttribute('role');
      if (queryFallbacks) {
        return roleValue.split(' ').filter(Boolean).some(roleAttributeToken => roleAttributeToken === role);
      }
      // other wise only send the first token to match
      const [firstRoleAttributeToken] = roleValue.split(' ');
      return firstRoleAttributeToken === role;
    }
    const implicitRoles = (0, _roleHelpers.getImplicitAriaRoles)(node);
    return implicitRoles.some(implicitRole => {
      return implicitRole === role;
    });
  }).filter(element => {
    if (selected !== undefined) {
      return selected === (0, _roleHelpers.computeAriaSelected)(element);
    }
    if (busy !== undefined) {
      return busy === (0, _roleHelpers.computeAriaBusy)(element);
    }
    if (checked !== undefined) {
      return checked === (0, _roleHelpers.computeAriaChecked)(element);
    }
    if (pressed !== undefined) {
      return pressed === (0, _roleHelpers.computeAriaPressed)(element);
    }
    if (current !== undefined) {
      return current === (0, _roleHelpers.computeAriaCurrent)(element);
    }
    if (expanded !== undefined) {
      return expanded === (0, _roleHelpers.computeAriaExpanded)(element);
    }
    if (level !== undefined) {
      return level === (0, _roleHelpers.computeHeadingLevel)(element);
    }
    if (valueNow !== undefined || valueMax !== undefined || valueMin !== undefined || valueText !== undefined) {
      let valueMatches = true;
      if (valueNow !== undefined) {
        valueMatches && (valueMatches = valueNow === (0, _roleHelpers.computeAriaValueNow)(element));
      }
      if (valueMax !== undefined) {
        valueMatches && (valueMatches = valueMax === (0, _roleHelpers.computeAriaValueMax)(element));
      }
      if (valueMin !== undefined) {
        valueMatches && (valueMatches = valueMin === (0, _roleHelpers.computeAriaValueMin)(element));
      }
      if (valueText !== undefined) {
        valueMatches && (valueMatches = (0, _allUtils.matches)((0, _roleHelpers.computeAriaValueText)(element) ?? null, element, valueText, text => text));
      }
      return valueMatches;
    }
    // don't care if aria attributes are unspecified
    return true;
  }).filter(element => {
    if (name === undefined) {
      // Don't care
      return true;
    }
    return (0, _allUtils.matches)((0, _domAccessibilityApi.computeAccessibleName)(element, {
      computedStyleSupportsPseudoElements: (0, _allUtils.getConfig)().computedStyleSupportsPseudoElements
    }), element, name, text => text);
  }).filter(element => {
    if (description === undefined) {
      // Don't care
      return true;
    }
    return (0, _allUtils.matches)((0, _domAccessibilityApi.computeAccessibleDescription)(element, {
      computedStyleSupportsPseudoElements: (0, _allUtils.getConfig)().computedStyleSupportsPseudoElements
    }), element, description, text => text);
  }).filter(element => {
    return hidden === false ? (0, _roleHelpers.isInaccessible)(element, {
      isSubtreeInaccessible: cachedIsSubtreeInaccessible
    }) === false : true;
  });
};
function makeRoleSelector(role) {
  const explicitRoleSelector = `*[role~="${role}"]`;
  const roleRelations = _ariaQuery.roleElements.get(role) ?? new Set();
  const implicitRoleSelectors = new Set(Array.from(roleRelations).map(({
    name
  }) => name));

  // Current transpilation config sometimes assumes `...` is always applied to arrays.
  // `...` is equivalent to `Array.prototype.concat` for arrays.
  // If you replace this code with `[explicitRoleSelector, ...implicitRoleSelectors]`, make sure every transpilation target retains the `...` in favor of `Array.prototype.concat`.
  return [explicitRoleSelector].concat(Array.from(implicitRoleSelectors)).join(',');
}
const getNameHint = name => {
  let nameHint = '';
  if (name === undefined) {
    nameHint = '';
  } else if (typeof name === 'string') {
    nameHint = ` and name "${name}"`;
  } else {
    nameHint = ` and name \`${name}\``;
  }
  return nameHint;
};
const getMultipleError = (c, role, {
  name
} = {}) => {
  return `Found multiple elements with the role "${role}"${getNameHint(name)}`;
};
const getMissingError = (container, role, {
  hidden = (0, _allUtils.getConfig)().defaultHidden,
  name,
  description
} = {}) => {
  if ((0, _allUtils.getConfig)()._disableExpensiveErrorDiagnostics) {
    return `Unable to find role="${role}"${getNameHint(name)}`;
  }
  let roles = '';
  Array.from(container.children).forEach(childElement => {
    roles += (0, _roleHelpers.prettyRoles)(childElement, {
      hidden,
      includeDescription: description !== undefined
    });
  });
  let roleMessage;
  if (roles.length === 0) {
    if (hidden === false) {
      roleMessage = 'There are no accessible roles. But there might be some inaccessible roles. ' + 'If you wish to access them, then set the `hidden` option to `true`. ' + 'Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole';
    } else {
      roleMessage = 'There are no available roles.';
    }
  } else {
    roleMessage = `
Here are the ${hidden === false ? 'accessible' : 'available'} roles:

  ${roles.replace(/\n/g, '\n  ').replace(/\n\s\s\n/g, '\n\n')}
`.trim();
  }
  let nameHint = '';
  if (name === undefined) {
    nameHint = '';
  } else if (typeof name === 'string') {
    nameHint = ` and name "${name}"`;
  } else {
    nameHint = ` and name \`${name}\``;
  }
  let descriptionHint = '';
  if (description === undefined) {
    descriptionHint = '';
  } else if (typeof description === 'string') {
    descriptionHint = ` and description "${description}"`;
  } else {
    descriptionHint = ` and description \`${description}\``;
  }
  return `
Unable to find an ${hidden === false ? 'accessible ' : ''}element with the role "${role}"${nameHint}${descriptionHint}

${roleMessage}`.trim();
};
const queryAllByRoleWithSuggestions = exports.queryAllByRole = (0, _queryHelpers.wrapAllByQueryWithSuggestion)(queryAllByRole, queryAllByRole.name, 'queryAll');
const [queryByRole, getAllByRole, getByRole, findAllByRole, findByRole] = (0, _allUtils.buildQueries)(queryAllByRole, getMultipleError, getMissingError);
exports.findByRole = findByRole;
exports.findAllByRole = findAllByRole;
exports.getByRole = getByRole;
exports.getAllByRole = getAllByRole;
exports.queryByRole = queryByRole;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInF1ZXJ5QnlSb2xlIiwicXVlcnlBbGxCeVJvbGUiLCJnZXRCeVJvbGUiLCJnZXRBbGxCeVJvbGUiLCJmaW5kQnlSb2xlIiwiZmluZEFsbEJ5Um9sZSIsIl9kb21BY2Nlc3NpYmlsaXR5QXBpIiwicmVxdWlyZSIsIl9hcmlhUXVlcnkiLCJfcm9sZUhlbHBlcnMiLCJfcXVlcnlIZWxwZXJzIiwiX2hlbHBlcnMiLCJfYWxsVXRpbHMiLCJjb250YWluZXIiLCJyb2xlIiwiaGlkZGVuIiwiZ2V0Q29uZmlnIiwiZGVmYXVsdEhpZGRlbiIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInF1ZXJ5RmFsbGJhY2tzIiwic2VsZWN0ZWQiLCJidXN5IiwiY2hlY2tlZCIsInByZXNzZWQiLCJjdXJyZW50IiwibGV2ZWwiLCJleHBhbmRlZCIsIm5vdyIsInZhbHVlTm93IiwibWluIiwidmFsdWVNaW4iLCJtYXgiLCJ2YWx1ZU1heCIsInRleHQiLCJ2YWx1ZVRleHQiLCJjaGVja0NvbnRhaW5lclR5cGUiLCJ1bmRlZmluZWQiLCJfYWxsUm9sZXMkZ2V0Iiwicm9sZXMiLCJnZXQiLCJwcm9wcyIsIkVycm9yIiwiX2FsbFJvbGVzJGdldDIiLCJfYWxsUm9sZXMkZ2V0MyIsIl9hbGxSb2xlcyRnZXQ0IiwiX2FsbFJvbGVzJGdldDUiLCJfYWxsUm9sZXMkZ2V0NiIsIl9hbGxSb2xlcyRnZXQ3IiwiX2FsbFJvbGVzJGdldDgiLCJfYWxsUm9sZXMkZ2V0OSIsIl9hbGxSb2xlcyRnZXQxMCIsInN1YnRyZWVJc0luYWNjZXNzaWJsZUNhY2hlIiwiV2Vha01hcCIsImNhY2hlZElzU3VidHJlZUluYWNjZXNzaWJsZSIsImVsZW1lbnQiLCJoYXMiLCJzZXQiLCJpc1N1YnRyZWVJbmFjY2Vzc2libGUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwibWFrZVJvbGVTZWxlY3RvciIsImZpbHRlciIsIm5vZGUiLCJpc1JvbGVTcGVjaWZpZWRFeHBsaWNpdGx5IiwiaGFzQXR0cmlidXRlIiwicm9sZVZhbHVlIiwiZ2V0QXR0cmlidXRlIiwic3BsaXQiLCJCb29sZWFuIiwic29tZSIsInJvbGVBdHRyaWJ1dGVUb2tlbiIsImZpcnN0Um9sZUF0dHJpYnV0ZVRva2VuIiwiaW1wbGljaXRSb2xlcyIsImdldEltcGxpY2l0QXJpYVJvbGVzIiwiaW1wbGljaXRSb2xlIiwiY29tcHV0ZUFyaWFTZWxlY3RlZCIsImNvbXB1dGVBcmlhQnVzeSIsImNvbXB1dGVBcmlhQ2hlY2tlZCIsImNvbXB1dGVBcmlhUHJlc3NlZCIsImNvbXB1dGVBcmlhQ3VycmVudCIsImNvbXB1dGVBcmlhRXhwYW5kZWQiLCJjb21wdXRlSGVhZGluZ0xldmVsIiwidmFsdWVNYXRjaGVzIiwiY29tcHV0ZUFyaWFWYWx1ZU5vdyIsImNvbXB1dGVBcmlhVmFsdWVNYXgiLCJjb21wdXRlQXJpYVZhbHVlTWluIiwibWF0Y2hlcyIsImNvbXB1dGVBcmlhVmFsdWVUZXh0IiwiY29tcHV0ZUFjY2Vzc2libGVOYW1lIiwiY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHMiLCJjb21wdXRlQWNjZXNzaWJsZURlc2NyaXB0aW9uIiwiaXNJbmFjY2Vzc2libGUiLCJleHBsaWNpdFJvbGVTZWxlY3RvciIsInJvbGVSZWxhdGlvbnMiLCJyb2xlRWxlbWVudHMiLCJTZXQiLCJpbXBsaWNpdFJvbGVTZWxlY3RvcnMiLCJtYXAiLCJjb25jYXQiLCJqb2luIiwiZ2V0TmFtZUhpbnQiLCJuYW1lSGludCIsImdldE11bHRpcGxlRXJyb3IiLCJjIiwiZ2V0TWlzc2luZ0Vycm9yIiwiX2Rpc2FibGVFeHBlbnNpdmVFcnJvckRpYWdub3N0aWNzIiwiY2hpbGRyZW4iLCJmb3JFYWNoIiwiY2hpbGRFbGVtZW50IiwicHJldHR5Um9sZXMiLCJpbmNsdWRlRGVzY3JpcHRpb24iLCJyb2xlTWVzc2FnZSIsImxlbmd0aCIsInJlcGxhY2UiLCJ0cmltIiwiZGVzY3JpcHRpb25IaW50IiwicXVlcnlBbGxCeVJvbGVXaXRoU3VnZ2VzdGlvbnMiLCJ3cmFwQWxsQnlRdWVyeVdpdGhTdWdnZXN0aW9uIiwiYnVpbGRRdWVyaWVzIl0sInNvdXJjZXMiOlsicm9sZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMucXVlcnlCeVJvbGUgPSBleHBvcnRzLnF1ZXJ5QWxsQnlSb2xlID0gZXhwb3J0cy5nZXRCeVJvbGUgPSBleHBvcnRzLmdldEFsbEJ5Um9sZSA9IGV4cG9ydHMuZmluZEJ5Um9sZSA9IGV4cG9ydHMuZmluZEFsbEJ5Um9sZSA9IHZvaWQgMDtcbnZhciBfZG9tQWNjZXNzaWJpbGl0eUFwaSA9IHJlcXVpcmUoXCJkb20tYWNjZXNzaWJpbGl0eS1hcGlcIik7XG52YXIgX2FyaWFRdWVyeSA9IHJlcXVpcmUoXCJhcmlhLXF1ZXJ5XCIpO1xudmFyIF9yb2xlSGVscGVycyA9IHJlcXVpcmUoXCIuLi9yb2xlLWhlbHBlcnNcIik7XG52YXIgX3F1ZXJ5SGVscGVycyA9IHJlcXVpcmUoXCIuLi9xdWVyeS1oZWxwZXJzXCIpO1xudmFyIF9oZWxwZXJzID0gcmVxdWlyZShcIi4uL2hlbHBlcnNcIik7XG52YXIgX2FsbFV0aWxzID0gcmVxdWlyZShcIi4vYWxsLXV0aWxzXCIpO1xuLyogZXNsaW50LWRpc2FibGUgY29tcGxleGl0eSAqL1xuXG5jb25zdCBxdWVyeUFsbEJ5Um9sZSA9IChjb250YWluZXIsIHJvbGUsIHtcbiAgaGlkZGVuID0gKDAsIF9hbGxVdGlscy5nZXRDb25maWcpKCkuZGVmYXVsdEhpZGRlbixcbiAgbmFtZSxcbiAgZGVzY3JpcHRpb24sXG4gIHF1ZXJ5RmFsbGJhY2tzID0gZmFsc2UsXG4gIHNlbGVjdGVkLFxuICBidXN5LFxuICBjaGVja2VkLFxuICBwcmVzc2VkLFxuICBjdXJyZW50LFxuICBsZXZlbCxcbiAgZXhwYW5kZWQsXG4gIHZhbHVlOiB7XG4gICAgbm93OiB2YWx1ZU5vdyxcbiAgICBtaW46IHZhbHVlTWluLFxuICAgIG1heDogdmFsdWVNYXgsXG4gICAgdGV4dDogdmFsdWVUZXh0XG4gIH0gPSB7fVxufSA9IHt9KSA9PiB7XG4gICgwLCBfaGVscGVycy5jaGVja0NvbnRhaW5lclR5cGUpKGNvbnRhaW5lcik7XG4gIGlmIChzZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIF9hbGxSb2xlcyRnZXQ7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1bmtub3duIHJvbGVzXG4gICAgaWYgKCgoX2FsbFJvbGVzJGdldCA9IF9hcmlhUXVlcnkucm9sZXMuZ2V0KHJvbGUpKSA9PSBudWxsID8gdm9pZCAwIDogX2FsbFJvbGVzJGdldC5wcm9wc1snYXJpYS1zZWxlY3RlZCddKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYXJpYS1zZWxlY3RlZFwiIGlzIG5vdCBzdXBwb3J0ZWQgb24gcm9sZSBcIiR7cm9sZX1cIi5gKTtcbiAgICB9XG4gIH1cbiAgaWYgKGJ1c3kgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBfYWxsUm9sZXMkZ2V0MjtcbiAgICAvLyBndWFyZCBhZ2FpbnN0IHVua25vd24gcm9sZXNcbiAgICBpZiAoKChfYWxsUm9sZXMkZ2V0MiA9IF9hcmlhUXVlcnkucm9sZXMuZ2V0KHJvbGUpKSA9PSBudWxsID8gdm9pZCAwIDogX2FsbFJvbGVzJGdldDIucHJvcHNbJ2FyaWEtYnVzeSddKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYXJpYS1idXN5XCIgaXMgbm90IHN1cHBvcnRlZCBvbiByb2xlIFwiJHtyb2xlfVwiLmApO1xuICAgIH1cbiAgfVxuICBpZiAoY2hlY2tlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIF9hbGxSb2xlcyRnZXQzO1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdW5rbm93biByb2xlc1xuICAgIGlmICgoKF9hbGxSb2xlcyRnZXQzID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0My5wcm9wc1snYXJpYS1jaGVja2VkJ10pID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJhcmlhLWNoZWNrZWRcIiBpcyBub3Qgc3VwcG9ydGVkIG9uIHJvbGUgXCIke3JvbGV9XCIuYCk7XG4gICAgfVxuICB9XG4gIGlmIChwcmVzc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgX2FsbFJvbGVzJGdldDQ7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1bmtub3duIHJvbGVzXG4gICAgaWYgKCgoX2FsbFJvbGVzJGdldDQgPSBfYXJpYVF1ZXJ5LnJvbGVzLmdldChyb2xlKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hbGxSb2xlcyRnZXQ0LnByb3BzWydhcmlhLXByZXNzZWQnXSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcImFyaWEtcHJlc3NlZFwiIGlzIG5vdCBzdXBwb3J0ZWQgb24gcm9sZSBcIiR7cm9sZX1cIi5gKTtcbiAgICB9XG4gIH1cbiAgaWYgKGN1cnJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBfYWxsUm9sZXMkZ2V0NTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdW5rbm93biByb2xlc1xuICAgIC8vIEFsbCBjdXJyZW50bHkgcmVsZWFzZWQgQVJJQSB2ZXJzaW9ucyBzdXBwb3J0IGBhcmlhLWN1cnJlbnRgIG9uIGFsbCByb2xlcy5cbiAgICAvLyBMZWF2aW5nIHRoaXMgZm9yIHN5bWV0cnkgYW5kIGZvcndhcmQgY29tcGF0aWJpbGl0eVxuICAgIGlmICgoKF9hbGxSb2xlcyRnZXQ1ID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0NS5wcm9wc1snYXJpYS1jdXJyZW50J10pID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJhcmlhLWN1cnJlbnRcIiBpcyBub3Qgc3VwcG9ydGVkIG9uIHJvbGUgXCIke3JvbGV9XCIuYCk7XG4gICAgfVxuICB9XG4gIGlmIChsZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1c2luZyBgbGV2ZWxgIG9wdGlvbiB3aXRoIGFueSByb2xlIG90aGVyIHRoYW4gYGhlYWRpbmdgXG4gICAgaWYgKHJvbGUgIT09ICdoZWFkaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSb2xlIFwiJHtyb2xlfVwiIGNhbm5vdCBoYXZlIFwibGV2ZWxcIiBwcm9wZXJ0eS5gKTtcbiAgICB9XG4gIH1cbiAgaWYgKHZhbHVlTm93ICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgX2FsbFJvbGVzJGdldDY7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1bmtub3duIHJvbGVzXG4gICAgaWYgKCgoX2FsbFJvbGVzJGdldDYgPSBfYXJpYVF1ZXJ5LnJvbGVzLmdldChyb2xlKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hbGxSb2xlcyRnZXQ2LnByb3BzWydhcmlhLXZhbHVlbm93J10pID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJhcmlhLXZhbHVlbm93XCIgaXMgbm90IHN1cHBvcnRlZCBvbiByb2xlIFwiJHtyb2xlfVwiLmApO1xuICAgIH1cbiAgfVxuICBpZiAodmFsdWVNYXggIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBfYWxsUm9sZXMkZ2V0NztcbiAgICAvLyBndWFyZCBhZ2FpbnN0IHVua25vd24gcm9sZXNcbiAgICBpZiAoKChfYWxsUm9sZXMkZ2V0NyA9IF9hcmlhUXVlcnkucm9sZXMuZ2V0KHJvbGUpKSA9PSBudWxsID8gdm9pZCAwIDogX2FsbFJvbGVzJGdldDcucHJvcHNbJ2FyaWEtdmFsdWVtYXgnXSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcImFyaWEtdmFsdWVtYXhcIiBpcyBub3Qgc3VwcG9ydGVkIG9uIHJvbGUgXCIke3JvbGV9XCIuYCk7XG4gICAgfVxuICB9XG4gIGlmICh2YWx1ZU1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIF9hbGxSb2xlcyRnZXQ4O1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdW5rbm93biByb2xlc1xuICAgIGlmICgoKF9hbGxSb2xlcyRnZXQ4ID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0OC5wcm9wc1snYXJpYS12YWx1ZW1pbiddKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYXJpYS12YWx1ZW1pblwiIGlzIG5vdCBzdXBwb3J0ZWQgb24gcm9sZSBcIiR7cm9sZX1cIi5gKTtcbiAgICB9XG4gIH1cbiAgaWYgKHZhbHVlVGV4dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIF9hbGxSb2xlcyRnZXQ5O1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdW5rbm93biByb2xlc1xuICAgIGlmICgoKF9hbGxSb2xlcyRnZXQ5ID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0OS5wcm9wc1snYXJpYS12YWx1ZXRleHQnXSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcImFyaWEtdmFsdWV0ZXh0XCIgaXMgbm90IHN1cHBvcnRlZCBvbiByb2xlIFwiJHtyb2xlfVwiLmApO1xuICAgIH1cbiAgfVxuICBpZiAoZXhwYW5kZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBfYWxsUm9sZXMkZ2V0MTA7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1bmtub3duIHJvbGVzXG4gICAgaWYgKCgoX2FsbFJvbGVzJGdldDEwID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0MTAucHJvcHNbJ2FyaWEtZXhwYW5kZWQnXSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcImFyaWEtZXhwYW5kZWRcIiBpcyBub3Qgc3VwcG9ydGVkIG9uIHJvbGUgXCIke3JvbGV9XCIuYCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHN1YnRyZWVJc0luYWNjZXNzaWJsZUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbiAgZnVuY3Rpb24gY2FjaGVkSXNTdWJ0cmVlSW5hY2Nlc3NpYmxlKGVsZW1lbnQpIHtcbiAgICBpZiAoIXN1YnRyZWVJc0luYWNjZXNzaWJsZUNhY2hlLmhhcyhlbGVtZW50KSkge1xuICAgICAgc3VidHJlZUlzSW5hY2Nlc3NpYmxlQ2FjaGUuc2V0KGVsZW1lbnQsICgwLCBfcm9sZUhlbHBlcnMuaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlKShlbGVtZW50KSk7XG4gICAgfVxuICAgIHJldHVybiBzdWJ0cmVlSXNJbmFjY2Vzc2libGVDYWNoZS5nZXQoZWxlbWVudCk7XG4gIH1cbiAgcmV0dXJuIEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXG4gIC8vIE9ubHkgcXVlcnkgZWxlbWVudHMgdGhhdCBjYW4gYmUgbWF0Y2hlZCBieSB0aGUgZm9sbG93aW5nIGZpbHRlcnNcbiAgbWFrZVJvbGVTZWxlY3Rvcihyb2xlKSkpLmZpbHRlcihub2RlID0+IHtcbiAgICBjb25zdCBpc1JvbGVTcGVjaWZpZWRFeHBsaWNpdGx5ID0gbm9kZS5oYXNBdHRyaWJ1dGUoJ3JvbGUnKTtcbiAgICBpZiAoaXNSb2xlU3BlY2lmaWVkRXhwbGljaXRseSkge1xuICAgICAgY29uc3Qgcm9sZVZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ3JvbGUnKTtcbiAgICAgIGlmIChxdWVyeUZhbGxiYWNrcykge1xuICAgICAgICByZXR1cm4gcm9sZVZhbHVlLnNwbGl0KCcgJykuZmlsdGVyKEJvb2xlYW4pLnNvbWUocm9sZUF0dHJpYnV0ZVRva2VuID0+IHJvbGVBdHRyaWJ1dGVUb2tlbiA9PT0gcm9sZSk7XG4gICAgICB9XG4gICAgICAvLyBvdGhlciB3aXNlIG9ubHkgc2VuZCB0aGUgZmlyc3QgdG9rZW4gdG8gbWF0Y2hcbiAgICAgIGNvbnN0IFtmaXJzdFJvbGVBdHRyaWJ1dGVUb2tlbl0gPSByb2xlVmFsdWUuc3BsaXQoJyAnKTtcbiAgICAgIHJldHVybiBmaXJzdFJvbGVBdHRyaWJ1dGVUb2tlbiA9PT0gcm9sZTtcbiAgICB9XG4gICAgY29uc3QgaW1wbGljaXRSb2xlcyA9ICgwLCBfcm9sZUhlbHBlcnMuZ2V0SW1wbGljaXRBcmlhUm9sZXMpKG5vZGUpO1xuICAgIHJldHVybiBpbXBsaWNpdFJvbGVzLnNvbWUoaW1wbGljaXRSb2xlID0+IHtcbiAgICAgIHJldHVybiBpbXBsaWNpdFJvbGUgPT09IHJvbGU7XG4gICAgfSk7XG4gIH0pLmZpbHRlcihlbGVtZW50ID0+IHtcbiAgICBpZiAoc2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHNlbGVjdGVkID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhU2VsZWN0ZWQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoYnVzeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYnVzeSA9PT0gKDAsIF9yb2xlSGVscGVycy5jb21wdXRlQXJpYUJ1c3kpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoY2hlY2tlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gY2hlY2tlZCA9PT0gKDAsIF9yb2xlSGVscGVycy5jb21wdXRlQXJpYUNoZWNrZWQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAocHJlc3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJlc3NlZCA9PT0gKDAsIF9yb2xlSGVscGVycy5jb21wdXRlQXJpYVByZXNzZWQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoY3VycmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gY3VycmVudCA9PT0gKDAsIF9yb2xlSGVscGVycy5jb21wdXRlQXJpYUN1cnJlbnQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoZXhwYW5kZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV4cGFuZGVkID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhRXhwYW5kZWQpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAobGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGxldmVsID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVIZWFkaW5nTGV2ZWwpKGVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAodmFsdWVOb3cgIT09IHVuZGVmaW5lZCB8fCB2YWx1ZU1heCAhPT0gdW5kZWZpbmVkIHx8IHZhbHVlTWluICE9PSB1bmRlZmluZWQgfHwgdmFsdWVUZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxldCB2YWx1ZU1hdGNoZXMgPSB0cnVlO1xuICAgICAgaWYgKHZhbHVlTm93ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWVNYXRjaGVzICYmICh2YWx1ZU1hdGNoZXMgPSB2YWx1ZU5vdyA9PT0gKDAsIF9yb2xlSGVscGVycy5jb21wdXRlQXJpYVZhbHVlTm93KShlbGVtZW50KSk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWVNYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZU1hdGNoZXMgJiYgKHZhbHVlTWF0Y2hlcyA9IHZhbHVlTWF4ID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhVmFsdWVNYXgpKGVsZW1lbnQpKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZU1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlTWF0Y2hlcyAmJiAodmFsdWVNYXRjaGVzID0gdmFsdWVNaW4gPT09ICgwLCBfcm9sZUhlbHBlcnMuY29tcHV0ZUFyaWFWYWx1ZU1pbikoZWxlbWVudCkpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlVGV4dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlTWF0Y2hlcyAmJiAodmFsdWVNYXRjaGVzID0gKDAsIF9hbGxVdGlscy5tYXRjaGVzKSgoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhVmFsdWVUZXh0KShlbGVtZW50KSA/PyBudWxsLCBlbGVtZW50LCB2YWx1ZVRleHQsIHRleHQgPT4gdGV4dCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlTWF0Y2hlcztcbiAgICB9XG4gICAgLy8gZG9uJ3QgY2FyZSBpZiBhcmlhIGF0dHJpYnV0ZXMgYXJlIHVuc3BlY2lmaWVkXG4gICAgcmV0dXJuIHRydWU7XG4gIH0pLmZpbHRlcihlbGVtZW50ID0+IHtcbiAgICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBEb24ndCBjYXJlXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCBfYWxsVXRpbHMubWF0Y2hlcykoKDAsIF9kb21BY2Nlc3NpYmlsaXR5QXBpLmNvbXB1dGVBY2Nlc3NpYmxlTmFtZSkoZWxlbWVudCwge1xuICAgICAgY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHM6ICgwLCBfYWxsVXRpbHMuZ2V0Q29uZmlnKSgpLmNvbXB1dGVkU3R5bGVTdXBwb3J0c1BzZXVkb0VsZW1lbnRzXG4gICAgfSksIGVsZW1lbnQsIG5hbWUsIHRleHQgPT4gdGV4dCk7XG4gIH0pLmZpbHRlcihlbGVtZW50ID0+IHtcbiAgICBpZiAoZGVzY3JpcHRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gRG9uJ3QgY2FyZVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAoMCwgX2FsbFV0aWxzLm1hdGNoZXMpKCgwLCBfZG9tQWNjZXNzaWJpbGl0eUFwaS5jb21wdXRlQWNjZXNzaWJsZURlc2NyaXB0aW9uKShlbGVtZW50LCB7XG4gICAgICBjb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50czogKDAsIF9hbGxVdGlscy5nZXRDb25maWcpKCkuY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHNcbiAgICB9KSwgZWxlbWVudCwgZGVzY3JpcHRpb24sIHRleHQgPT4gdGV4dCk7XG4gIH0pLmZpbHRlcihlbGVtZW50ID0+IHtcbiAgICByZXR1cm4gaGlkZGVuID09PSBmYWxzZSA/ICgwLCBfcm9sZUhlbHBlcnMuaXNJbmFjY2Vzc2libGUpKGVsZW1lbnQsIHtcbiAgICAgIGlzU3VidHJlZUluYWNjZXNzaWJsZTogY2FjaGVkSXNTdWJ0cmVlSW5hY2Nlc3NpYmxlXG4gICAgfSkgPT09IGZhbHNlIDogdHJ1ZTtcbiAgfSk7XG59O1xuZnVuY3Rpb24gbWFrZVJvbGVTZWxlY3Rvcihyb2xlKSB7XG4gIGNvbnN0IGV4cGxpY2l0Um9sZVNlbGVjdG9yID0gYCpbcm9sZX49XCIke3JvbGV9XCJdYDtcbiAgY29uc3Qgcm9sZVJlbGF0aW9ucyA9IF9hcmlhUXVlcnkucm9sZUVsZW1lbnRzLmdldChyb2xlKSA/PyBuZXcgU2V0KCk7XG4gIGNvbnN0IGltcGxpY2l0Um9sZVNlbGVjdG9ycyA9IG5ldyBTZXQoQXJyYXkuZnJvbShyb2xlUmVsYXRpb25zKS5tYXAoKHtcbiAgICBuYW1lXG4gIH0pID0+IG5hbWUpKTtcblxuICAvLyBDdXJyZW50IHRyYW5zcGlsYXRpb24gY29uZmlnIHNvbWV0aW1lcyBhc3N1bWVzIGAuLi5gIGlzIGFsd2F5cyBhcHBsaWVkIHRvIGFycmF5cy5cbiAgLy8gYC4uLmAgaXMgZXF1aXZhbGVudCB0byBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgZm9yIGFycmF5cy5cbiAgLy8gSWYgeW91IHJlcGxhY2UgdGhpcyBjb2RlIHdpdGggYFtleHBsaWNpdFJvbGVTZWxlY3RvciwgLi4uaW1wbGljaXRSb2xlU2VsZWN0b3JzXWAsIG1ha2Ugc3VyZSBldmVyeSB0cmFuc3BpbGF0aW9uIHRhcmdldCByZXRhaW5zIHRoZSBgLi4uYCBpbiBmYXZvciBvZiBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAuXG4gIHJldHVybiBbZXhwbGljaXRSb2xlU2VsZWN0b3JdLmNvbmNhdChBcnJheS5mcm9tKGltcGxpY2l0Um9sZVNlbGVjdG9ycykpLmpvaW4oJywnKTtcbn1cbmNvbnN0IGdldE5hbWVIaW50ID0gbmFtZSA9PiB7XG4gIGxldCBuYW1lSGludCA9ICcnO1xuICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbmFtZUhpbnQgPSAnJztcbiAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICBuYW1lSGludCA9IGAgYW5kIG5hbWUgXCIke25hbWV9XCJgO1xuICB9IGVsc2Uge1xuICAgIG5hbWVIaW50ID0gYCBhbmQgbmFtZSBcXGAke25hbWV9XFxgYDtcbiAgfVxuICByZXR1cm4gbmFtZUhpbnQ7XG59O1xuY29uc3QgZ2V0TXVsdGlwbGVFcnJvciA9IChjLCByb2xlLCB7XG4gIG5hbWVcbn0gPSB7fSkgPT4ge1xuICByZXR1cm4gYEZvdW5kIG11bHRpcGxlIGVsZW1lbnRzIHdpdGggdGhlIHJvbGUgXCIke3JvbGV9XCIke2dldE5hbWVIaW50KG5hbWUpfWA7XG59O1xuY29uc3QgZ2V0TWlzc2luZ0Vycm9yID0gKGNvbnRhaW5lciwgcm9sZSwge1xuICBoaWRkZW4gPSAoMCwgX2FsbFV0aWxzLmdldENvbmZpZykoKS5kZWZhdWx0SGlkZGVuLFxuICBuYW1lLFxuICBkZXNjcmlwdGlvblxufSA9IHt9KSA9PiB7XG4gIGlmICgoMCwgX2FsbFV0aWxzLmdldENvbmZpZykoKS5fZGlzYWJsZUV4cGVuc2l2ZUVycm9yRGlhZ25vc3RpY3MpIHtcbiAgICByZXR1cm4gYFVuYWJsZSB0byBmaW5kIHJvbGU9XCIke3JvbGV9XCIke2dldE5hbWVIaW50KG5hbWUpfWA7XG4gIH1cbiAgbGV0IHJvbGVzID0gJyc7XG4gIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkRWxlbWVudCA9PiB7XG4gICAgcm9sZXMgKz0gKDAsIF9yb2xlSGVscGVycy5wcmV0dHlSb2xlcykoY2hpbGRFbGVtZW50LCB7XG4gICAgICBoaWRkZW4sXG4gICAgICBpbmNsdWRlRGVzY3JpcHRpb246IGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSk7XG4gIGxldCByb2xlTWVzc2FnZTtcbiAgaWYgKHJvbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChoaWRkZW4gPT09IGZhbHNlKSB7XG4gICAgICByb2xlTWVzc2FnZSA9ICdUaGVyZSBhcmUgbm8gYWNjZXNzaWJsZSByb2xlcy4gQnV0IHRoZXJlIG1pZ2h0IGJlIHNvbWUgaW5hY2Nlc3NpYmxlIHJvbGVzLiAnICsgJ0lmIHlvdSB3aXNoIHRvIGFjY2VzcyB0aGVtLCB0aGVuIHNldCB0aGUgYGhpZGRlbmAgb3B0aW9uIHRvIGB0cnVlYC4gJyArICdMZWFybiBtb3JlIGFib3V0IHRoaXMgaGVyZTogaHR0cHM6Ly90ZXN0aW5nLWxpYnJhcnkuY29tL2RvY3MvZG9tLXRlc3RpbmctbGlicmFyeS9hcGktcXVlcmllcyNieXJvbGUnO1xuICAgIH0gZWxzZSB7XG4gICAgICByb2xlTWVzc2FnZSA9ICdUaGVyZSBhcmUgbm8gYXZhaWxhYmxlIHJvbGVzLic7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJvbGVNZXNzYWdlID0gYFxuSGVyZSBhcmUgdGhlICR7aGlkZGVuID09PSBmYWxzZSA/ICdhY2Nlc3NpYmxlJyA6ICdhdmFpbGFibGUnfSByb2xlczpcblxuICAke3JvbGVzLnJlcGxhY2UoL1xcbi9nLCAnXFxuICAnKS5yZXBsYWNlKC9cXG5cXHNcXHNcXG4vZywgJ1xcblxcbicpfVxuYC50cmltKCk7XG4gIH1cbiAgbGV0IG5hbWVIaW50ID0gJyc7XG4gIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICBuYW1lSGludCA9ICcnO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgIG5hbWVIaW50ID0gYCBhbmQgbmFtZSBcIiR7bmFtZX1cImA7XG4gIH0gZWxzZSB7XG4gICAgbmFtZUhpbnQgPSBgIGFuZCBuYW1lIFxcYCR7bmFtZX1cXGBgO1xuICB9XG4gIGxldCBkZXNjcmlwdGlvbkhpbnQgPSAnJztcbiAgaWYgKGRlc2NyaXB0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICBkZXNjcmlwdGlvbkhpbnQgPSAnJztcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgZGVzY3JpcHRpb25IaW50ID0gYCBhbmQgZGVzY3JpcHRpb24gXCIke2Rlc2NyaXB0aW9ufVwiYDtcbiAgfSBlbHNlIHtcbiAgICBkZXNjcmlwdGlvbkhpbnQgPSBgIGFuZCBkZXNjcmlwdGlvbiBcXGAke2Rlc2NyaXB0aW9ufVxcYGA7XG4gIH1cbiAgcmV0dXJuIGBcblVuYWJsZSB0byBmaW5kIGFuICR7aGlkZGVuID09PSBmYWxzZSA/ICdhY2Nlc3NpYmxlICcgOiAnJ31lbGVtZW50IHdpdGggdGhlIHJvbGUgXCIke3JvbGV9XCIke25hbWVIaW50fSR7ZGVzY3JpcHRpb25IaW50fVxuXG4ke3JvbGVNZXNzYWdlfWAudHJpbSgpO1xufTtcbmNvbnN0IHF1ZXJ5QWxsQnlSb2xlV2l0aFN1Z2dlc3Rpb25zID0gZXhwb3J0cy5xdWVyeUFsbEJ5Um9sZSA9ICgwLCBfcXVlcnlIZWxwZXJzLndyYXBBbGxCeVF1ZXJ5V2l0aFN1Z2dlc3Rpb24pKHF1ZXJ5QWxsQnlSb2xlLCBxdWVyeUFsbEJ5Um9sZS5uYW1lLCAncXVlcnlBbGwnKTtcbmNvbnN0IFtxdWVyeUJ5Um9sZSwgZ2V0QWxsQnlSb2xlLCBnZXRCeVJvbGUsIGZpbmRBbGxCeVJvbGUsIGZpbmRCeVJvbGVdID0gKDAsIF9hbGxVdGlscy5idWlsZFF1ZXJpZXMpKHF1ZXJ5QWxsQnlSb2xlLCBnZXRNdWx0aXBsZUVycm9yLCBnZXRNaXNzaW5nRXJyb3IpO1xuZXhwb3J0cy5maW5kQnlSb2xlID0gZmluZEJ5Um9sZTtcbmV4cG9ydHMuZmluZEFsbEJ5Um9sZSA9IGZpbmRBbGxCeVJvbGU7XG5leHBvcnRzLmdldEJ5Um9sZSA9IGdldEJ5Um9sZTtcbmV4cG9ydHMuZ2V0QWxsQnlSb2xlID0gZ2V0QWxsQnlSb2xlO1xuZXhwb3J0cy5xdWVyeUJ5Um9sZSA9IHF1ZXJ5QnlSb2xlOyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFDM0NDLEtBQUssRUFBRTtBQUNULENBQUMsQ0FBQztBQUNGRCxPQUFPLENBQUNFLFdBQVcsR0FBR0YsT0FBTyxDQUFDRyxjQUFjLEdBQUdILE9BQU8sQ0FBQ0ksU0FBUyxHQUFHSixPQUFPLENBQUNLLFlBQVksR0FBR0wsT0FBTyxDQUFDTSxVQUFVLEdBQUdOLE9BQU8sQ0FBQ08sYUFBYSxHQUFHLEtBQUssQ0FBQztBQUM3SSxJQUFJQyxvQkFBb0IsR0FBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQzNELElBQUlDLFVBQVUsR0FBR0QsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUN0QyxJQUFJRSxZQUFZLEdBQUdGLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUM3QyxJQUFJRyxhQUFhLEdBQUdILE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUMvQyxJQUFJSSxRQUFRLEdBQUdKLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDcEMsSUFBSUssU0FBUyxHQUFHTCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ3RDOztBQUVBLE1BQU1OLGNBQWMsR0FBR0EsQ0FBQ1ksU0FBUyxFQUFFQyxJQUFJLEVBQUU7RUFDdkNDLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRUgsU0FBUyxDQUFDSSxTQUFTLEVBQUUsQ0FBQyxDQUFDQyxhQUFhO0VBQ2pEQyxJQUFJO0VBQ0pDLFdBQVc7RUFDWEMsY0FBYyxHQUFHLEtBQUs7RUFDdEJDLFFBQVE7RUFDUkMsSUFBSTtFQUNKQyxPQUFPO0VBQ1BDLE9BQU87RUFDUEMsT0FBTztFQUNQQyxLQUFLO0VBQ0xDLFFBQVE7RUFDUjVCLEtBQUssRUFBRTtJ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