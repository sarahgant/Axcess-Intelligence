576a0012ad317828425db60780b5705e
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.computeAriaBusy = computeAriaBusy;
exports.computeAriaChecked = computeAriaChecked;
exports.computeAriaCurrent = computeAriaCurrent;
exports.computeAriaExpanded = computeAriaExpanded;
exports.computeAriaPressed = computeAriaPressed;
exports.computeAriaSelected = computeAriaSelected;
exports.computeAriaValueMax = computeAriaValueMax;
exports.computeAriaValueMin = computeAriaValueMin;
exports.computeAriaValueNow = computeAriaValueNow;
exports.computeAriaValueText = computeAriaValueText;
exports.computeHeadingLevel = computeHeadingLevel;
exports.getImplicitAriaRoles = getImplicitAriaRoles;
exports.getRoles = getRoles;
exports.isInaccessible = isInaccessible;
exports.isSubtreeInaccessible = isSubtreeInaccessible;
exports.logRoles = void 0;
exports.prettyRoles = prettyRoles;
var _ariaQuery = require("aria-query");
var _domAccessibilityApi = require("dom-accessibility-api");
var _prettyDom = require("./pretty-dom");
var _config = require("./config");
const elementRoleList = buildElementRoleList(_ariaQuery.elementRoles);

/**
 * @param {Element} element -
 * @returns {boolean} - `true` if `element` and its subtree are inaccessible
 */
function isSubtreeInaccessible(element) {
  if (element.hidden === true) {
    return true;
  }
  if (element.getAttribute('aria-hidden') === 'true') {
    return true;
  }
  const window = element.ownerDocument.defaultView;
  if (window.getComputedStyle(element).display === 'none') {
    return true;
  }
  return false;
}

/**
 * Partial implementation https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion
 * which should only be used for elements with a non-presentational role i.e.
 * `role="none"` and `role="presentation"` will not be excluded.
 *
 * Implements aria-hidden semantics (i.e. parent overrides child)
 * Ignores "Child Presentational: True" characteristics
 *
 * @param {Element} element -
 * @param {object} [options] -
 * @param {function (element: Element): boolean} options.isSubtreeInaccessible -
 * can be used to return cached results from previous isSubtreeInaccessible calls
 * @returns {boolean} true if excluded, otherwise false
 */
function isInaccessible(element, options = {}) {
  const {
    isSubtreeInaccessible: isSubtreeInaccessibleImpl = isSubtreeInaccessible
  } = options;
  const window = element.ownerDocument.defaultView;
  // since visibility is inherited we can exit early
  if (window.getComputedStyle(element).visibility === 'hidden') {
    return true;
  }
  let currentElement = element;
  while (currentElement) {
    if (isSubtreeInaccessibleImpl(currentElement)) {
      return true;
    }
    currentElement = currentElement.parentElement;
  }
  return false;
}
function getImplicitAriaRoles(currentNode) {
  // eslint bug here:
  // eslint-disable-next-line no-unused-vars
  for (const {
    match,
    roles
  } of elementRoleList) {
    if (match(currentNode)) {
      return [...roles];
    }
  }
  return [];
}
function buildElementRoleList(elementRolesMap) {
  function makeElementSelector({
    name,
    attributes
  }) {
    return `${name}${attributes.map(({
      name: attributeName,
      value,
      constraints = []
    }) => {
      const shouldNotExist = constraints.indexOf('undefined') !== -1;
      if (shouldNotExist) {
        return `:not([${attributeName}])`;
      } else if (value) {
        return `[${attributeName}="${value}"]`;
      } else {
        return `[${attributeName}]`;
      }
    }).join('')}`;
  }
  function getSelectorSpecificity({
    attributes = []
  }) {
    return attributes.length;
  }
  function bySelectorSpecificity({
    specificity: leftSpecificity
  }, {
    specificity: rightSpecificity
  }) {
    return rightSpecificity - leftSpecificity;
  }
  function match(element) {
    let {
      attributes = []
    } = element;

    // https://github.com/testing-library/dom-testing-library/issues/814
    const typeTextIndex = attributes.findIndex(attribute => attribute.value && attribute.name === 'type' && attribute.value === 'text');
    if (typeTextIndex >= 0) {
      // not using splice to not mutate the attributes array
      attributes = [...attributes.slice(0, typeTextIndex), ...attributes.slice(typeTextIndex + 1)];
    }
    const selector = makeElementSelector({
      ...element,
      attributes
    });
    return node => {
      if (typeTextIndex >= 0 && node.type !== 'text') {
        return false;
      }
      return node.matches(selector);
    };
  }
  let result = [];

  // eslint bug here:
  // eslint-disable-next-line no-unused-vars
  for (const [element, roles] of elementRolesMap.entries()) {
    result = [...result, {
      match: match(element),
      roles: Array.from(roles),
      specificity: getSelectorSpecificity(element)
    }];
  }
  return result.sort(bySelectorSpecificity);
}
function getRoles(container, {
  hidden = false
} = {}) {
  function flattenDOM(node) {
    return [node, ...Array.from(node.children).reduce((acc, child) => [...acc, ...flattenDOM(child)], [])];
  }
  return flattenDOM(container).filter(element => {
    return hidden === false ? isInaccessible(element) === false : true;
  }).reduce((acc, node) => {
    let roles = [];
    // TODO: This violates html-aria which does not allow any role on every element
    if (node.hasAttribute('role')) {
      roles = node.getAttribute('role').split(' ').slice(0, 1);
    } else {
      roles = getImplicitAriaRoles(node);
    }
    return roles.reduce((rolesAcc, role) => Array.isArray(rolesAcc[role]) ? {
      ...rolesAcc,
      [role]: [...rolesAcc[role], node]
    } : {
      ...rolesAcc,
      [role]: [node]
    }, acc);
  }, {});
}
function prettyRoles(dom, {
  hidden,
  includeDescription
}) {
  const roles = getRoles(dom, {
    hidden
  });
  // We prefer to skip generic role, we don't recommend it
  return Object.entries(roles).filter(([role]) => role !== 'generic').map(([role, elements]) => {
    const delimiterBar = '-'.repeat(50);
    const elementsString = elements.map(el => {
      const nameString = `Name "${(0, _domAccessibilityApi.computeAccessibleName)(el, {
        computedStyleSupportsPseudoElements: (0, _config.getConfig)().computedStyleSupportsPseudoElements
      })}":\n`;
      const domString = (0, _prettyDom.prettyDOM)(el.cloneNode(false));
      if (includeDescription) {
        const descriptionString = `Description "${(0, _domAccessibilityApi.computeAccessibleDescription)(el, {
          computedStyleSupportsPseudoElements: (0, _config.getConfig)().computedStyleSupportsPseudoElements
        })}":\n`;
        return `${nameString}${descriptionString}${domString}`;
      }
      return `${nameString}${domString}`;
    }).join('\n\n');
    return `${role}:\n\n${elementsString}\n\n${delimiterBar}`;
  }).join('\n');
}
const logRoles = (dom, {
  hidden = false
} = {}) => console.log(prettyRoles(dom, {
  hidden
}));

/**
 * @param {Element} element -
 * @returns {boolean | undefined} - false/true if (not)selected, undefined if not selectable
 */
exports.logRoles = logRoles;
function computeAriaSelected(element) {
  // implicit value from html-aam mappings: https://www.w3.org/TR/html-aam-1.0/#html-attribute-state-and-property-mappings
  // https://www.w3.org/TR/html-aam-1.0/#details-id-97
  if (element.tagName === 'OPTION') {
    return element.selected;
  }

  // explicit value
  return checkBooleanAttribute(element, 'aria-selected');
}

/**
 * @param {Element} element -
 * @returns {boolean} -
 */
function computeAriaBusy(element) {
  // https://www.w3.org/TR/wai-aria-1.1/#aria-busy
  return element.getAttribute('aria-busy') === 'true';
}

/**
 * @param {Element} element -
 * @returns {boolean | undefined} - false/true if (not)checked, undefined if not checked-able
 */
function computeAriaChecked(element) {
  // implicit value from html-aam mappings: https://www.w3.org/TR/html-aam-1.0/#html-attribute-state-and-property-mappings
  // https://www.w3.org/TR/html-aam-1.0/#details-id-56
  // https://www.w3.org/TR/html-aam-1.0/#details-id-67
  if ('indeterminate' in element && element.indeterminate) {
    return undefined;
  }
  if ('checked' in element) {
    return element.checked;
  }

  // explicit value
  return checkBooleanAttribute(element, 'aria-checked');
}

/**
 * @param {Element} element -
 * @returns {boolean | undefined} - false/true if (not)pressed, undefined if not press-able
 */
function computeAriaPressed(element) {
  // https://www.w3.org/TR/wai-aria-1.1/#aria-pressed
  return checkBooleanAttribute(element, 'aria-pressed');
}

/**
 * @param {Element} element -
 * @returns {boolean | string | null} -
 */
function computeAriaCurrent(element) {
  // https://www.w3.org/TR/wai-aria-1.1/#aria-current
  return checkBooleanAttribute(element, 'aria-current') ?? element.getAttribute('aria-current') ?? false;
}

/**
 * @param {Element} element -
 * @returns {boolean | undefined} - false/true if (not)expanded, undefined if not expand-able
 */
function computeAriaExpanded(element) {
  // https://www.w3.org/TR/wai-aria-1.1/#aria-expanded
  return checkBooleanAttribute(element, 'aria-expanded');
}
function checkBooleanAttribute(element, attribute) {
  const attributeValue = element.getAttribute(attribute);
  if (attributeValue === 'true') {
    return true;
  }
  if (attributeValue === 'false') {
    return false;
  }
  return undefined;
}

/**
 * @param {Element} element -
 * @returns {number | undefined} - number if implicit heading or aria-level present, otherwise undefined
 */
function computeHeadingLevel(element) {
  // https://w3c.github.io/html-aam/#el-h1-h6
  // https://w3c.github.io/html-aam/#el-h1-h6
  const implicitHeadingLevels = {
    H1: 1,
    H2: 2,
    H3: 3,
    H4: 4,
    H5: 5,
    H6: 6
  };
  // explicit aria-level value
  // https://www.w3.org/TR/wai-aria-1.2/#aria-level
  const ariaLevelAttribute = element.getAttribute('aria-level') && Number(element.getAttribute('aria-level'));
  return ariaLevelAttribute || implicitHeadingLevels[element.tagName];
}

/**
 * @param {Element} element -
 * @returns {number | undefined} -
 */
function computeAriaValueNow(element) {
  const valueNow = element.getAttribute('aria-valuenow');
  return valueNow === null ? undefined : +valueNow;
}

/**
 * @param {Element} element -
 * @returns {number | undefined} -
 */
function computeAriaValueMax(element) {
  const valueMax = element.getAttribute('aria-valuemax');
  return valueMax === null ? undefined : +valueMax;
}

/**
 * @param {Element} element -
 * @returns {number | undefined} -
 */
function computeAriaValueMin(element) {
  const valueMin = element.getAttribute('aria-valuemin');
  return valueMin === null ? undefined : +valueMin;
}

/**
 * @param {Element} element -
 * @returns {string | undefined} -
 */
function computeAriaValueText(element) {
  const valueText = element.getAttribute('aria-valuetext');
  return valueText === null ? undefined : valueText;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNvbXB1dGVBcmlhQnVzeSIsImNvbXB1dGVBcmlhQ2hlY2tlZCIsImNvbXB1dGVBcmlhQ3VycmVudCIsImNvbXB1dGVBcmlhRXhwYW5kZWQiLCJjb21wdXRlQXJpYVByZXNzZWQiLCJjb21wdXRlQXJpYVNlbGVjdGVkIiwiY29tcHV0ZUFyaWFWYWx1ZU1heCIsImNvbXB1dGVBcmlhVmFsdWVNaW4iLCJjb21wdXRlQXJpYVZhbHVlTm93IiwiY29tcHV0ZUFyaWFWYWx1ZVRleHQiLCJjb21wdXRlSGVhZGluZ0xldmVsIiwiZ2V0SW1wbGljaXRBcmlhUm9sZXMiLCJnZXRSb2xlcyIsImlzSW5hY2Nlc3NpYmxlIiwiaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlIiwibG9nUm9sZXMiLCJwcmV0dHlSb2xlcyIsIl9hcmlhUXVlcnkiLCJyZXF1aXJlIiwiX2RvbUFjY2Vzc2liaWxpdHlBcGkiLCJfcHJldHR5RG9tIiwiX2NvbmZpZyIsImVsZW1lbnRSb2xlTGlzdCIsImJ1aWxkRWxlbWVudFJvbGVMaXN0IiwiZWxlbWVudFJvbGVzIiwiZWxlbWVudCIsImhpZGRlbiIsImdldEF0dHJpYnV0ZSIsIndpbmRvdyIsIm93bmVyRG9jdW1lbnQiLCJkZWZhdWx0VmlldyIsImdldENvbXB1dGVkU3R5bGUiLCJkaXNwbGF5Iiwib3B0aW9ucyIsImlzU3VidHJlZUluYWNjZXNzaWJsZUltcGwiLCJ2aXNpYmlsaXR5IiwiY3VycmVudEVsZW1lbnQiLCJwYXJlbnRFbGVtZW50IiwiY3VycmVudE5vZGUiLCJtYXRjaCIsInJvbGVzIiwiZWxlbWVudFJvbGVzTWFwIiwibWFrZUVsZW1lbnRTZWxlY3RvciIsIm5hbWUiLCJhdHRyaWJ1dGVzIiwibWFwIiwiYXR0cmlidXRlTmFtZSIsImNvbnN0cmFpbnRzIiwic2hvdWxkTm90RXhpc3QiLCJpbmRleE9mIiwiam9pbiIsImdldFNlbGVjdG9yU3BlY2lmaWNpdHkiLCJsZW5ndGgiLCJieVNlbGVjdG9yU3BlY2lmaWNpdHkiLCJzcGVjaWZpY2l0eSIsImxlZnRTcGVjaWZpY2l0eSIsInJpZ2h0U3BlY2lmaWNpdHkiLCJ0eXBlVGV4dEluZGV4IiwiZmluZEluZGV4IiwiYXR0cmlidXRlIiwic2xpY2UiLCJzZWxlY3RvciIsIm5vZGUiLCJ0eXBlIiwibWF0Y2hlcyIsInJlc3VsdCIsImVudHJpZXMiLCJBcnJheSIsImZyb20iLCJzb3J0IiwiY29udGFpbmVyIiwiZmxhdHRlbkRPTSIsImNoaWxkcmVuIiwicmVkdWNlIiwiYWNjIiwiY2hpbGQiLCJmaWx0ZXIiLCJoYXNBdHRyaWJ1dGUiLCJzcGxpdCIsInJvbGVzQWNjIiwicm9sZSIsImlzQXJyYXkiLCJkb20iLCJpbmNsdWRlRGVzY3JpcHRpb24iLCJlbGVtZW50cyIsImRlbGltaXRlckJhciIsInJlcGVhdCIsImVsZW1lbnRzU3RyaW5nIiwiZWwiLCJuYW1lU3RyaW5nIiwiY29tcHV0ZUFjY2Vzc2libGVOYW1lIiwiY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHMiLCJnZXRDb25maWciLCJkb21TdHJpbmciLCJwcmV0dHlET00iLCJjbG9uZU5vZGUiLCJkZXNjcmlwdGlvblN0cmluZyIsImNvbXB1dGVBY2Nlc3NpYmxlRGVzY3JpcHRpb24iLCJjb25zb2xlIiwibG9nIiwidGFnTmFtZSIsInNlbGVjdGVkIiwiY2hlY2tCb29sZWFuQXR0cmlidXRlIiwiaW5kZXRlcm1pbmF0ZSIsInVuZGVmaW5lZCIsImNoZWNrZWQiLCJhdHRyaWJ1dGVWYWx1ZSIsImltcGxpY2l0SGVhZGluZ0xldmVscyIsIkgxIiwiSDIiLCJIMyIsIkg0IiwiSDUiLCJINiIsImFyaWFMZXZlbEF0dHJpYnV0ZSIsIk51bWJlciIsInZhbHVlTm93IiwidmFsdWVNYXgiLCJ2YWx1ZU1pbiIsInZhbHVlVGV4dCJdLCJzb3VyY2VzIjpbInJvbGUtaGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY29tcHV0ZUFyaWFCdXN5ID0gY29tcHV0ZUFyaWFCdXN5O1xuZXhwb3J0cy5jb21wdXRlQXJpYUNoZWNrZWQgPSBjb21wdXRlQXJpYUNoZWNrZWQ7XG5leHBvcnRzLmNvbXB1dGVBcmlhQ3VycmVudCA9IGNvbXB1dGVBcmlhQ3VycmVudDtcbmV4cG9ydHMuY29tcHV0ZUFyaWFFeHBhbmRlZCA9IGNvbXB1dGVBcmlhRXhwYW5kZWQ7XG5leHBvcnRzLmNvbXB1dGVBcmlhUHJlc3NlZCA9IGNvbXB1dGVBcmlhUHJlc3NlZDtcbmV4cG9ydHMuY29tcHV0ZUFyaWFTZWxlY3RlZCA9IGNvbXB1dGVBcmlhU2VsZWN0ZWQ7XG5leHBvcnRzLmNvbXB1dGVBcmlhVmFsdWVNYXggPSBjb21wdXRlQXJpYVZhbHVlTWF4O1xuZXhwb3J0cy5jb21wdXRlQXJpYVZhbHVlTWluID0gY29tcHV0ZUFyaWFWYWx1ZU1pbjtcbmV4cG9ydHMuY29tcHV0ZUFyaWFWYWx1ZU5vdyA9IGNvbXB1dGVBcmlhVmFsdWVOb3c7XG5leHBvcnRzLmNvbXB1dGVBcmlhVmFsdWVUZXh0ID0gY29tcHV0ZUFyaWFWYWx1ZVRleHQ7XG5leHBvcnRzLmNvbXB1dGVIZWFkaW5nTGV2ZWwgPSBjb21wdXRlSGVhZGluZ0xldmVsO1xuZXhwb3J0cy5nZXRJbXBsaWNpdEFyaWFSb2xlcyA9IGdldEltcGxpY2l0QXJpYVJvbGVzO1xuZXhwb3J0cy5nZXRSb2xlcyA9IGdldFJvbGVzO1xuZXhwb3J0cy5pc0luYWNjZXNzaWJsZSA9IGlzSW5hY2Nlc3NpYmxlO1xuZXhwb3J0cy5pc1N1YnRyZWVJbmFjY2Vzc2libGUgPSBpc1N1YnRyZWVJbmFjY2Vzc2libGU7XG5leHBvcnRzLmxvZ1JvbGVzID0gdm9pZCAwO1xuZXhwb3J0cy5wcmV0dHlSb2xlcyA9IHByZXR0eVJvbGVzO1xudmFyIF9hcmlhUXVlcnkgPSByZXF1aXJlKFwiYXJpYS1xdWVyeVwiKTtcbnZhciBfZG9tQWNjZXNzaWJpbGl0eUFwaSA9IHJlcXVpcmUoXCJkb20tYWNjZXNzaWJpbGl0eS1hcGlcIik7XG52YXIgX3ByZXR0eURvbSA9IHJlcXVpcmUoXCIuL3ByZXR0eS1kb21cIik7XG52YXIgX2NvbmZpZyA9IHJlcXVpcmUoXCIuL2NvbmZpZ1wiKTtcbmNvbnN0IGVsZW1lbnRSb2xlTGlzdCA9IGJ1aWxkRWxlbWVudFJvbGVMaXN0KF9hcmlhUXVlcnkuZWxlbWVudFJvbGVzKTtcblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge2Jvb2xlYW59IC0gYHRydWVgIGlmIGBlbGVtZW50YCBhbmQgaXRzIHN1YnRyZWUgYXJlIGluYWNjZXNzaWJsZVxuICovXG5mdW5jdGlvbiBpc1N1YnRyZWVJbmFjY2Vzc2libGUoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudC5oaWRkZW4gPT09IHRydWUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJykgPT09ICd0cnVlJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IHdpbmRvdyA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztcbiAgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBQYXJ0aWFsIGltcGxlbWVudGF0aW9uIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjIvI3RyZWVfZXhjbHVzaW9uXG4gKiB3aGljaCBzaG91bGQgb25seSBiZSB1c2VkIGZvciBlbGVtZW50cyB3aXRoIGEgbm9uLXByZXNlbnRhdGlvbmFsIHJvbGUgaS5lLlxuICogYHJvbGU9XCJub25lXCJgIGFuZCBgcm9sZT1cInByZXNlbnRhdGlvblwiYCB3aWxsIG5vdCBiZSBleGNsdWRlZC5cbiAqXG4gKiBJbXBsZW1lbnRzIGFyaWEtaGlkZGVuIHNlbWFudGljcyAoaS5lLiBwYXJlbnQgb3ZlcnJpZGVzIGNoaWxkKVxuICogSWdub3JlcyBcIkNoaWxkIFByZXNlbnRhdGlvbmFsOiBUcnVlXCIgY2hhcmFjdGVyaXN0aWNzXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC1cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLVxuICogQHBhcmFtIHtmdW5jdGlvbiAoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW59IG9wdGlvbnMuaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlIC1cbiAqIGNhbiBiZSB1c2VkIHRvIHJldHVybiBjYWNoZWQgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGlzU3VidHJlZUluYWNjZXNzaWJsZSBjYWxsc1xuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgZXhjbHVkZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0luYWNjZXNzaWJsZShlbGVtZW50LCBvcHRpb25zID0ge30pIHtcbiAgY29uc3Qge1xuICAgIGlzU3VidHJlZUluYWNjZXNzaWJsZTogaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlSW1wbCA9IGlzU3VidHJlZUluYWNjZXNzaWJsZVxuICB9ID0gb3B0aW9ucztcbiAgY29uc3Qgd2luZG93ID0gZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAvLyBzaW5jZSB2aXNpYmlsaXR5IGlzIGluaGVyaXRlZCB3ZSBjYW4gZXhpdCBlYXJseVxuICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkudmlzaWJpbGl0eSA9PT0gJ2hpZGRlbicpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBsZXQgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICB3aGlsZSAoY3VycmVudEVsZW1lbnQpIHtcbiAgICBpZiAoaXNTdWJ0cmVlSW5hY2Nlc3NpYmxlSW1wbChjdXJyZW50RWxlbWVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZ2V0SW1wbGljaXRBcmlhUm9sZXMoY3VycmVudE5vZGUpIHtcbiAgLy8gZXNsaW50IGJ1ZyBoZXJlOlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgZm9yIChjb25zdCB7XG4gICAgbWF0Y2gsXG4gICAgcm9sZXNcbiAgfSBvZiBlbGVtZW50Um9sZUxpc3QpIHtcbiAgICBpZiAobWF0Y2goY3VycmVudE5vZGUpKSB7XG4gICAgICByZXR1cm4gWy4uLnJvbGVzXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdO1xufVxuZnVuY3Rpb24gYnVpbGRFbGVtZW50Um9sZUxpc3QoZWxlbWVudFJvbGVzTWFwKSB7XG4gIGZ1bmN0aW9uIG1ha2VFbGVtZW50U2VsZWN0b3Ioe1xuICAgIG5hbWUsXG4gICAgYXR0cmlidXRlc1xuICB9KSB7XG4gICAgcmV0dXJuIGAke25hbWV9JHthdHRyaWJ1dGVzLm1hcCgoe1xuICAgICAgbmFtZTogYXR0cmlidXRlTmFtZSxcbiAgICAgIHZhbHVlLFxuICAgICAgY29uc3RyYWludHMgPSBbXVxuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IHNob3VsZE5vdEV4aXN0ID0gY29uc3RyYWludHMuaW5kZXhPZigndW5kZWZpbmVkJykgIT09IC0xO1xuICAgICAgaWYgKHNob3VsZE5vdEV4aXN0KSB7XG4gICAgICAgIHJldHVybiBgOm5vdChbJHthdHRyaWJ1dGVOYW1lfV0pYDtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGBbJHthdHRyaWJ1dGVOYW1lfT1cIiR7dmFsdWV9XCJdYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgWyR7YXR0cmlidXRlTmFtZX1dYDtcbiAgICAgIH1cbiAgICB9KS5qb2luKCcnKX1gO1xuICB9XG4gIGZ1bmN0aW9uIGdldFNlbGVjdG9yU3BlY2lmaWNpdHkoe1xuICAgIGF0dHJpYnV0ZXMgPSBbXVxuICB9KSB7XG4gICAgcmV0dXJuIGF0dHJpYnV0ZXMubGVuZ3RoO1xuICB9XG4gIGZ1bmN0aW9uIGJ5U2VsZWN0b3JTcGVjaWZpY2l0eSh7XG4gICAgc3BlY2lmaWNpdHk6IGxlZnRTcGVjaWZpY2l0eVxuICB9LCB7XG4gICAgc3BlY2lmaWNpdHk6IHJpZ2h0U3BlY2lmaWNpdHlcbiAgfSkge1xuICAgIHJldHVybiByaWdodFNwZWNpZmljaXR5IC0gbGVmdFNwZWNpZmljaXR5O1xuICB9XG4gIGZ1bmN0aW9uIG1hdGNoKGVsZW1lbnQpIHtcbiAgICBsZXQge1xuICAgICAgYXR0cmlidXRlcyA9IFtdXG4gICAgfSA9IGVsZW1lbnQ7XG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdGVzdGluZy1saWJyYXJ5L2RvbS10ZXN0aW5nLWxpYnJhcnkvaXNzdWVzLzgxNFxuICAgIGNvbnN0IHR5cGVUZXh0SW5kZXggPSBhdHRyaWJ1dGVzLmZpbmRJbmRleChhdHRyaWJ1dGUgPT4gYXR0cmlidXRlLnZhbHVlICYmIGF0dHJpYnV0ZS5uYW1lID09PSAndHlwZScgJiYgYXR0cmlidXRlLnZhbHVlID09PSAndGV4dCcpO1xuICAgIGlmICh0eXBlVGV4dEluZGV4ID49IDApIHtcbiAgICAgIC8vIG5vdCB1c2luZyBzcGxpY2UgdG8gbm90IG11dGF0ZSB0aGUgYXR0cmlidXRlcyBhcnJheVxuICAgICAgYXR0cmlidXRlcyA9IFsuLi5hdHRyaWJ1dGVzLnNsaWNlKDAsIHR5cGVUZXh0SW5kZXgpLCAuLi5hdHRyaWJ1dGVzLnNsaWNlKHR5cGVUZXh0SW5kZXggKyAxKV07XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdG9yID0gbWFrZUVsZW1lbnRTZWxlY3Rvcih7XG4gICAgICAuLi5lbGVtZW50LFxuICAgICAgYXR0cmlidXRlc1xuICAgIH0pO1xuICAgIHJldHVybiBub2RlID0+IHtcbiAgICAgIGlmICh0eXBlVGV4dEluZGV4ID49IDAgJiYgbm9kZS50eXBlICE9PSAndGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vZGUubWF0Y2hlcyhzZWxlY3Rvcik7XG4gICAgfTtcbiAgfVxuICBsZXQgcmVzdWx0ID0gW107XG5cbiAgLy8gZXNsaW50IGJ1ZyBoZXJlOlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgZm9yIChjb25zdCBbZWxlbWVudCwgcm9sZXNdIG9mIGVsZW1lbnRSb2xlc01hcC5lbnRyaWVzKCkpIHtcbiAgICByZXN1bHQgPSBbLi4ucmVzdWx0LCB7XG4gICAgICBtYXRjaDogbWF0Y2goZWxlbWVudCksXG4gICAgICByb2xlczogQXJyYXkuZnJvbShyb2xlcyksXG4gICAgICBzcGVjaWZpY2l0eTogZ2V0U2VsZWN0b3JTcGVjaWZpY2l0eShlbGVtZW50KVxuICAgIH1dO1xuICB9XG4gIHJldHVybiByZXN1bHQuc29ydChieVNlbGVjdG9yU3BlY2lmaWNpdHkpO1xufVxuZnVuY3Rpb24gZ2V0Um9sZXMoY29udGFpbmVyLCB7XG4gIGhpZGRlbiA9IGZhbHNlXG59ID0ge30pIHtcbiAgZnVuY3Rpb24gZmxhdHRlbkRPTShub2RlKSB7XG4gICAgcmV0dXJuIFtub2RlLCAuLi5BcnJheS5mcm9tKG5vZGUuY2hpbGRyZW4pLnJlZHVjZSgoYWNjLCBjaGlsZCkgPT4gWy4uLmFjYywgLi4uZmxhdHRlbkRPTShjaGlsZCldLCBbXSldO1xuICB9XG4gIHJldHVybiBmbGF0dGVuRE9NKGNvbnRhaW5lcikuZmlsdGVyKGVsZW1lbnQgPT4ge1xuICAgIHJldHVybiBoaWRkZW4gPT09IGZhbHNlID8gaXNJbmFjY2Vzc2libGUoZWxlbWVudCkgPT09IGZhbHNlIDogdHJ1ZTtcbiAgfSkucmVkdWNlKChhY2MsIG5vZGUpID0+IHtcbiAgICBsZXQgcm9sZXMgPSBbXTtcbiAgICAvLyBUT0RPOiBUaGlzIHZpb2xhdGVzIGh0bWwtYXJpYSB3aGljaCBkb2VzIG5vdCBhbGxvdyBhbnkgcm9sZSBvbiBldmVyeSBlbGVtZW50XG4gICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKCdyb2xlJykpIHtcbiAgICAgIHJvbGVzID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ3JvbGUnKS5zcGxpdCgnICcpLnNsaWNlKDAsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb2xlcyA9IGdldEltcGxpY2l0QXJpYVJvbGVzKG5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gcm9sZXMucmVkdWNlKChyb2xlc0FjYywgcm9sZSkgPT4gQXJyYXkuaXNBcnJheShyb2xlc0FjY1tyb2xlXSkgPyB7XG4gICAgICAuLi5yb2xlc0FjYyxcbiAgICAgIFtyb2xlXTogWy4uLnJvbGVzQWNjW3JvbGVdLCBub2RlXVxuICAgIH0gOiB7XG4gICAgICAuLi5yb2xlc0FjYyxcbiAgICAgIFtyb2xlXTogW25vZGVdXG4gICAgfSwgYWNjKTtcbiAgfSwge30pO1xufVxuZnVuY3Rpb24gcHJldHR5Um9sZXMoZG9tLCB7XG4gIGhpZGRlbixcbiAgaW5jbHVkZURlc2NyaXB0aW9uXG59KSB7XG4gIGNvbnN0IHJvbGVzID0gZ2V0Um9sZXMoZG9tLCB7XG4gICAgaGlkZGVuXG4gIH0pO1xuICAvLyBXZSBwcmVmZXIgdG8gc2tpcCBnZW5lcmljIHJvbGUsIHdlIGRvbid0IHJlY29tbWVuZCBpdFxuICByZXR1cm4gT2JqZWN0LmVudHJpZXMocm9sZXMpLmZpbHRlcigoW3JvbGVdKSA9PiByb2xlICE9PSAnZ2VuZXJpYycpLm1hcCgoW3JvbGUsIGVsZW1lbnRzXSkgPT4ge1xuICAgIGNvbnN0IGRlbGltaXRlckJhciA9ICctJy5yZXBlYXQoNTApO1xuICAgIGNvbnN0IGVsZW1lbnRzU3RyaW5nID0gZWxlbWVudHMubWFwKGVsID0+IHtcbiAgICAgIGNvbnN0IG5hbWVTdHJpbmcgPSBgTmFtZSBcIiR7KDAsIF9kb21BY2Nlc3NpYmlsaXR5QXBpLmNvbXB1dGVBY2Nlc3NpYmxlTmFtZSkoZWwsIHtcbiAgICAgICAgY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHM6ICgwLCBfY29uZmlnLmdldENvbmZpZykoKS5jb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50c1xuICAgICAgfSl9XCI6XFxuYDtcbiAgICAgIGNvbnN0IGRvbVN0cmluZyA9ICgwLCBfcHJldHR5RG9tLnByZXR0eURPTSkoZWwuY2xvbmVOb2RlKGZhbHNlKSk7XG4gICAgICBpZiAoaW5jbHVkZURlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uU3RyaW5nID0gYERlc2NyaXB0aW9uIFwiJHsoMCwgX2RvbUFjY2Vzc2liaWxpdHlBcGkuY29tcHV0ZUFjY2Vzc2libGVEZXNjcmlwdGlvbikoZWwsIHtcbiAgICAgICAgICBjb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50czogKDAsIF9jb25maWcuZ2V0Q29uZmlnKSgpLmNvbXB1dGVkU3R5bGVTdXBwb3J0c1BzZXVkb0VsZW1lbnRzXG4gICAgICAgIH0pfVwiOlxcbmA7XG4gICAgICAgIHJldHVybiBgJHtuYW1lU3RyaW5nfSR7ZGVzY3JpcHRpb25TdHJpbmd9JHtkb21TdHJpbmd9YDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtuYW1lU3RyaW5nfSR7ZG9tU3RyaW5nfWA7XG4gICAgfSkuam9pbignXFxuXFxuJyk7XG4gICAgcmV0dXJuIGAke3JvbGV9OlxcblxcbiR7ZWxlbWVudHNTdHJpbmd9XFxuXFxuJHtkZWxpbWl0ZXJCYXJ9YDtcbiAgfSkuam9pbignXFxuJyk7XG59XG5jb25zdCBsb2dSb2xlcyA9IChkb20sIHtcbiAgaGlkZGVuID0gZmFsc2Vcbn0gPSB7fSkgPT4gY29uc29sZS5sb2cocHJldHR5Um9sZXMoZG9tLCB7XG4gIGhpZGRlblxufSkpO1xuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtXG4gKiBAcmV0dXJucyB7Ym9vbGVhbiB8IHVuZGVmaW5lZH0gLSBmYWxzZS90cnVlIGlmIChub3Qpc2VsZWN0ZWQsIHVuZGVmaW5lZCBpZiBub3Qgc2VsZWN0YWJsZVxuICovXG5leHBvcnRzLmxvZ1JvbGVzID0gbG9nUm9sZXM7XG5mdW5jdGlvbiBjb21wdXRlQXJpYVNlbGVjdGVkKGVsZW1lbnQpIHtcbiAgLy8gaW1wbGljaXQgdmFsdWUgZnJvbSBodG1sLWFhbSBtYXBwaW5nczogaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWwtYWFtLTEuMC8jaHRtbC1hdHRyaWJ1dGUtc3RhdGUtYW5kLXByb3BlcnR5LW1hcHBpbmdzXG4gIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sLWFhbS0xLjAvI2RldGFpbHMtaWQtOTdcbiAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ09QVElPTicpIHtcbiAgICByZXR1cm4gZWxlbWVudC5zZWxlY3RlZDtcbiAgfVxuXG4gIC8vIGV4cGxpY2l0IHZhbHVlXG4gIHJldHVybiBjaGVja0Jvb2xlYW5BdHRyaWJ1dGUoZWxlbWVudCwgJ2FyaWEtc2VsZWN0ZWQnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge2Jvb2xlYW59IC1cbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUFyaWFCdXN5KGVsZW1lbnQpIHtcbiAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jYXJpYS1idXN5XG4gIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1idXN5JykgPT09ICd0cnVlJztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge2Jvb2xlYW4gfCB1bmRlZmluZWR9IC0gZmFsc2UvdHJ1ZSBpZiAobm90KWNoZWNrZWQsIHVuZGVmaW5lZCBpZiBub3QgY2hlY2tlZC1hYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVBcmlhQ2hlY2tlZChlbGVtZW50KSB7XG4gIC8vIGltcGxpY2l0IHZhbHVlIGZyb20gaHRtbC1hYW0gbWFwcGluZ3M6IGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sLWFhbS0xLjAvI2h0bWwtYXR0cmlidXRlLXN0YXRlLWFuZC1wcm9wZXJ0eS1tYXBwaW5nc1xuICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbC1hYW0tMS4wLyNkZXRhaWxzLWlkLTU2XG4gIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sLWFhbS0xLjAvI2RldGFpbHMtaWQtNjdcbiAgaWYgKCdpbmRldGVybWluYXRlJyBpbiBlbGVtZW50ICYmIGVsZW1lbnQuaW5kZXRlcm1pbmF0ZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCdjaGVja2VkJyBpbiBlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2hlY2tlZDtcbiAgfVxuXG4gIC8vIGV4cGxpY2l0IHZhbHVlXG4gIHJldHVybiBjaGVja0Jvb2xlYW5BdHRyaWJ1dGUoZWxlbWVudCwgJ2FyaWEtY2hlY2tlZCcpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtXG4gKiBAcmV0dXJucyB7Ym9vbGVhbiB8IHVuZGVmaW5lZH0gLSBmYWxzZS90cnVlIGlmIChub3QpcHJlc3NlZCwgdW5kZWZpbmVkIGlmIG5vdCBwcmVzcy1hYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVBcmlhUHJlc3NlZChlbGVtZW50KSB7XG4gIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI2FyaWEtcHJlc3NlZFxuICByZXR1cm4gY2hlY2tCb29sZWFuQXR0cmlidXRlKGVsZW1lbnQsICdhcmlhLXByZXNzZWQnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge2Jvb2xlYW4gfCBzdHJpbmcgfCBudWxsfSAtXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVBcmlhQ3VycmVudChlbGVtZW50KSB7XG4gIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI2FyaWEtY3VycmVudFxuICByZXR1cm4gY2hlY2tCb29sZWFuQXR0cmlidXRlKGVsZW1lbnQsICdhcmlhLWN1cnJlbnQnKSA/PyBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1jdXJyZW50JykgPz8gZmFsc2U7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC1cbiAqIEByZXR1cm5zIHtib29sZWFuIHwgdW5kZWZpbmVkfSAtIGZhbHNlL3RydWUgaWYgKG5vdClleHBhbmRlZCwgdW5kZWZpbmVkIGlmIG5vdCBleHBhbmQtYWJsZVxuICovXG5mdW5jdGlvbiBjb21wdXRlQXJpYUV4cGFuZGVkKGVsZW1lbnQpIHtcbiAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jYXJpYS1leHBhbmRlZFxuICByZXR1cm4gY2hlY2tCb29sZWFuQXR0cmlidXRlKGVsZW1lbnQsICdhcmlhLWV4cGFuZGVkJyk7XG59XG5mdW5jdGlvbiBjaGVja0Jvb2xlYW5BdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlKSB7XG4gIGNvbnN0IGF0dHJpYnV0ZVZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgaWYgKGF0dHJpYnV0ZVZhbHVlID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoYXR0cmlidXRlVmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge251bWJlciB8IHVuZGVmaW5lZH0gLSBudW1iZXIgaWYgaW1wbGljaXQgaGVhZGluZyBvciBhcmlhLWxldmVsIHByZXNlbnQsIG90aGVyd2lzZSB1bmRlZmluZWRcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUhlYWRpbmdMZXZlbChlbGVtZW50KSB7XG4gIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9odG1sLWFhbS8jZWwtaDEtaDZcbiAgLy8gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2h0bWwtYWFtLyNlbC1oMS1oNlxuICBjb25zdCBpbXBsaWNpdEhlYWRpbmdMZXZlbHMgPSB7XG4gICAgSDE6IDEsXG4gICAgSDI6IDIsXG4gICAgSDM6IDMsXG4gICAgSDQ6IDQsXG4gICAgSDU6IDUsXG4gICAgSDY6IDZcbiAgfTtcbiAgLy8gZXhwbGljaXQgYXJpYS1sZXZlbCB2YWx1ZVxuICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4yLyNhcmlhLWxldmVsXG4gIGNvbnN0IGFyaWFMZXZlbEF0dHJpYnV0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJykgJiYgTnVtYmVyKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWxldmVsJykpO1xuICByZXR1cm4gYXJpYUxldmVsQXR0cmlidXRlIHx8IGltcGxpY2l0SGVhZGluZ0xldmVsc1tlbGVtZW50LnRhZ05hbWVdO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtXG4gKiBAcmV0dXJucyB7bnVtYmVyIHwgdW5kZWZpbmVkfSAtXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVBcmlhVmFsdWVOb3coZWxlbWVudCkge1xuICBjb25zdCB2YWx1ZU5vdyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93Jyk7XG4gIHJldHVybiB2YWx1ZU5vdyA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6ICt2YWx1ZU5vdztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLVxuICogQHJldHVybnMge251bWJlciB8IHVuZGVmaW5lZH0gLVxuICovXG5mdW5jdGlvbiBjb21wdXRlQXJpYVZhbHVlTWF4KGVsZW1lbnQpIHtcbiAgY29uc3QgdmFsdWVNYXggPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1heCcpO1xuICByZXR1cm4gdmFsdWVNYXggPT09IG51bGwgPyB1bmRlZmluZWQgOiArdmFsdWVNYXg7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC1cbiAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9IC1cbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUFyaWFWYWx1ZU1pbihlbGVtZW50KSB7XG4gIGNvbnN0IHZhbHVlTWluID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtaW4nKTtcbiAgcmV0dXJuIHZhbHVlTWluID09PSBudWxsID8gdW5kZWZpbmVkIDogK3ZhbHVlTWluO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtXG4gKiBAcmV0dXJucyB7c3RyaW5nIHwgdW5kZWZpbmVkfSAtXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVBcmlhVmFsdWVUZXh0KGVsZW1lbnQpIHtcbiAgY29uc3QgdmFsdWVUZXh0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWV0ZXh0Jyk7XG4gIHJldHVybiB2YWx1ZVRleHQgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVRleHQ7XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUMzQ0MsS0FBSyxFQUFFO0FBQ1QsQ0FBQyxDQUFDO0FBQ0ZELE9BQU8sQ0FBQ0UsZUFBZSxHQUFHQSxlQUFlO0FBQ3pDRixPQUFPLENBQUNHLGtCQUFrQixHQUFHQSxrQkFBa0I7QUFDL0NILE9BQU8sQ0FBQ0ksa0JBQWtCLEdBQUdBLGtCQUFrQjtBQUMvQ0osT0FBTyxDQUFDSyxtQkFBbUIsR0FBR0EsbUJBQW1CO0FBQ2pETCxPQUFPLENBQUNNLGtCQUFrQixHQUFHQSxrQkFBa0I7QUFDL0NOLE9BQU8sQ0FBQ08sbUJBQW1CLEdBQUdBLG1CQUFtQjtBQUNqRFAsT0FBTyxDQUFDUSxtQkFBbUIsR0FBR0EsbUJBQW1CO0FBQ2pEUixPQUFPLENBQUNTLG1CQUFtQixH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