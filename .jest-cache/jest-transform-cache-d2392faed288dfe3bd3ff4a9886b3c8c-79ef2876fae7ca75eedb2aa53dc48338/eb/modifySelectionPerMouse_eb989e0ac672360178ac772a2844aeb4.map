{"version":3,"names":["UI","require","resolveCaretPosition","modifySelectionPerMouseMove","selectionRange","document","target","node","offset","selectionFocus","anchorOffset","start","end","focusOffset","setUISelection","range","cloneRange","cmp","comparePoint","setStart","setEnd","selection","getSelection","undefined","removeAllRanges","addRange","exports"],"sources":["modifySelectionPerMouse.js"],"sourcesContent":["'use strict';\n\nvar UI = require('../../document/UI.js');\nrequire('../../utils/dataTransfer/Clipboard.js');\nvar resolveCaretPosition = require('./resolveCaretPosition.js');\n\nfunction modifySelectionPerMouseMove(selectionRange, { document, target, node, offset }) {\n    const selectionFocus = resolveCaretPosition.resolveCaretPosition({\n        target,\n        node,\n        offset\n    });\n    if ('node' in selectionRange) {\n        // When the mouse is dragged outside of an input/textarea,\n        // the selection is extended to the beginning or end of the input\n        // depending on pointer position.\n        // TODO: extend selection according to pointer position\n        /* istanbul ignore else */ if (selectionFocus.node === selectionRange.node) {\n            const anchorOffset = selectionFocus.offset < selectionRange.start ? selectionRange.end : selectionRange.start;\n            const focusOffset = selectionFocus.offset > selectionRange.end || selectionFocus.offset < selectionRange.start ? selectionFocus.offset : selectionRange.end;\n            UI.setUISelection(selectionRange.node, {\n                anchorOffset,\n                focusOffset\n            });\n        }\n    } else {\n        const range = selectionRange.cloneRange();\n        const cmp = range.comparePoint(selectionFocus.node, selectionFocus.offset);\n        if (cmp < 0) {\n            range.setStart(selectionFocus.node, selectionFocus.offset);\n        } else if (cmp > 0) {\n            range.setEnd(selectionFocus.node, selectionFocus.offset);\n        }\n        const selection = document.getSelection();\n        selection === null || selection === undefined ? undefined : selection.removeAllRanges();\n        selection === null || selection === undefined ? undefined : selection.addRange(range.cloneRange());\n    }\n}\n\nexports.modifySelectionPerMouseMove = modifySelectionPerMouseMove;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,EAAE,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACxCA,OAAO,CAAC,uCAAuC,CAAC;AAChD,IAAIC,oBAAoB,GAAGD,OAAO,CAAC,2BAA2B,CAAC;AAE/D,SAASE,2BAA2BA,CAACC,cAAc,EAAE;EAAEC,QAAQ;EAAEC,MAAM;EAAEC,IAAI;EAAEC;AAAO,CAAC,EAAE;EACrF,MAAMC,cAAc,GAAGP,oBAAoB,CAACA,oBAAoB,CAAC;IAC7DI,MAAM;IACNC,IAAI;IACJC;EACJ,CAAC,CAAC;EACF,IAAI,MAAM,IAAIJ,cAAc,EAAE;IAC1B;IACA;IACA;IACA;IACA;IAA2B,IAAIK,cAAc,CAACF,IAAI,KAAKH,cAAc,CAACG,IAAI,EAAE;MACxE,MAAMG,YAAY,GAAGD,cAAc,CAACD,MAAM,GAAGJ,cAAc,CAACO,KAAK,GAAGP,cAAc,CAACQ,GAAG,GAAGR,cAAc,CAACO,KAAK;MAC7G,MAAME,WAAW,GAAGJ,cAAc,CAACD,MAAM,GAAGJ,cAAc,CAACQ,GAAG,IAAIH,cAAc,CAACD,MAAM,GAAGJ,cAAc,CAACO,KAAK,GAAGF,cAAc,CAACD,MAAM,GAAGJ,cAAc,CAACQ,GAAG;MAC3JZ,EAAE,CAACc,cAAc,CAACV,cAAc,CAACG,IAAI,EAAE;QACnCG,YAAY;QACZG;MACJ,CAAC,CAAC;IACN;EACJ,CAAC,MAAM;IACH,MAAME,KAAK,GAAGX,cAAc,CAACY,UAAU,CAAC,CAAC;IACzC,MAAMC,GAAG,GAAGF,KAAK,CAACG,YAAY,CAACT,cAAc,CAACF,IAAI,EAAEE,cAAc,CAACD,MAAM,CAAC;IAC1E,IAAIS,GAAG,GAAG,CAAC,EAAE;MACTF,KAAK,CAACI,QAAQ,CAACV,cAAc,CAACF,IAAI,EAAEE,cAAc,CAACD,MAAM,CAAC;IAC9D,CAAC,MAAM,IAAIS,GAAG,GAAG,CAAC,EAAE;MAChBF,KAAK,CAACK,MAAM,CAACX,cAAc,CAACF,IAAI,EAAEE,cAAc,CAACD,MAAM,CAAC;IAC5D;IACA,MAAMa,SAAS,GAAGhB,QAAQ,CAACiB,YAAY,CAAC,CAAC;IACzCD,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKE,SAAS,GAAGA,SAAS,GAAGF,SAAS,CAACG,eAAe,CAAC,CAAC;IACvFH,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKE,SAAS,GAAGA,SAAS,GAAGF,SAAS,CAACI,QAAQ,CAACV,KAAK,CAACC,UAAU,CAAC,CAAC,CAAC;EACtG;AACJ;AAEAU,OAAO,CAACvB,2BAA2B,GAAGA,2BAA2B","ignoreList":[]}