7ff1bef2b279c8ade8f931365b39764c
'use strict';

var isElementType = require('../../utils/misc/isElementType.js');
require('../../utils/dataTransfer/Clipboard.js');
var getWindow = require('../../utils/misc/getWindow.js');
var isFocusable = require('../../utils/focus/isFocusable.js');
var cloneEvent = require('../../utils/misc/cloneEvent.js');
var focus = require('../focus.js');
var registry = require('./registry.js');
registry.behavior.click = (event, target, instance) => {
  const context = target.closest('button,input,label,select,textarea');
  const control = context && isElementType.isElementType(context, 'label') && context.control;
  if (control && control !== target) {
    return () => {
      if (isFocusable.isFocusable(control)) {
        focus.focusElement(control);
        instance.dispatchEvent(control, cloneEvent.cloneEvent(event));
      }
    };
  } else if (isElementType.isElementType(target, 'input', {
    type: 'file'
  })) {
    return () => {
      // blur fires when the file selector pops up
      focus.blurElement(target);
      target.dispatchEvent(new (getWindow.getWindow(target).Event)('fileDialog'));
      // focus fires after the file selector has been closed
      focus.focusElement(target);
    };
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc0VsZW1lbnRUeXBlIiwicmVxdWlyZSIsImdldFdpbmRvdyIsImlzRm9jdXNhYmxlIiwiY2xvbmVFdmVudCIsImZvY3VzIiwicmVnaXN0cnkiLCJiZWhhdmlvciIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJpbnN0YW5jZSIsImNvbnRleHQiLCJjbG9zZXN0IiwiY29udHJvbCIsImZvY3VzRWxlbWVudCIsImRpc3BhdGNoRXZlbnQiLCJ0eXBlIiwiYmx1ckVsZW1lbnQiLCJFdmVudCJdLCJzb3VyY2VzIjpbImNsaWNrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGlzRWxlbWVudFR5cGUgPSByZXF1aXJlKCcuLi8uLi91dGlscy9taXNjL2lzRWxlbWVudFR5cGUuanMnKTtcbnJlcXVpcmUoJy4uLy4uL3V0aWxzL2RhdGFUcmFuc2Zlci9DbGlwYm9hcmQuanMnKTtcbnZhciBnZXRXaW5kb3cgPSByZXF1aXJlKCcuLi8uLi91dGlscy9taXNjL2dldFdpbmRvdy5qcycpO1xudmFyIGlzRm9jdXNhYmxlID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvZm9jdXMvaXNGb2N1c2FibGUuanMnKTtcbnZhciBjbG9uZUV2ZW50ID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvbWlzYy9jbG9uZUV2ZW50LmpzJyk7XG52YXIgZm9jdXMgPSByZXF1aXJlKCcuLi9mb2N1cy5qcycpO1xudmFyIHJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9yZWdpc3RyeS5qcycpO1xuXG5yZWdpc3RyeS5iZWhhdmlvci5jbGljayA9IChldmVudCwgdGFyZ2V0LCBpbnN0YW5jZSk9PntcbiAgICBjb25zdCBjb250ZXh0ID0gdGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbixpbnB1dCxsYWJlbCxzZWxlY3QsdGV4dGFyZWEnKTtcbiAgICBjb25zdCBjb250cm9sID0gY29udGV4dCAmJiBpc0VsZW1lbnRUeXBlLmlzRWxlbWVudFR5cGUoY29udGV4dCwgJ2xhYmVsJykgJiYgY29udGV4dC5jb250cm9sO1xuICAgIGlmIChjb250cm9sICYmIGNvbnRyb2wgIT09IHRhcmdldCkge1xuICAgICAgICByZXR1cm4gKCk9PntcbiAgICAgICAgICAgIGlmIChpc0ZvY3VzYWJsZS5pc0ZvY3VzYWJsZShjb250cm9sKSkge1xuICAgICAgICAgICAgICAgIGZvY3VzLmZvY3VzRWxlbWVudChjb250cm9sKTtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5kaXNwYXRjaEV2ZW50KGNvbnRyb2wsIGNsb25lRXZlbnQuY2xvbmVFdmVudChldmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50VHlwZS5pc0VsZW1lbnRUeXBlKHRhcmdldCwgJ2lucHV0Jywge1xuICAgICAgICB0eXBlOiAnZmlsZSdcbiAgICB9KSkge1xuICAgICAgICByZXR1cm4gKCk9PntcbiAgICAgICAgICAgIC8vIGJsdXIgZmlyZXMgd2hlbiB0aGUgZmlsZSBzZWxlY3RvciBwb3BzIHVwXG4gICAgICAgICAgICBmb2N1cy5ibHVyRWxlbWVudCh0YXJnZXQpO1xuICAgICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IChnZXRXaW5kb3cuZ2V0V2luZG93KHRhcmdldCkpLkV2ZW50KCdmaWxlRGlhbG9nJykpO1xuICAgICAgICAgICAgLy8gZm9jdXMgZmlyZXMgYWZ0ZXIgdGhlIGZpbGUgc2VsZWN0b3IgaGFzIGJlZW4gY2xvc2VkXG4gICAgICAgICAgICBmb2N1cy5mb2N1c0VsZW1lbnQodGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUlBLGFBQWEsR0FBR0MsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBQ2hFQSxPQUFPLENBQUMsdUNBQXVDLENBQUM7QUFDaEQsSUFBSUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDeEQsSUFBSUUsV0FBVyxHQUFHRixPQUFPLENBQUMsa0NBQWtDLENBQUM7QUFDN0QsSUFBSUcsVUFBVSxHQUFHSCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFDMUQsSUFBSUksS0FBSyxHQUFHSixPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ2xDLElBQUlLLFFBQVEsR0FBR0wsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUV2Q0ssUUFBUSxDQUFDQyxRQUFRLENBQUNDLEtBQUssR0FBRyxDQUFDQyxLQUFLLEVBQUVDLE1BQU0sRUFBRUMsUUFBUSxLQUFHO0VBQ2pELE1BQU1DLE9BQU8sR0FBR0YsTUFBTSxDQUFDRyxPQUFPLENBQUMsb0NBQW9DLENBQUM7RUFDcEUsTUFBTUMsT0FBTyxHQUFHRixPQUFPLElBQUlaLGFBQWEsQ0FBQ0EsYUFBYSxDQUFDWSxPQUFPLEVBQUUsT0FBTyxDQUFDLElBQUlBLE9BQU8sQ0FBQ0UsT0FBTztFQUMzRixJQUFJQSxPQUFPLElBQUlBLE9BQU8sS0FBS0osTUFBTSxFQUFFO0lBQy9CLE9BQU8sTUFBSTtNQUNQLElBQUlQLFdBQVcsQ0FBQ0EsV0FBVyxDQUFDVyxPQUFPLENBQUMsRUFBRTtRQUNsQ1QsS0FBSyxDQUFDVSxZQUFZLENBQUNELE9BQU8sQ0FBQztRQUMzQkgsUUFBUSxDQUFDSyxhQUFhLENBQUNGLE9BQU8sRUFBRVYsVUFBVSxDQUFDQSxVQUFVLENBQUNLLEtBQUssQ0FBQyxDQUFDO01BQ2pFO0lBQ0osQ0FBQztFQUNMLENBQUMsTUFBTSxJQUFJVCxhQUFhLENBQUNBLGFBQWEsQ0FBQ1UsTUFBTSxFQUFFLE9BQU8sRUFBRTtJQUNwRE8sSUFBSSxFQUFFO0VBQ1YsQ0FBQyxDQUFDLEVBQUU7SUFDQSxPQUFPLE1BQUk7TUFDUDtNQUNBWixLQUFLLENBQUNhLFdBQVcsQ0FBQ1IsTUFBTSxDQUFDO01BQ3pCQSxNQUFNLENBQUNNLGFBQWEsQ0FBQyxLQUFLZCxTQUFTLENBQUNBLFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLENBQUVTLEtBQUssRUFBQyxZQUFZLENBQUMsQ0FBQztNQUMzRTtNQUNBZCxLQUFLLENBQUNVLFlBQVksQ0FBQ0wsTUFBTSxDQUFDO0lBQzlCLENBQUM7RUFDTDtBQUNKLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=